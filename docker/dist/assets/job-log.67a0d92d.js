import{u as Z,__tla as ee}from"./table.37525a6c.js";import{s as I,b as le,k as oe,g as D,__tla as ae}from"./index.dc33c00f.js";import{u as te,__tla as ne}from"./dict.99b87e50.js";import{K as z,h as c,a1 as re,ak as s,au as B,o as d,R as g,S as i,b as N,Y as l,T as b,u as e,W as w,X as j,G as V,P as se}from"./vue.445bf94b.js";import{__tla as ie}from"./dict.fb44d5e1.js";let $,ue=Promise.all([(()=>{try{return ee}catch{}})(),(()=>{try{return ae}catch{}})(),(()=>{try{return ne}catch{}})(),(()=>{try{return ie}catch{}})()]).then(async()=>{function q(p){return I({url:"/job/sys-job-log/page",method:"get",params:p})}function F(p){return I({url:"/job/sys-job-log",method:"delete",data:p})}let v,x,C;v={class:"layout-padding-auto layout-padding-view"},x={class:"mb8",style:{width:"100%"}},C=z({name:"job-log"}),$=z({...C,setup(p,{expose:H}){const{t}=le(),m=c(!1),{job_execute_status:K}=te("job_type","job_execute_status"),M=c(),h=c(!0),S=c([]),L=c(!0),u=re({queryForm:{jobId:""},pageList:q,createdIsNeed:!1}),{getDataList:_,currentChangeHandle:P,sizeChangeHandle:Q,tableStyle:T}=Z(u),R=o=>{m.value=!0,u.queryForm.jobId=o,_()},U=o=>{S.value=o.map(({jobLogId:a})=>a),L.value=!o.length},k=async o=>{try{await oe().confirm(t("common.delConfirmText"))}catch{return}try{await F(o),_(),D().success(t("common.delSuccessText"))}catch(a){D().error(a.msg)}};return H({openDialog:R}),(o,a)=>{const y=s("el-button"),G=s("right-toolbar"),W=s("el-row"),n=s("el-table-column"),X=s("dict-tag"),Y=s("el-table"),A=s("pagination"),E=s("el-dialog"),f=B("auth"),J=B("loading");return d(),g(E,{modelValue:e(m),"onUpdate:modelValue":a[2]||(a[2]=r=>V(m)?m.value=r:null),"close-on-click-modal":!1,fullscreen:"",title:"\u8FD0\u884C\u65E5\u5FD7",draggable:""},{default:i(()=>[N("div",v,[l(W,null,{default:i(()=>[N("div",x,[b((d(),g(y,{formDialogRef:"",disabled:e(L),icon:"Delete",type:"primary",class:"ml10",onClick:a[0]||(a[0]=r=>k(e(S)))},{default:i(()=>[w(j(o.$t("common.delBtn")),1)]),_:1},8,["disabled"])),[[f,"sys_log_del"]]),l(G,{showSearch:e(h),"onUpdate:showSearch":a[1]||(a[1]=r=>V(h)?h.value=r:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(_)},null,8,["showSearch","onQueryTable"])])]),_:1}),b((d(),g(Y,{data:e(u).dataList,style:{width:"100%"},onSelectionChange:U,border:"","cell-style":e(T).cellStyle,"header-cell-style":e(T).headerCellStyle},{default:i(()=>[l(n,{type:"selection",width:"40",align:"center"}),l(n,{type:"index",label:e(t)("log.index"),width:"80"},null,8,["label"]),l(n,{prop:"jobName",label:e(t)("log.jobName"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"jobMessage",label:e(t)("log.jobMessage"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"jobLogStatus",label:e(t)("log.jobLogStatus"),"show-overflow-tooltip":""},{default:i(r=>[l(X,{options:e(K),value:r.row.jobLogStatus},null,8,["options","value"])]),_:1},8,["label"]),l(n,{prop:"executeTime",label:e(t)("log.executeTime"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"exceptionInfo",label:e(t)("log.exceptionInfo"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"createTime",label:e(t)("log.createTime"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{label:o.$t("common.action"),width:"150"},{default:i(r=>[b((d(),g(y,{text:"",type:"primary",onClick:O=>e(M).openDialog(r.row.jobLogId)},{default:i(()=>[w(j(o.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[f,"pix_log_edit"]]),b((d(),g(y,{text:"",type:"primary",onClick:O=>k([r.row.jobLogId])},{default:i(()=>[w(j(o.$t("common.delBtn")),1)]),_:2},1032,["onClick"])),[[f,"sys_log_del"]])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[J,e(u).loading]]),l(A,se({onSizeChange:e(Q),onCurrentChange:e(P)},e(u).pagination),null,16,["onSizeChange","onCurrentChange"])])]),_:1},8,["modelValue"])}}})});export{ue as __tla,$ as default};
