import{b as le,p as O,k as ae,t as te,g as P,d as oe,__tla as ne}from"./index.dc33c00f.js";import{K as I,h as v,a1 as se,ak as s,au as Q,o as r,a as re,b as C,T as y,Z as de,u as n,Y as a,S as l,ac as ie,W as d,X as f,R as i,G as ue,V as x,aC as me}from"./vue.445bf94b.js";import{u as ce,__tla as pe}from"./table.37525a6c.js";let U,ye=Promise.all([(()=>{try{return ne}catch{}})(),(()=>{try{return pe}catch{}})()]).then(async()=>{let T,S,R,q,B;T={class:"layout-padding"},S={class:"layout-padding-auto layout-padding-view"},R={class:"mb8",style:{width:"100%"}},q={style:{"margin-left":"12px"}},B=I({name:"systemMenu"}),U=I({...B,setup(fe){const G=me(()=>oe(()=>import("./form.a7b3aa40.js").then(async e=>(await e.__tla,e)),["assets/form.a7b3aa40.js","assets/index.dc33c00f.js","assets/vue.445bf94b.js","assets/index.57bc2f6e.css"])),{t:D}=le(),N=v(),k=v(),w=v(!0),$=v(!1),m=se({pageList:O,queryForm:{menuName:""},isPage:!1}),{getDataList:_,tableStyle:V}=ce(m),F=(e,o)=>{k.value.openDialog(e,o)},W=(e,o)=>{k.value.openDialog(e,o)},L=e=>(e.children||[]).length>0,X=async()=>{$.value=!$.value;const e=await O();A(e.data,$.value)},A=(e,o=!0)=>{var b;for(const c in e)(b=N.value)==null||b.toggleRowExpansion(e[c],o),e[c].children&&A(e[c].children,o)},Y=async e=>{try{await ae().confirm(D("common.delConfirmText"))}catch{return}try{await te(e.id),_(),P().success(D("common.delSuccessText"))}catch(o){P().error(o.msg)}};return(e,o)=>{var K;const b=s("el-input"),c=s("el-form-item"),p=s("el-button"),Z=s("el-form"),E=s("el-row"),j=s("right-toolbar"),u=s("el-table-column"),z=s("SvgIcon"),h=s("el-tag"),H=s("el-tooltip"),J=s("el-table"),g=Q("auth"),ee=Q("loading");return r(),re("div",T,[C("div",S,[y(a(E,{shadow:"hover",class:"ml10"},{default:l(()=>[a(Z,{inline:!0,model:n(m).queryForm,onKeyup:ie(n(_),["enter"]),ref:"queryRef"},{default:l(()=>[a(c,{label:e.$t("sysmenu.name"),prop:"menuName"},{default:l(()=>[a(b,{placeholder:e.$t("sysmenu.inputNameTip"),clearable:"",style:{"max-width":"180px"},modelValue:n(m).queryForm.menuName,"onUpdate:modelValue":o[0]||(o[0]=t=>n(m).queryForm.menuName=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(c,null,{default:l(()=>[a(p,{onClick:n(_),class:"ml10",icon:"search",type:"primary"},{default:l(()=>[d(f(e.$t("common.queryBtn")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[de,n(w)]]),a(E,null,{default:l(()=>[C("div",R,[y((r(),i(p,{onClick:F,class:"ml10",icon:"folder-add",type:"primary"},{default:l(()=>[d(f(e.$t("common.addBtn")),1)]),_:1})),[[g,"sys_menu_add"]]),a(p,{onClick:X},{default:l(()=>[d(f(e.$t("common.expandBtn")),1)]),_:1}),a(j,{showSearch:n(w),"onUpdate:showSearch":o[1]||(o[1]=t=>ue(w)?w.value=t:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:n(_)},null,8,["showSearch","onQueryTable"])])]),_:1}),y((r(),i(J,{ref_key:"tableRef",ref:N,data:n(m).dataList,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"path",style:{width:"100%"},border:"","cell-style":n(V).cellStyle,"header-cell-style":(K=n(V))==null?void 0:K.headerCellStyle},{default:l(()=>[a(u,{label:e.$t("sysmenu.name"),fixed:"",prop:"name","show-overflow-tooltip":""},null,8,["label"]),a(u,{label:e.$t("sysmenu.sortOrder"),prop:"sortOrder","show-overflow-tooltip":""},null,8,["label"]),a(u,{label:e.$t("sysmenu.icon"),prop:"icon","show-overflow-tooltip":""},{default:l(t=>[a(z,{name:t.row.meta.icon},null,8,["name"])]),_:1},8,["label"]),a(u,{label:e.$t("sysmenu.path"),prop:"path","show-overflow-tooltip":""},null,8,["label"]),a(u,{label:e.$t("sysmenu.menuType"),"show-overflow-tooltip":""},{default:l(t=>[t.row.menuType==="0"?(r(),i(h,{key:0},{default:l(()=>[d("\u5DE6\u83DC\u5355")]),_:1})):x("",!0),t.row.menuType==="2"?(r(),i(h,{key:1},{default:l(()=>[d("\u9876\u83DC\u5355")]),_:1})):x("",!0),t.row.menuType==="1"?(r(),i(h,{key:2,type:"success"},{default:l(()=>[d("\u6309\u94AE")]),_:1})):x("",!0)]),_:1},8,["label"]),a(u,{label:e.$t("sysmenu.keepAlive"),"show-overflow-tooltip":""},{default:l(t=>[t.row.meta.isKeepAlive?(r(),i(h,{key:0},{default:l(()=>[d("\u5F00\u542F")]),_:1})):(r(),i(h,{key:1,type:"info"},{default:l(()=>[d("\u5173\u95ED")]),_:1}))]),_:1},8,["label"]),a(u,{label:e.$t("sysmenu.permission"),"show-overflow-tooltip":!0,prop:"permission"},null,8,["label"]),a(u,{label:e.$t("common.action"),"show-overflow-tooltip":"",width:"250"},{default:l(t=>[y((r(),i(p,{icon:"folder-add",onClick:M=>F("add",t.row),text:"",type:"primary"},{default:l(()=>[d(f(e.$t("common.addBtn")),1)]),_:2},1032,["onClick"])),[[g,"sys_menu_add"]]),y((r(),i(p,{icon:"edit-pen",onClick:M=>W("edit",t.row),text:"",type:"primary"},{default:l(()=>[d(f(e.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[g,"sys_menu_edit"]]),a(H,{icon:"delete",content:e.$t("sysmenu.deleteDisabledTip"),disabled:!L(t.row),placement:"top"},{default:l(()=>[C("span",q,[y((r(),i(p,{icon:"delete",disabled:L(t.row),onClick:M=>Y(t.row),text:"",type:"primary"},{default:l(()=>[d(f(e.$t("common.delBtn")),1)]),_:2},1032,["disabled","onClick"])),[[g,"sys_menu_del"]])])]),_:2},1032,["content","disabled"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[ee,n(m).loading]])]),a(n(G),{onRefresh:o[2]||(o[2]=t=>n(_)()),ref_key:"menuDialogRef",ref:k},null,512)])}}})});export{ye as __tla,U as default};
