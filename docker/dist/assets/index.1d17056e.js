import{aq as pu,o as gu,a as vu,T as mu,an as yu,b as bu,O as xu}from"./vue.445bf94b.js";import{x as wu,w as Cu,_ as Su,__tla as ku}from"./index.dc33c00f.js";let Yl,Lu=Promise.all([(()=>{try{return ku}catch{}})()]).then(async()=>{var Pi={exports:{}},Hi;function zn(){return Hi||(Hi=1,function(Lt,We){(function(F,wt){Lt.exports=wt()})(wu,function(){var F=navigator.userAgent,wt=navigator.platform,q=/gecko\/\d/i.test(F),Ct=/MSIE \d/.test(F),Wt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(F),At=/Edge\/(\d+)/.exec(F),D=Ct||Wt||At,I=D&&(Ct?document.documentMode||6:+(At||Wt)[1]),W=!At&&/WebKit\//.test(F),Y=W&&/Qt\/\d+\.\d+/.test(F),G=!At&&/Chrome\/(\d+)/.exec(F),E=G&&+G[1],k=/Opera\//.test(F),w=/Apple Computer/.test(navigator.vendor),S=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(F),M=/PhantomJS/.test(F),V=w&&(/Mobile\/\w+/.test(F)||navigator.maxTouchPoints>2),Tt=/Android/.test(F),Qt=V||Tt||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(F),Dt=V||/Mac/.test(wt),Ql=/\bCrOS\b/.test(F),ta=/win/i.test(wt),he=k&&F.match(/Version\/(\d*\.\d*)/);he&&(he=Number(he[1])),he&&he>=15&&(k=!1,W=!0);var zi=Dt&&(Y||k&&(he==null||he<12.11)),xr=q||D&&I>=9;function Ae(t){return new RegExp("(^|\\s)"+t+"(?:$|\\s)\\s*")}var de=function(t,e){var r=t.className,n=Ae(e).exec(r);if(n){var i=r.slice(n.index+n[0].length);t.className=r.slice(0,n.index)+(i?n[1]+i:"")}};function te(t){for(var e=t.childNodes.length;e>0;--e)t.removeChild(t.firstChild);return t}function Mt(t,e){return te(t).appendChild(e)}function O(t,e,r,n){var i=document.createElement(t);if(r&&(i.className=r),n&&(i.style.cssText=n),typeof e=="string")i.appendChild(document.createTextNode(e));else if(e)for(var o=0;o<e.length;++o)i.appendChild(e[o]);return i}function De(t,e,r,n){var i=O(t,e,r,n);return i.setAttribute("role","presentation"),i}var pe;document.createRange?pe=function(t,e,r,n){var i=document.createRange();return i.setEnd(n||t,r),i.setStart(t,e),i}:pe=function(t,e,r){var n=document.body.createTextRange();try{n.moveToElementText(t.parentNode)}catch{return n}return n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",e),n};function ee(t,e){if(e.nodeType==3&&(e=e.parentNode),t.contains)return t.contains(e);do if(e.nodeType==11&&(e=e.host),e==t)return!0;while(e=e.parentNode)}function Et(){var t;try{t=document.activeElement}catch{t=document.body||null}for(;t&&t.shadowRoot&&t.shadowRoot.activeElement;)t=t.shadowRoot.activeElement;return t}function ge(t,e){var r=t.className;Ae(e).test(r)||(t.className+=(r?" ":"")+e)}function wr(t,e){for(var r=t.split(" "),n=0;n<r.length;n++)r[n]&&!Ae(r[n]).test(e)&&(e+=" "+r[n]);return e}var en=function(t){t.select()};V?en=function(t){t.selectionStart=0,t.selectionEnd=t.value.length}:D&&(en=function(t){try{t.select()}catch{}});function Cr(t){var e=Array.prototype.slice.call(arguments,1);return function(){return t.apply(null,e)}}function ve(t,e,r){e||(e={});for(var n in t)t.hasOwnProperty(n)&&(r!==!1||!e.hasOwnProperty(n))&&(e[n]=t[n]);return e}function Pt(t,e,r,n,i){e==null&&(e=t.search(/[^\s\u00a0]/),e==-1&&(e=t.length));for(var o=n||0,l=i||0;;){var a=t.indexOf("	",o);if(a<0||a>=e)return l+(e-o);l+=a-o,l+=r-l%r,o=a+1}}var ne=function(){this.id=null,this.f=null,this.time=0,this.handler=Cr(this.onTimeout,this)};ne.prototype.onTimeout=function(t){t.id=0,t.time<=+new Date?t.f():setTimeout(t.handler,t.time-+new Date)},ne.prototype.set=function(t,e){this.f=e;var r=+new Date+t;(!this.id||r<this.time)&&(clearTimeout(this.id),this.id=setTimeout(this.handler,t),this.time=r)};function ct(t,e){for(var r=0;r<t.length;++r)if(t[r]==e)return r;return-1}var Ii=50,In={toString:function(){return"CodeMirror.Pass"}},Bt={scroll:!1},Sr={origin:"*mouse"},nn={origin:"+move"};function kr(t,e,r){for(var n=0,i=0;;){var o=t.indexOf("	",n);o==-1&&(o=t.length);var l=o-n;if(o==t.length||i+l>=e)return n+Math.min(l,e-i);if(i+=o-n,i+=r-i%r,n=o+1,i>=e)return n}}var Fn=[""];function Lr(t){for(;Fn.length<=t;)Fn.push(B(Fn)+" ");return Fn[t]}function B(t){return t[t.length-1]}function Rn(t,e){for(var r=[],n=0;n<t.length;n++)r[n]=e(t[n],n);return r}function ea(t,e,r){for(var n=0,i=r(e);n<t.length&&r(t[n])<=i;)n++;t.splice(n,0,e)}function Fi(){}function Ri(t,e){var r;return Object.create?r=Object.create(t):(Fi.prototype=t,r=new Fi),e&&ve(e,r),r}var na=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function Tr(t){return/\w/.test(t)||t>"\x80"&&(t.toUpperCase()!=t.toLowerCase()||na.test(t))}function Bn(t,e){return e?e.source.indexOf("\\w")>-1&&Tr(t)?!0:e.test(t):Tr(t)}function Bi(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e])return!1;return!0}var ra=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function Mr(t){return t.charCodeAt(0)>=768&&ra.test(t)}function Gi(t,e,r){for(;(r<0?e>0:e<t.length)&&Mr(t.charAt(e));)e+=r;return e}function rn(t,e,r){for(var n=e>r?-1:1;;){if(e==r)return e;var i=(e+r)/2,o=n<0?Math.ceil(i):Math.floor(i);if(o==e)return t(o)?e:r;t(o)?r=o:e=o+n}}function ia(t,e,r,n){if(!t)return n(e,r,"ltr",0);for(var i=!1,o=0;o<t.length;++o){var l=t[o];(l.from<r&&l.to>e||e==r&&l.to==e)&&(n(Math.max(l.from,e),Math.min(l.to,r),l.level==1?"rtl":"ltr",o),i=!0)}i||n(e,r,"ltr")}var on=null;function ln(t,e,r){var n;on=null;for(var i=0;i<t.length;++i){var o=t[i];if(o.from<e&&o.to>e)return i;o.to==e&&(o.from!=o.to&&r=="before"?n=i:on=i),o.from==e&&(o.from!=o.to&&r!="before"?n=i:on=i)}return n??on}var oa=function(){var t="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",e="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function r(u){return u<=247?t.charAt(u):1424<=u&&u<=1524?"R":1536<=u&&u<=1785?e.charAt(u-1536):1774<=u&&u<=2220?"r":8192<=u&&u<=8203?"w":u==8204?"b":"L"}var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,o=/[LRr]/,l=/[Lb1n]/,a=/[1n]/;function s(u,c,f){this.level=u,this.from=c,this.to=f}return function(u,c){var f=c=="ltr"?"L":"R";if(u.length==0||c=="ltr"&&!n.test(u))return!1;for(var d=u.length,h=[],p=0;p<d;++p)h.push(r(u.charCodeAt(p)));for(var g=0,m=f;g<d;++g){var y=h[g];y=="m"?h[g]=m:m=y}for(var x=0,b=f;x<d;++x){var C=h[x];C=="1"&&b=="r"?h[x]="n":o.test(C)&&(b=C,C=="r"&&(h[x]="R"))}for(var N=1,T=h[0];N<d-1;++N){var z=h[N];z=="+"&&T=="1"&&h[N+1]=="1"?h[N]="1":z==","&&T==h[N+1]&&(T=="1"||T=="n")&&(h[N]=T),T=z}for(var $=0;$<d;++$){var at=h[$];if(at==",")h[$]="N";else if(at=="%"){var _=void 0;for(_=$+1;_<d&&h[_]=="%";++_);for(var kt=$&&h[$-1]=="!"||_<d&&h[_]=="1"?"1":"N",yt=$;yt<_;++yt)h[yt]=kt;$=_-1}}for(var tt=0,bt=f;tt<d;++tt){var ut=h[tt];bt=="L"&&ut=="1"?h[tt]="L":o.test(ut)&&(bt=ut)}for(var nt=0;nt<d;++nt)if(i.test(h[nt])){var et=void 0;for(et=nt+1;et<d&&i.test(h[et]);++et);for(var X=(nt?h[nt-1]:f)=="L",xt=(et<d?h[et]:f)=="L",Qe=X==xt?X?"L":"R":f,fe=nt;fe<et;++fe)h[fe]=Qe;nt=et-1}for(var ht=[],$t,st=0;st<d;)if(l.test(h[st])){var Di=st;for(++st;st<d&&l.test(h[st]);++st);ht.push(new s(0,Di,st))}else{var Jt=st,Ne=ht.length,Oe=c=="rtl"?1:0;for(++st;st<d&&h[st]!="L";++st);for(var pt=Jt;pt<st;)if(a.test(h[pt])){Jt<pt&&(ht.splice(Ne,0,new s(1,Jt,pt)),Ne+=Oe);var tn=pt;for(++pt;pt<st&&a.test(h[pt]);++pt);ht.splice(Ne,0,new s(2,tn,pt)),Ne+=Oe,Jt=pt}else++pt;Jt<st&&ht.splice(Ne,0,new s(1,Jt,st))}return c=="ltr"&&(ht[0].level==1&&($t=u.match(/^\s+/))&&(ht[0].from=$t[0].length,ht.unshift(new s(0,0,$t[0].length))),B(ht).level==1&&($t=u.match(/\s+$/))&&(B(ht).to-=$t[0].length,ht.push(new s(0,d-$t[0].length,d)))),c=="rtl"?ht.reverse():ht}}();function jt(t,e){var r=t.order;return r==null&&(r=t.order=oa(t.text,e)),r}var Vi=[],A=function(t,e,r){if(t.addEventListener)t.addEventListener(e,r,!1);else if(t.attachEvent)t.attachEvent("on"+e,r);else{var n=t._handlers||(t._handlers={});n[e]=(n[e]||Vi).concat(r)}};function Nr(t,e){return t._handlers&&t._handlers[e]||Vi}function Nt(t,e,r){if(t.removeEventListener)t.removeEventListener(e,r,!1);else if(t.detachEvent)t.detachEvent("on"+e,r);else{var n=t._handlers,i=n&&n[e];if(i){var o=ct(i,r);o>-1&&(n[e]=i.slice(0,o).concat(i.slice(o+1)))}}}function J(t,e){var r=Nr(t,e);if(r.length)for(var n=Array.prototype.slice.call(arguments,2),i=0;i<r.length;++i)r[i].apply(null,n)}function rt(t,e,r){return typeof e=="string"&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),J(t,r||e.type,t,e),Or(e)||e.codemirrorIgnore}function Ui(t){var e=t._handlers&&t._handlers.cursorActivity;if(e)for(var r=t.curOp.cursorActivityHandlers||(t.curOp.cursorActivityHandlers=[]),n=0;n<e.length;++n)ct(r,e[n])==-1&&r.push(e[n])}function Ht(t,e){return Nr(t,e).length>0}function Ee(t){t.prototype.on=function(e,r){A(this,e,r)},t.prototype.off=function(e,r){Nt(this,e,r)}}function gt(t){t.preventDefault?t.preventDefault():t.returnValue=!1}function Ki(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}function Or(t){return t.defaultPrevented!=null?t.defaultPrevented:t.returnValue==!1}function an(t){gt(t),Ki(t)}function Wr(t){return t.target||t.srcElement}function $i(t){var e=t.which;return e==null&&(t.button&1?e=1:t.button&2?e=3:t.button&4&&(e=2)),Dt&&t.ctrlKey&&e==1&&(e=3),e}var la=function(){if(D&&I<9)return!1;var t=O("div");return"draggable"in t||"dragDrop"in t}(),Ar;function aa(t){if(Ar==null){var e=O("span","\u200B");Mt(t,O("span",[e,document.createTextNode("x")])),t.firstChild.offsetHeight!=0&&(Ar=e.offsetWidth<=1&&e.offsetHeight>2&&!(D&&I<8))}var r=Ar?O("span","\u200B"):O("span","\xA0",null,"display: inline-block; width: 1px; margin-right: -1px");return r.setAttribute("cm-text",""),r}var Dr;function sa(t){if(Dr!=null)return Dr;var e=Mt(t,document.createTextNode("A\u062EA")),r=pe(e,0,1).getBoundingClientRect(),n=pe(e,1,2).getBoundingClientRect();return te(t),!r||r.left==r.right?!1:Dr=n.right-r.right<3}var Er=`

b`.split(/\n/).length!=3?function(t){for(var e=0,r=[],n=t.length;e<=n;){var i=t.indexOf(`
`,e);i==-1&&(i=t.length);var o=t.slice(e,t.charAt(i-1)=="\r"?i-1:i),l=o.indexOf("\r");l!=-1?(r.push(o.slice(0,l)),e+=l+1):(r.push(o),e=i+1)}return r}:function(t){return t.split(/\r\n?|\n/)},ua=window.getSelection?function(t){try{return t.selectionStart!=t.selectionEnd}catch{return!1}}:function(t){var e;try{e=t.ownerDocument.selection.createRange()}catch{}return!e||e.parentElement()!=t?!1:e.compareEndPoints("StartToEnd",e)!=0},ca=function(){var t=O("div");return"oncopy"in t?!0:(t.setAttribute("oncopy","return;"),typeof t.oncopy=="function")}(),Pr=null;function fa(t){if(Pr!=null)return Pr;var e=Mt(t,O("span","x")),r=e.getBoundingClientRect(),n=pe(e,0,1).getBoundingClientRect();return Pr=Math.abs(r.left-n.left)>1}var Hr={},Pe={};function ha(t,e){arguments.length>2&&(e.dependencies=Array.prototype.slice.call(arguments,2)),Hr[t]=e}function da(t,e){Pe[t]=e}function Gn(t){if(typeof t=="string"&&Pe.hasOwnProperty(t))t=Pe[t];else if(t&&typeof t.name=="string"&&Pe.hasOwnProperty(t.name)){var e=Pe[t.name];typeof e=="string"&&(e={name:e}),t=Ri(e,t),t.name=e.name}else{if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return Gn("application/xml");if(typeof t=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(t))return Gn("application/json")}return typeof t=="string"?{name:t}:t||{name:"null"}}function zr(t,e){e=Gn(e);var r=Hr[e.name];if(!r)return zr(t,"text/plain");var n=r(t,e);if(He.hasOwnProperty(e.name)){var i=He[e.name];for(var o in i)i.hasOwnProperty(o)&&(n.hasOwnProperty(o)&&(n["_"+o]=n[o]),n[o]=i[o])}if(n.name=e.name,e.helperType&&(n.helperType=e.helperType),e.modeProps)for(var l in e.modeProps)n[l]=e.modeProps[l];return n}var He={};function pa(t,e){var r=He.hasOwnProperty(t)?He[t]:He[t]={};ve(e,r)}function me(t,e){if(e===!0)return e;if(t.copyState)return t.copyState(e);var r={};for(var n in e){var i=e[n];i instanceof Array&&(i=i.concat([])),r[n]=i}return r}function Ir(t,e){for(var r;t.innerMode&&(r=t.innerMode(e),!(!r||r.mode==t));)e=r.state,t=r.mode;return r||{mode:t,state:e}}function ji(t,e,r){return t.startState?t.startState(e,r):!0}var Q=function(t,e,r){this.pos=this.start=0,this.string=t,this.tabSize=e||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=r};Q.prototype.eol=function(){return this.pos>=this.string.length},Q.prototype.sol=function(){return this.pos==this.lineStart},Q.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},Q.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},Q.prototype.eat=function(t){var e=this.string.charAt(this.pos),r;if(typeof t=="string"?r=e==t:r=e&&(t.test?t.test(e):t(e)),r)return++this.pos,e},Q.prototype.eatWhile=function(t){for(var e=this.pos;this.eat(t););return this.pos>e},Q.prototype.eatSpace=function(){for(var t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>t},Q.prototype.skipToEnd=function(){this.pos=this.string.length},Q.prototype.skipTo=function(t){var e=this.string.indexOf(t,this.pos);if(e>-1)return this.pos=e,!0},Q.prototype.backUp=function(t){this.pos-=t},Q.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Pt(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?Pt(this.string,this.lineStart,this.tabSize):0)},Q.prototype.indentation=function(){return Pt(this.string,null,this.tabSize)-(this.lineStart?Pt(this.string,this.lineStart,this.tabSize):0)},Q.prototype.match=function(t,e,r){if(typeof t=="string"){var n=function(l){return r?l.toLowerCase():l},i=this.string.substr(this.pos,t.length);if(n(i)==n(t))return e!==!1&&(this.pos+=t.length),!0}else{var o=this.string.slice(this.pos).match(t);return o&&o.index>0?null:(o&&e!==!1&&(this.pos+=o[0].length),o)}},Q.prototype.current=function(){return this.string.slice(this.start,this.pos)},Q.prototype.hideFirstChars=function(t,e){this.lineStart+=t;try{return e()}finally{this.lineStart-=t}},Q.prototype.lookAhead=function(t){var e=this.lineOracle;return e&&e.lookAhead(t)},Q.prototype.baseToken=function(){var t=this.lineOracle;return t&&t.baseToken(this.pos)};function L(t,e){if(e-=t.first,e<0||e>=t.size)throw new Error("There is no line "+(e+t.first)+" in the document.");for(var r=t;!r.lines;)for(var n=0;;++n){var i=r.children[n],o=i.chunkSize();if(e<o){r=i;break}e-=o}return r.lines[e]}function ye(t,e,r){var n=[],i=e.line;return t.iter(e.line,r.line+1,function(o){var l=o.text;i==r.line&&(l=l.slice(0,r.ch)),i==e.line&&(l=l.slice(e.ch)),n.push(l),++i}),n}function Fr(t,e,r){var n=[];return t.iter(e,r,function(i){n.push(i.text)}),n}function Gt(t,e){var r=e-t.height;if(r)for(var n=t;n;n=n.parent)n.height+=r}function U(t){if(t.parent==null)return null;for(var e=t.parent,r=ct(e.lines,t),n=e.parent;n;e=n,n=n.parent)for(var i=0;n.children[i]!=e;++i)r+=n.children[i].chunkSize();return r+e.first}function be(t,e){var r=t.first;t:do{for(var n=0;n<t.children.length;++n){var i=t.children[n],o=i.height;if(e<o){t=i;continue t}e-=o,r+=i.chunkSize()}return r}while(!t.lines);for(var l=0;l<t.lines.length;++l){var a=t.lines[l],s=a.height;if(e<s)break;e-=s}return r+l}function sn(t,e){return e>=t.first&&e<t.first+t.size}function Rr(t,e){return String(t.lineNumberFormatter(e+t.firstLineNumber))}function v(t,e,r){if(r===void 0&&(r=null),!(this instanceof v))return new v(t,e,r);this.line=t,this.ch=e,this.sticky=r}function P(t,e){return t.line-e.line||t.ch-e.ch}function Br(t,e){return t.sticky==e.sticky&&P(t,e)==0}function Gr(t){return v(t.line,t.ch)}function Vn(t,e){return P(t,e)<0?e:t}function Un(t,e){return P(t,e)<0?t:e}function _i(t,e){return Math.max(t.first,Math.min(e,t.first+t.size-1))}function H(t,e){if(e.line<t.first)return v(t.first,0);var r=t.first+t.size-1;return e.line>r?v(r,L(t,r).text.length):ga(e,L(t,e.line).text.length)}function ga(t,e){var r=t.ch;return r==null||r>e?v(t.line,e):r<0?v(t.line,0):t}function Yi(t,e){for(var r=[],n=0;n<e.length;n++)r[n]=H(t,e[n]);return r}var Kn=function(t,e){this.state=t,this.lookAhead=e},Vt=function(t,e,r,n){this.state=e,this.doc=t,this.line=r,this.maxLookAhead=n||0,this.baseTokens=null,this.baseTokenPos=1};Vt.prototype.lookAhead=function(t){var e=this.doc.getLine(this.line+t);return e!=null&&t>this.maxLookAhead&&(this.maxLookAhead=t),e},Vt.prototype.baseToken=function(t){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=t;)this.baseTokenPos+=2;var e=this.baseTokens[this.baseTokenPos+1];return{type:e&&e.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-t}},Vt.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},Vt.fromSaved=function(t,e,r){return e instanceof Kn?new Vt(t,me(t.mode,e.state),r,e.lookAhead):new Vt(t,me(t.mode,e),r)},Vt.prototype.save=function(t){var e=t!==!1?me(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new Kn(e,this.maxLookAhead):e};function Xi(t,e,r,n){var i=[t.state.modeGen],o={};eo(t,e.text,t.doc.mode,r,function(u,c){return i.push(u,c)},o,n);for(var l=r.state,a=function(u){r.baseTokens=i;var c=t.state.overlays[u],f=1,d=0;r.state=!0,eo(t,e.text,c.mode,r,function(h,p){for(var g=f;d<h;){var m=i[f];m>h&&i.splice(f,1,h,i[f+1],m),f+=2,d=Math.min(h,m)}if(p)if(c.opaque)i.splice(g,f-g,h,"overlay "+p),f=g+2;else for(;g<f;g+=2){var y=i[g+1];i[g+1]=(y?y+" ":"")+"overlay "+p}},o),r.state=l,r.baseTokens=null,r.baseTokenPos=1},s=0;s<t.state.overlays.length;++s)a(s);return{styles:i,classes:o.bgClass||o.textClass?o:null}}function Zi(t,e,r){if(!e.styles||e.styles[0]!=t.state.modeGen){var n=un(t,U(e)),i=e.text.length>t.options.maxHighlightLength&&me(t.doc.mode,n.state),o=Xi(t,e,n);i&&(n.state=i),e.stateAfter=n.save(!i),e.styles=o.styles,o.classes?e.styleClasses=o.classes:e.styleClasses&&(e.styleClasses=null),r===t.doc.highlightFrontier&&(t.doc.modeFrontier=Math.max(t.doc.modeFrontier,++t.doc.highlightFrontier))}return e.styles}function un(t,e,r){var n=t.doc,i=t.display;if(!n.mode.startState)return new Vt(n,!0,e);var o=va(t,e,r),l=o>n.first&&L(n,o-1).stateAfter,a=l?Vt.fromSaved(n,l,o):new Vt(n,ji(n.mode),o);return n.iter(o,e,function(s){Vr(t,s.text,a);var u=a.line;s.stateAfter=u==e-1||u%5==0||u>=i.viewFrom&&u<i.viewTo?a.save():null,a.nextLine()}),r&&(n.modeFrontier=a.line),a}function Vr(t,e,r,n){var i=t.doc.mode,o=new Q(e,t.options.tabSize,r);for(o.start=o.pos=n||0,e==""&&qi(i,r.state);!o.eol();)Ur(i,o,r.state),o.start=o.pos}function qi(t,e){if(t.blankLine)return t.blankLine(e);if(t.innerMode){var r=Ir(t,e);if(r.mode.blankLine)return r.mode.blankLine(r.state)}}function Ur(t,e,r,n){for(var i=0;i<10;i++){n&&(n[0]=Ir(t,r).mode);var o=t.token(e,r);if(e.pos>e.start)return o}throw new Error("Mode "+t.name+" failed to advance stream.")}var Ji=function(t,e,r){this.start=t.start,this.end=t.pos,this.string=t.current(),this.type=e||null,this.state=r};function Qi(t,e,r,n){var i=t.doc,o=i.mode,l;e=H(i,e);var a=L(i,e.line),s=un(t,e.line,r),u=new Q(a.text,t.options.tabSize,s),c;for(n&&(c=[]);(n||u.pos<e.ch)&&!u.eol();)u.start=u.pos,l=Ur(o,u,s.state),n&&c.push(new Ji(u,l,me(i.mode,s.state)));return n?c:new Ji(u,l,s.state)}function to(t,e){if(t)for(;;){var r=t.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!r)break;t=t.slice(0,r.index)+t.slice(r.index+r[0].length);var n=r[1]?"bgClass":"textClass";e[n]==null?e[n]=r[2]:new RegExp("(?:^|\\s)"+r[2]+"(?:$|\\s)").test(e[n])||(e[n]+=" "+r[2])}return t}function eo(t,e,r,n,i,o,l){var a=r.flattenSpans;a==null&&(a=t.options.flattenSpans);var s=0,u=null,c=new Q(e,t.options.tabSize,n),f,d=t.options.addModeClass&&[null];for(e==""&&to(qi(r,n.state),o);!c.eol();){if(c.pos>t.options.maxHighlightLength?(a=!1,l&&Vr(t,e,n,c.pos),c.pos=e.length,f=null):f=to(Ur(r,c,n.state,d),o),d){var h=d[0].name;h&&(f="m-"+(f?h+" "+f:h))}if(!a||u!=f){for(;s<c.start;)s=Math.min(c.start,s+5e3),i(s,u);u=f}c.start=c.pos}for(;s<c.pos;){var p=Math.min(c.pos,s+5e3);i(p,u),s=p}}function va(t,e,r){for(var n,i,o=t.doc,l=r?-1:e-(t.doc.mode.innerMode?1e3:100),a=e;a>l;--a){if(a<=o.first)return o.first;var s=L(o,a-1),u=s.stateAfter;if(u&&(!r||a+(u instanceof Kn?u.lookAhead:0)<=o.modeFrontier))return a;var c=Pt(s.text,null,t.options.tabSize);(i==null||n>c)&&(i=a-1,n=c)}return i}function ma(t,e){if(t.modeFrontier=Math.min(t.modeFrontier,e),!(t.highlightFrontier<e-10)){for(var r=t.first,n=e-1;n>r;n--){var i=L(t,n).stateAfter;if(i&&(!(i instanceof Kn)||n+i.lookAhead<e)){r=n+1;break}}t.highlightFrontier=Math.min(t.highlightFrontier,r)}}var no=!1,_t=!1;function ya(){no=!0}function ba(){_t=!0}function $n(t,e,r){this.marker=t,this.from=e,this.to=r}function cn(t,e){if(t)for(var r=0;r<t.length;++r){var n=t[r];if(n.marker==e)return n}}function xa(t,e){for(var r,n=0;n<t.length;++n)t[n]!=e&&(r||(r=[])).push(t[n]);return r}function wa(t,e,r){var n=r&&window.WeakSet&&(r.markedSpans||(r.markedSpans=new WeakSet));n&&t.markedSpans&&n.has(t.markedSpans)?t.markedSpans.push(e):(t.markedSpans=t.markedSpans?t.markedSpans.concat([e]):[e],n&&n.add(t.markedSpans)),e.marker.attachLine(t)}function Ca(t,e,r){var n;if(t)for(var i=0;i<t.length;++i){var o=t[i],l=o.marker,a=o.from==null||(l.inclusiveLeft?o.from<=e:o.from<e);if(a||o.from==e&&l.type=="bookmark"&&(!r||!o.marker.insertLeft)){var s=o.to==null||(l.inclusiveRight?o.to>=e:o.to>e);(n||(n=[])).push(new $n(l,o.from,s?null:o.to))}}return n}function Sa(t,e,r){var n;if(t)for(var i=0;i<t.length;++i){var o=t[i],l=o.marker,a=o.to==null||(l.inclusiveRight?o.to>=e:o.to>e);if(a||o.from==e&&l.type=="bookmark"&&(!r||o.marker.insertLeft)){var s=o.from==null||(l.inclusiveLeft?o.from<=e:o.from<e);(n||(n=[])).push(new $n(l,s?null:o.from-e,o.to==null?null:o.to-e))}}return n}function Kr(t,e){if(e.full)return null;var r=sn(t,e.from.line)&&L(t,e.from.line).markedSpans,n=sn(t,e.to.line)&&L(t,e.to.line).markedSpans;if(!r&&!n)return null;var i=e.from.ch,o=e.to.ch,l=P(e.from,e.to)==0,a=Ca(r,i,l),s=Sa(n,o,l),u=e.text.length==1,c=B(e.text).length+(u?i:0);if(a)for(var f=0;f<a.length;++f){var d=a[f];if(d.to==null){var h=cn(s,d.marker);h?u&&(d.to=h.to==null?null:h.to+c):d.to=i}}if(s)for(var p=0;p<s.length;++p){var g=s[p];if(g.to!=null&&(g.to+=c),g.from==null){var m=cn(a,g.marker);m||(g.from=c,u&&(a||(a=[])).push(g))}else g.from+=c,u&&(a||(a=[])).push(g)}a&&(a=ro(a)),s&&s!=a&&(s=ro(s));var y=[a];if(!u){var x=e.text.length-2,b;if(x>0&&a)for(var C=0;C<a.length;++C)a[C].to==null&&(b||(b=[])).push(new $n(a[C].marker,null,null));for(var N=0;N<x;++N)y.push(b);y.push(s)}return y}function ro(t){for(var e=0;e<t.length;++e){var r=t[e];r.from!=null&&r.from==r.to&&r.marker.clearWhenEmpty!==!1&&t.splice(e--,1)}return t.length?t:null}function ka(t,e,r){var n=null;if(t.iter(e.line,r.line+1,function(h){if(h.markedSpans)for(var p=0;p<h.markedSpans.length;++p){var g=h.markedSpans[p].marker;g.readOnly&&(!n||ct(n,g)==-1)&&(n||(n=[])).push(g)}}),!n)return null;for(var i=[{from:e,to:r}],o=0;o<n.length;++o)for(var l=n[o],a=l.find(0),s=0;s<i.length;++s){var u=i[s];if(!(P(u.to,a.from)<0||P(u.from,a.to)>0)){var c=[s,1],f=P(u.from,a.from),d=P(u.to,a.to);(f<0||!l.inclusiveLeft&&!f)&&c.push({from:u.from,to:a.from}),(d>0||!l.inclusiveRight&&!d)&&c.push({from:a.to,to:u.to}),i.splice.apply(i,c),s+=c.length-3}}return i}function io(t){var e=t.markedSpans;if(e){for(var r=0;r<e.length;++r)e[r].marker.detachLine(t);t.markedSpans=null}}function oo(t,e){if(e){for(var r=0;r<e.length;++r)e[r].marker.attachLine(t);t.markedSpans=e}}function jn(t){return t.inclusiveLeft?-1:0}function _n(t){return t.inclusiveRight?1:0}function $r(t,e){var r=t.lines.length-e.lines.length;if(r!=0)return r;var n=t.find(),i=e.find(),o=P(n.from,i.from)||jn(t)-jn(e);if(o)return-o;var l=P(n.to,i.to)||_n(t)-_n(e);return l||e.id-t.id}function lo(t,e){var r=_t&&t.markedSpans,n;if(r)for(var i=void 0,o=0;o<r.length;++o)i=r[o],i.marker.collapsed&&(e?i.from:i.to)==null&&(!n||$r(n,i.marker)<0)&&(n=i.marker);return n}function ao(t){return lo(t,!0)}function Yn(t){return lo(t,!1)}function La(t,e){var r=_t&&t.markedSpans,n;if(r)for(var i=0;i<r.length;++i){var o=r[i];o.marker.collapsed&&(o.from==null||o.from<e)&&(o.to==null||o.to>e)&&(!n||$r(n,o.marker)<0)&&(n=o.marker)}return n}function so(t,e,r,n,i){var o=L(t,e),l=_t&&o.markedSpans;if(l)for(var a=0;a<l.length;++a){var s=l[a];if(s.marker.collapsed){var u=s.marker.find(0),c=P(u.from,r)||jn(s.marker)-jn(i),f=P(u.to,n)||_n(s.marker)-_n(i);if(!(c>=0&&f<=0||c<=0&&f>=0)&&(c<=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?P(u.to,r)>=0:P(u.to,r)>0)||c>=0&&(s.marker.inclusiveRight&&i.inclusiveLeft?P(u.from,n)<=0:P(u.from,n)<0)))return!0}}}function zt(t){for(var e;e=ao(t);)t=e.find(-1,!0).line;return t}function Ta(t){for(var e;e=Yn(t);)t=e.find(1,!0).line;return t}function Ma(t){for(var e,r;e=Yn(t);)t=e.find(1,!0).line,(r||(r=[])).push(t);return r}function jr(t,e){var r=L(t,e),n=zt(r);return r==n?e:U(n)}function uo(t,e){if(e>t.lastLine())return e;var r=L(t,e),n;if(!re(t,r))return e;for(;n=Yn(r);)r=n.find(1,!0).line;return U(r)+1}function re(t,e){var r=_t&&e.markedSpans;if(r){for(var n=void 0,i=0;i<r.length;++i)if(n=r[i],!!n.marker.collapsed&&(n.from==null||!n.marker.widgetNode&&n.from==0&&n.marker.inclusiveLeft&&_r(t,e,n)))return!0}}function _r(t,e,r){if(r.to==null){var n=r.marker.find(1,!0);return _r(t,n.line,cn(n.line.markedSpans,r.marker))}if(r.marker.inclusiveRight&&r.to==e.text.length)return!0;for(var i=void 0,o=0;o<e.markedSpans.length;++o)if(i=e.markedSpans[o],i.marker.collapsed&&!i.marker.widgetNode&&i.from==r.to&&(i.to==null||i.to!=r.from)&&(i.marker.inclusiveLeft||r.marker.inclusiveRight)&&_r(t,e,i))return!0}function Yt(t){t=zt(t);for(var e=0,r=t.parent,n=0;n<r.lines.length;++n){var i=r.lines[n];if(i==t)break;e+=i.height}for(var o=r.parent;o;r=o,o=r.parent)for(var l=0;l<o.children.length;++l){var a=o.children[l];if(a==r)break;e+=a.height}return e}function Xn(t){if(t.height==0)return 0;for(var e=t.text.length,r,n=t;r=ao(n);){var i=r.find(0,!0);n=i.from.line,e+=i.from.ch-i.to.ch}for(n=t;r=Yn(n);){var o=r.find(0,!0);e-=n.text.length-o.from.ch,n=o.to.line,e+=n.text.length-o.to.ch}return e}function Yr(t){var e=t.display,r=t.doc;e.maxLine=L(r,r.first),e.maxLineLength=Xn(e.maxLine),e.maxLineChanged=!0,r.iter(function(n){var i=Xn(n);i>e.maxLineLength&&(e.maxLineLength=i,e.maxLine=n)})}var ze=function(t,e,r){this.text=t,oo(this,e),this.height=r?r(this):1};ze.prototype.lineNo=function(){return U(this)},Ee(ze);function Na(t,e,r,n){t.text=e,t.stateAfter&&(t.stateAfter=null),t.styles&&(t.styles=null),t.order!=null&&(t.order=null),io(t),oo(t,r);var i=n?n(t):1;i!=t.height&&Gt(t,i)}function Oa(t){t.parent=null,io(t)}var Wa={},Aa={};function co(t,e){if(!t||/^\s*$/.test(t))return null;var r=e.addModeClass?Aa:Wa;return r[t]||(r[t]=t.replace(/\S+/g,"cm-$&"))}function fo(t,e){var r=De("span",null,null,W?"padding-right: .1px":null),n={pre:De("pre",[r],"CodeMirror-line"),content:r,col:0,pos:0,cm:t,trailingSpace:!1,splitSpaces:t.getOption("lineWrapping")};e.measure={};for(var i=0;i<=(e.rest?e.rest.length:0);i++){var o=i?e.rest[i-1]:e.line,l=void 0;n.pos=0,n.addToken=Ea,sa(t.display.measure)&&(l=jt(o,t.doc.direction))&&(n.addToken=Ha(n.addToken,l)),n.map=[];var a=e!=t.display.externalMeasured&&U(o);za(o,n,Zi(t,o,a)),o.styleClasses&&(o.styleClasses.bgClass&&(n.bgClass=wr(o.styleClasses.bgClass,n.bgClass||"")),o.styleClasses.textClass&&(n.textClass=wr(o.styleClasses.textClass,n.textClass||""))),n.map.length==0&&n.map.push(0,0,n.content.appendChild(aa(t.display.measure))),i==0?(e.measure.map=n.map,e.measure.cache={}):((e.measure.maps||(e.measure.maps=[])).push(n.map),(e.measure.caches||(e.measure.caches=[])).push({}))}if(W){var s=n.content.lastChild;(/\bcm-tab\b/.test(s.className)||s.querySelector&&s.querySelector(".cm-tab"))&&(n.content.className="cm-tab-wrap-hack")}return J(t,"renderLine",t,e.line,n.pre),n.pre.className&&(n.textClass=wr(n.pre.className,n.textClass||"")),n}function Da(t){var e=O("span","\u2022","cm-invalidchar");return e.title="\\u"+t.charCodeAt(0).toString(16),e.setAttribute("aria-label",e.title),e}function Ea(t,e,r,n,i,o,l){if(e){var a=t.splitSpaces?Pa(e,t.trailingSpace):e,s=t.cm.state.specialChars,u=!1,c;if(!s.test(e))t.col+=e.length,c=document.createTextNode(a),t.map.push(t.pos,t.pos+e.length,c),D&&I<9&&(u=!0),t.pos+=e.length;else{c=document.createDocumentFragment();for(var f=0;;){s.lastIndex=f;var d=s.exec(e),h=d?d.index-f:e.length-f;if(h){var p=document.createTextNode(a.slice(f,f+h));D&&I<9?c.appendChild(O("span",[p])):c.appendChild(p),t.map.push(t.pos,t.pos+h,p),t.col+=h,t.pos+=h}if(!d)break;f+=h+1;var g=void 0;if(d[0]=="	"){var m=t.cm.options.tabSize,y=m-t.col%m;g=c.appendChild(O("span",Lr(y),"cm-tab")),g.setAttribute("role","presentation"),g.setAttribute("cm-text","	"),t.col+=y}else d[0]=="\r"||d[0]==`
`?(g=c.appendChild(O("span",d[0]=="\r"?"\u240D":"\u2424","cm-invalidchar")),g.setAttribute("cm-text",d[0]),t.col+=1):(g=t.cm.options.specialCharPlaceholder(d[0]),g.setAttribute("cm-text",d[0]),D&&I<9?c.appendChild(O("span",[g])):c.appendChild(g),t.col+=1);t.map.push(t.pos,t.pos+1,g),t.pos++}}if(t.trailingSpace=a.charCodeAt(e.length-1)==32,r||n||i||u||o||l){var x=r||"";n&&(x+=n),i&&(x+=i);var b=O("span",[c],x,o);if(l)for(var C in l)l.hasOwnProperty(C)&&C!="style"&&C!="class"&&b.setAttribute(C,l[C]);return t.content.appendChild(b)}t.content.appendChild(c)}}function Pa(t,e){if(t.length>1&&!/  /.test(t))return t;for(var r=e,n="",i=0;i<t.length;i++){var o=t.charAt(i);o==" "&&r&&(i==t.length-1||t.charCodeAt(i+1)==32)&&(o="\xA0"),n+=o,r=o==" "}return n}function Ha(t,e){return function(r,n,i,o,l,a,s){i=i?i+" cm-force-border":"cm-force-border";for(var u=r.pos,c=u+n.length;;){for(var f=void 0,d=0;d<e.length&&(f=e[d],!(f.to>u&&f.from<=u));d++);if(f.to>=c)return t(r,n,i,o,l,a,s);t(r,n.slice(0,f.to-u),i,o,null,a,s),o=null,n=n.slice(f.to-u),u=f.to}}}function ho(t,e,r,n){var i=!n&&r.widgetNode;i&&t.map.push(t.pos,t.pos+e,i),!n&&t.cm.display.input.needsContentAttribute&&(i||(i=t.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",r.id)),i&&(t.cm.display.input.setUneditable(i),t.content.appendChild(i)),t.pos+=e,t.trailingSpace=!1}function za(t,e,r){var n=t.markedSpans,i=t.text,o=0;if(!n){for(var l=1;l<r.length;l+=2)e.addToken(e,i.slice(o,o=r[l]),co(r[l+1],e.cm.options));return}for(var a=i.length,s=0,u=1,c="",f,d,h=0,p,g,m,y,x;;){if(h==s){p=g=m=d="",x=null,y=null,h=1/0;for(var b=[],C=void 0,N=0;N<n.length;++N){var T=n[N],z=T.marker;if(z.type=="bookmark"&&T.from==s&&z.widgetNode)b.push(z);else if(T.from<=s&&(T.to==null||T.to>s||z.collapsed&&T.to==s&&T.from==s)){if(T.to!=null&&T.to!=s&&h>T.to&&(h=T.to,g=""),z.className&&(p+=" "+z.className),z.css&&(d=(d?d+";":"")+z.css),z.startStyle&&T.from==s&&(m+=" "+z.startStyle),z.endStyle&&T.to==h&&(C||(C=[])).push(z.endStyle,T.to),z.title&&((x||(x={})).title=z.title),z.attributes)for(var $ in z.attributes)(x||(x={}))[$]=z.attributes[$];z.collapsed&&(!y||$r(y.marker,z)<0)&&(y=T)}else T.from>s&&h>T.from&&(h=T.from)}if(C)for(var at=0;at<C.length;at+=2)C[at+1]==h&&(g+=" "+C[at]);if(!y||y.from==s)for(var _=0;_<b.length;++_)ho(e,0,b[_]);if(y&&(y.from||0)==s){if(ho(e,(y.to==null?a+1:y.to)-s,y.marker,y.from==null),y.to==null)return;y.to==s&&(y=!1)}}if(s>=a)break;for(var kt=Math.min(a,h);;){if(c){var yt=s+c.length;if(!y){var tt=yt>kt?c.slice(0,kt-s):c;e.addToken(e,tt,f?f+p:p,m,s+tt.length==h?g:"",d,x)}if(yt>=kt){c=c.slice(kt-s),s=kt;break}s=yt,m=""}c=i.slice(o,o=r[u++]),f=co(r[u++],e.cm.options)}}}function po(t,e,r){this.line=e,this.rest=Ma(e),this.size=this.rest?U(B(this.rest))-r+1:1,this.node=this.text=null,this.hidden=re(t,e)}function Zn(t,e,r){for(var n=[],i,o=e;o<r;o=i){var l=new po(t.doc,L(t.doc,o),o);i=o+l.size,n.push(l)}return n}var Ie=null;function Ia(t){Ie?Ie.ops.push(t):t.ownsGroup=Ie={ops:[t],delayedCallbacks:[]}}function Fa(t){var e=t.delayedCallbacks,r=0;do{for(;r<e.length;r++)e[r].call(null);for(var n=0;n<t.ops.length;n++){var i=t.ops[n];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(r<e.length)}function Ra(t,e){var r=t.ownsGroup;if(r)try{Fa(r)}finally{Ie=null,e(r)}}var fn=null;function it(t,e){var r=Nr(t,e);if(r.length){var n=Array.prototype.slice.call(arguments,2),i;Ie?i=Ie.delayedCallbacks:fn?i=fn:(i=fn=[],setTimeout(Ba,0));for(var o=function(a){i.push(function(){return r[a].apply(null,n)})},l=0;l<r.length;++l)o(l)}}function Ba(){var t=fn;fn=null;for(var e=0;e<t.length;++e)t[e]()}function go(t,e,r,n){for(var i=0;i<e.changes.length;i++){var o=e.changes[i];o=="text"?Va(t,e):o=="gutter"?mo(t,e,r,n):o=="class"?Xr(t,e):o=="widget"&&Ua(t,e,n)}e.changes=null}function hn(t){return t.node==t.text&&(t.node=O("div",null,null,"position: relative"),t.text.parentNode&&t.text.parentNode.replaceChild(t.node,t.text),t.node.appendChild(t.text),D&&I<8&&(t.node.style.zIndex=2)),t.node}function Ga(t,e){var r=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(r&&(r+=" CodeMirror-linebackground"),e.background)r?e.background.className=r:(e.background.parentNode.removeChild(e.background),e.background=null);else if(r){var n=hn(e);e.background=n.insertBefore(O("div",null,r),n.firstChild),t.display.input.setUneditable(e.background)}}function vo(t,e){var r=t.display.externalMeasured;return r&&r.line==e.line?(t.display.externalMeasured=null,e.measure=r.measure,r.built):fo(t,e)}function Va(t,e){var r=e.text.className,n=vo(t,e);e.text==e.node&&(e.node=n.pre),e.text.parentNode.replaceChild(n.pre,e.text),e.text=n.pre,n.bgClass!=e.bgClass||n.textClass!=e.textClass?(e.bgClass=n.bgClass,e.textClass=n.textClass,Xr(t,e)):r&&(e.text.className=r)}function Xr(t,e){Ga(t,e),e.line.wrapClass?hn(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var r=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=r||""}function mo(t,e,r,n){if(e.gutter&&(e.node.removeChild(e.gutter),e.gutter=null),e.gutterBackground&&(e.node.removeChild(e.gutterBackground),e.gutterBackground=null),e.line.gutterClass){var i=hn(e);e.gutterBackground=O("div",null,"CodeMirror-gutter-background "+e.line.gutterClass,"left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px; width: "+n.gutterTotalWidth+"px"),t.display.input.setUneditable(e.gutterBackground),i.insertBefore(e.gutterBackground,e.text)}var o=e.line.gutterMarkers;if(t.options.lineNumbers||o){var l=hn(e),a=e.gutter=O("div",null,"CodeMirror-gutter-wrapper","left: "+(t.options.fixedGutter?n.fixedPos:-n.gutterTotalWidth)+"px");if(a.setAttribute("aria-hidden","true"),t.display.input.setUneditable(a),l.insertBefore(a,e.text),e.line.gutterClass&&(a.className+=" "+e.line.gutterClass),t.options.lineNumbers&&(!o||!o["CodeMirror-linenumbers"])&&(e.lineNumber=a.appendChild(O("div",Rr(t.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+n.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+t.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<t.display.gutterSpecs.length;++s){var u=t.display.gutterSpecs[s].className,c=o.hasOwnProperty(u)&&o[u];c&&a.appendChild(O("div",[c],"CodeMirror-gutter-elt","left: "+n.gutterLeft[u]+"px; width: "+n.gutterWidth[u]+"px"))}}}function Ua(t,e,r){e.alignable&&(e.alignable=null);for(var n=Ae("CodeMirror-linewidget"),i=e.node.firstChild,o=void 0;i;i=o)o=i.nextSibling,n.test(i.className)&&e.node.removeChild(i);yo(t,e,r)}function Ka(t,e,r,n){var i=vo(t,e);return e.text=e.node=i.pre,i.bgClass&&(e.bgClass=i.bgClass),i.textClass&&(e.textClass=i.textClass),Xr(t,e),mo(t,e,r,n),yo(t,e,n),e.node}function yo(t,e,r){if(bo(t,e.line,e,r,!0),e.rest)for(var n=0;n<e.rest.length;n++)bo(t,e.rest[n],e,r,!1)}function bo(t,e,r,n,i){if(e.widgets)for(var o=hn(r),l=0,a=e.widgets;l<a.length;++l){var s=a[l],u=O("div",[s.node],"CodeMirror-linewidget"+(s.className?" "+s.className:""));s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),$a(s,u,r,n),t.display.input.setUneditable(u),i&&s.above?o.insertBefore(u,r.gutter||r.text):o.appendChild(u),it(s,"redraw")}}function $a(t,e,r,n){if(t.noHScroll){(r.alignable||(r.alignable=[])).push(e);var i=n.wrapperWidth;e.style.left=n.fixedPos+"px",t.coverGutter||(i-=n.gutterTotalWidth,e.style.paddingLeft=n.gutterTotalWidth+"px"),e.style.width=i+"px"}t.coverGutter&&(e.style.zIndex=5,e.style.position="relative",t.noHScroll||(e.style.marginLeft=-n.gutterTotalWidth+"px"))}function dn(t){if(t.height!=null)return t.height;var e=t.doc.cm;if(!e)return 0;if(!ee(document.body,t.node)){var r="position: relative;";t.coverGutter&&(r+="margin-left: -"+e.display.gutters.offsetWidth+"px;"),t.noHScroll&&(r+="width: "+e.display.wrapper.clientWidth+"px;"),Mt(e.display.measure,O("div",[t.node],null,r))}return t.height=t.node.parentNode.offsetHeight}function Xt(t,e){for(var r=Wr(e);r!=t.wrapper;r=r.parentNode)if(!r||r.nodeType==1&&r.getAttribute("cm-ignore-events")=="true"||r.parentNode==t.sizer&&r!=t.mover)return!0}function qn(t){return t.lineSpace.offsetTop}function Zr(t){return t.mover.offsetHeight-t.lineSpace.offsetHeight}function xo(t){if(t.cachedPaddingH)return t.cachedPaddingH;var e=Mt(t.measure,O("pre","x","CodeMirror-line-like")),r=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,n={left:parseInt(r.paddingLeft),right:parseInt(r.paddingRight)};return!isNaN(n.left)&&!isNaN(n.right)&&(t.cachedPaddingH=n),n}function Ut(t){return Ii-t.display.nativeBarWidth}function xe(t){return t.display.scroller.clientWidth-Ut(t)-t.display.barWidth}function qr(t){return t.display.scroller.clientHeight-Ut(t)-t.display.barHeight}function ja(t,e,r){var n=t.options.lineWrapping,i=n&&xe(t);if(!e.measure.heights||n&&e.measure.width!=i){var o=e.measure.heights=[];if(n){e.measure.width=i;for(var l=e.text.firstChild.getClientRects(),a=0;a<l.length-1;a++){var s=l[a],u=l[a+1];Math.abs(s.bottom-u.bottom)>2&&o.push((s.bottom+u.top)/2-r.top)}}o.push(r.bottom-r.top)}}function wo(t,e,r){if(t.line==e)return{map:t.measure.map,cache:t.measure.cache};if(t.rest){for(var n=0;n<t.rest.length;n++)if(t.rest[n]==e)return{map:t.measure.maps[n],cache:t.measure.caches[n]};for(var i=0;i<t.rest.length;i++)if(U(t.rest[i])>r)return{map:t.measure.maps[i],cache:t.measure.caches[i],before:!0}}}function _a(t,e){e=zt(e);var r=U(e),n=t.display.externalMeasured=new po(t.doc,e,r);n.lineN=r;var i=n.built=fo(t,n);return n.text=i.pre,Mt(t.display.lineMeasure,i.pre),n}function Co(t,e,r,n){return Kt(t,Fe(t,e),r,n)}function Jr(t,e){if(e>=t.display.viewFrom&&e<t.display.viewTo)return t.display.view[Se(t,e)];var r=t.display.externalMeasured;if(r&&e>=r.lineN&&e<r.lineN+r.size)return r}function Fe(t,e){var r=U(e),n=Jr(t,r);n&&!n.text?n=null:n&&n.changes&&(go(t,n,r,ri(t)),t.curOp.forceUpdate=!0),n||(n=_a(t,e));var i=wo(n,e,r);return{line:e,view:n,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Kt(t,e,r,n,i){e.before&&(r=-1);var o=r+(n||""),l;return e.cache.hasOwnProperty(o)?l=e.cache[o]:(e.rect||(e.rect=e.view.text.getBoundingClientRect()),e.hasHeights||(ja(t,e.view,e.rect),e.hasHeights=!0),l=Xa(t,e,r,n),l.bogus||(e.cache[o]=l)),{left:l.left,right:l.right,top:i?l.rtop:l.top,bottom:i?l.rbottom:l.bottom}}var So={left:0,right:0,top:0,bottom:0};function ko(t,e,r){for(var n,i,o,l,a,s,u=0;u<t.length;u+=3)if(a=t[u],s=t[u+1],e<a?(i=0,o=1,l="left"):e<s?(i=e-a,o=i+1):(u==t.length-3||e==s&&t[u+3]>e)&&(o=s-a,i=o-1,e>=s&&(l="right")),i!=null){if(n=t[u+2],a==s&&r==(n.insertLeft?"left":"right")&&(l=r),r=="left"&&i==0)for(;u&&t[u-2]==t[u-3]&&t[u-1].insertLeft;)n=t[(u-=3)+2],l="left";if(r=="right"&&i==s-a)for(;u<t.length-3&&t[u+3]==t[u+4]&&!t[u+5].insertLeft;)n=t[(u+=3)+2],l="right";break}return{node:n,start:i,end:o,collapse:l,coverStart:a,coverEnd:s}}function Ya(t,e){var r=So;if(e=="left")for(var n=0;n<t.length&&(r=t[n]).left==r.right;n++);else for(var i=t.length-1;i>=0&&(r=t[i]).left==r.right;i--);return r}function Xa(t,e,r,n){var i=ko(e.map,r,n),o=i.node,l=i.start,a=i.end,s=i.collapse,u;if(o.nodeType==3){for(var c=0;c<4;c++){for(;l&&Mr(e.line.text.charAt(i.coverStart+l));)--l;for(;i.coverStart+a<i.coverEnd&&Mr(e.line.text.charAt(i.coverStart+a));)++a;if(D&&I<9&&l==0&&a==i.coverEnd-i.coverStart?u=o.parentNode.getBoundingClientRect():u=Ya(pe(o,l,a).getClientRects(),n),u.left||u.right||l==0)break;a=l,l=l-1,s="right"}D&&I<11&&(u=Za(t.display.measure,u))}else{l>0&&(s=n="right");var f;t.options.lineWrapping&&(f=o.getClientRects()).length>1?u=f[n=="right"?f.length-1:0]:u=o.getBoundingClientRect()}if(D&&I<9&&!l&&(!u||!u.left&&!u.right)){var d=o.parentNode.getClientRects()[0];d?u={left:d.left,right:d.left+Be(t.display),top:d.top,bottom:d.bottom}:u=So}for(var h=u.top-e.rect.top,p=u.bottom-e.rect.top,g=(h+p)/2,m=e.view.measure.heights,y=0;y<m.length-1&&!(g<m[y]);y++);var x=y?m[y-1]:0,b=m[y],C={left:(s=="right"?u.right:u.left)-e.rect.left,right:(s=="left"?u.left:u.right)-e.rect.left,top:x,bottom:b};return!u.left&&!u.right&&(C.bogus=!0),t.options.singleCursorHeightPerLine||(C.rtop=h,C.rbottom=p),C}function Za(t,e){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!fa(t))return e;var r=screen.logicalXDPI/screen.deviceXDPI,n=screen.logicalYDPI/screen.deviceYDPI;return{left:e.left*r,right:e.right*r,top:e.top*n,bottom:e.bottom*n}}function Lo(t){if(t.measure&&(t.measure.cache={},t.measure.heights=null,t.rest))for(var e=0;e<t.rest.length;e++)t.measure.caches[e]={}}function To(t){t.display.externalMeasure=null,te(t.display.lineMeasure);for(var e=0;e<t.display.view.length;e++)Lo(t.display.view[e])}function pn(t){To(t),t.display.cachedCharWidth=t.display.cachedTextHeight=t.display.cachedPaddingH=null,t.options.lineWrapping||(t.display.maxLineChanged=!0),t.display.lineNumChars=null}function Mo(){return G&&Tt?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function No(){return G&&Tt?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Qr(t){var e=zt(t),r=e.widgets,n=0;if(r)for(var i=0;i<r.length;++i)r[i].above&&(n+=dn(r[i]));return n}function Jn(t,e,r,n,i){if(!i){var o=Qr(e);r.top+=o,r.bottom+=o}if(n=="line")return r;n||(n="local");var l=Yt(e);if(n=="local"?l+=qn(t.display):l-=t.display.viewOffset,n=="page"||n=="window"){var a=t.display.lineSpace.getBoundingClientRect();l+=a.top+(n=="window"?0:No());var s=a.left+(n=="window"?0:Mo());r.left+=s,r.right+=s}return r.top+=l,r.bottom+=l,r}function Oo(t,e,r){if(r=="div")return e;var n=e.left,i=e.top;if(r=="page")n-=Mo(),i-=No();else if(r=="local"||!r){var o=t.display.sizer.getBoundingClientRect();n+=o.left,i+=o.top}var l=t.display.lineSpace.getBoundingClientRect();return{left:n-l.left,top:i-l.top}}function Qn(t,e,r,n,i){return n||(n=L(t.doc,e.line)),Jn(t,n,Co(t,n,e.ch,i),r)}function It(t,e,r,n,i,o){n=n||L(t.doc,e.line),i||(i=Fe(t,n));function l(p,g){var m=Kt(t,i,p,g?"right":"left",o);return g?m.left=m.right:m.right=m.left,Jn(t,n,m,r)}var a=jt(n,t.doc.direction),s=e.ch,u=e.sticky;if(s>=n.text.length?(s=n.text.length,u="before"):s<=0&&(s=0,u="after"),!a)return l(u=="before"?s-1:s,u=="before");function c(p,g,m){var y=a[g],x=y.level==1;return l(m?p-1:p,x!=m)}var f=ln(a,s,u),d=on,h=c(s,f,u=="before");return d!=null&&(h.other=c(s,d,u!="before")),h}function Wo(t,e){var r=0;e=H(t.doc,e),t.options.lineWrapping||(r=Be(t.display)*e.ch);var n=L(t.doc,e.line),i=Yt(n)+qn(t.display);return{left:r,right:r,top:i,bottom:i+n.height}}function ti(t,e,r,n,i){var o=v(t,e,r);return o.xRel=i,n&&(o.outside=n),o}function ei(t,e,r){var n=t.doc;if(r+=t.display.viewOffset,r<0)return ti(n.first,0,null,-1,-1);var i=be(n,r),o=n.first+n.size-1;if(i>o)return ti(n.first+n.size-1,L(n,o).text.length,null,1,1);e<0&&(e=0);for(var l=L(n,i);;){var a=qa(t,l,i,e,r),s=La(l,a.ch+(a.xRel>0||a.outside>0?1:0));if(!s)return a;var u=s.find(1);if(u.line==i)return u;l=L(n,i=u.line)}}function Ao(t,e,r,n){n-=Qr(e);var i=e.text.length,o=rn(function(l){return Kt(t,r,l-1).bottom<=n},i,0);return i=rn(function(l){return Kt(t,r,l).top>n},o,i),{begin:o,end:i}}function Do(t,e,r,n){r||(r=Fe(t,e));var i=Jn(t,e,Kt(t,r,n),"line").top;return Ao(t,e,r,i)}function ni(t,e,r,n){return t.bottom<=r?!1:t.top>r?!0:(n?t.left:t.right)>e}function qa(t,e,r,n,i){i-=Yt(e);var o=Fe(t,e),l=Qr(e),a=0,s=e.text.length,u=!0,c=jt(e,t.doc.direction);if(c){var f=(t.options.lineWrapping?Qa:Ja)(t,e,r,o,c,n,i);u=f.level!=1,a=u?f.from:f.to-1,s=u?f.to:f.from-1}var d=null,h=null,p=rn(function(N){var T=Kt(t,o,N);return T.top+=l,T.bottom+=l,ni(T,n,i,!1)?(T.top<=i&&T.left<=n&&(d=N,h=T),!0):!1},a,s),g,m,y=!1;if(h){var x=n-h.left<h.right-n,b=x==u;p=d+(b?0:1),m=b?"after":"before",g=x?h.left:h.right}else{!u&&(p==s||p==a)&&p++,m=p==0?"after":p==e.text.length?"before":Kt(t,o,p-(u?1:0)).bottom+l<=i==u?"after":"before";var C=It(t,v(r,p,m),"line",e,o);g=C.left,y=i<C.top?-1:i>=C.bottom?1:0}return p=Gi(e.text,p,1),ti(r,p,m,y,n-g)}function Ja(t,e,r,n,i,o,l){var a=rn(function(f){var d=i[f],h=d.level!=1;return ni(It(t,v(r,h?d.to:d.from,h?"before":"after"),"line",e,n),o,l,!0)},0,i.length-1),s=i[a];if(a>0){var u=s.level!=1,c=It(t,v(r,u?s.from:s.to,u?"after":"before"),"line",e,n);ni(c,o,l,!0)&&c.top>l&&(s=i[a-1])}return s}function Qa(t,e,r,n,i,o,l){var a=Ao(t,e,n,l),s=a.begin,u=a.end;/\s/.test(e.text.charAt(u-1))&&u--;for(var c=null,f=null,d=0;d<i.length;d++){var h=i[d];if(!(h.from>=u||h.to<=s)){var p=h.level!=1,g=Kt(t,n,p?Math.min(u,h.to)-1:Math.max(s,h.from)).right,m=g<o?o-g+1e9:g-o;(!c||f>m)&&(c=h,f=m)}}return c||(c=i[i.length-1]),c.from<s&&(c={from:s,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}var we;function Re(t){if(t.cachedTextHeight!=null)return t.cachedTextHeight;if(we==null){we=O("pre",null,"CodeMirror-line-like");for(var e=0;e<49;++e)we.appendChild(document.createTextNode("x")),we.appendChild(O("br"));we.appendChild(document.createTextNode("x"))}Mt(t.measure,we);var r=we.offsetHeight/50;return r>3&&(t.cachedTextHeight=r),te(t.measure),r||1}function Be(t){if(t.cachedCharWidth!=null)return t.cachedCharWidth;var e=O("span","xxxxxxxxxx"),r=O("pre",[e],"CodeMirror-line-like");Mt(t.measure,r);var n=e.getBoundingClientRect(),i=(n.right-n.left)/10;return i>2&&(t.cachedCharWidth=i),i||10}function ri(t){for(var e=t.display,r={},n={},i=e.gutters.clientLeft,o=e.gutters.firstChild,l=0;o;o=o.nextSibling,++l){var a=t.display.gutterSpecs[l].className;r[a]=o.offsetLeft+o.clientLeft+i,n[a]=o.clientWidth}return{fixedPos:ii(e),gutterTotalWidth:e.gutters.offsetWidth,gutterLeft:r,gutterWidth:n,wrapperWidth:e.wrapper.clientWidth}}function ii(t){return t.scroller.getBoundingClientRect().left-t.sizer.getBoundingClientRect().left}function Eo(t){var e=Re(t.display),r=t.options.lineWrapping,n=r&&Math.max(5,t.display.scroller.clientWidth/Be(t.display)-3);return function(i){if(re(t.doc,i))return 0;var o=0;if(i.widgets)for(var l=0;l<i.widgets.length;l++)i.widgets[l].height&&(o+=i.widgets[l].height);return r?o+(Math.ceil(i.text.length/n)||1)*e:o+e}}function oi(t){var e=t.doc,r=Eo(t);e.iter(function(n){var i=r(n);i!=n.height&&Gt(n,i)})}function Ce(t,e,r,n){var i=t.display;if(!r&&Wr(e).getAttribute("cm-not-content")=="true")return null;var o,l,a=i.lineSpace.getBoundingClientRect();try{o=e.clientX-a.left,l=e.clientY-a.top}catch{return null}var s=ei(t,o,l),u;if(n&&s.xRel>0&&(u=L(t.doc,s.line).text).length==s.ch){var c=Pt(u,u.length,t.options.tabSize)-u.length;s=v(s.line,Math.max(0,Math.round((o-xo(t.display).left)/Be(t.display))-c))}return s}function Se(t,e){if(e>=t.display.viewTo||(e-=t.display.viewFrom,e<0))return null;for(var r=t.display.view,n=0;n<r.length;n++)if(e-=r[n].size,e<0)return n}function vt(t,e,r,n){e==null&&(e=t.doc.first),r==null&&(r=t.doc.first+t.doc.size),n||(n=0);var i=t.display;if(n&&r<i.viewTo&&(i.updateLineNumbers==null||i.updateLineNumbers>e)&&(i.updateLineNumbers=e),t.curOp.viewChanged=!0,e>=i.viewTo)_t&&jr(t.doc,e)<i.viewTo&&oe(t);else if(r<=i.viewFrom)_t&&uo(t.doc,r+n)>i.viewFrom?oe(t):(i.viewFrom+=n,i.viewTo+=n);else if(e<=i.viewFrom&&r>=i.viewTo)oe(t);else if(e<=i.viewFrom){var o=tr(t,r,r+n,1);o?(i.view=i.view.slice(o.index),i.viewFrom=o.lineN,i.viewTo+=n):oe(t)}else if(r>=i.viewTo){var l=tr(t,e,e,-1);l?(i.view=i.view.slice(0,l.index),i.viewTo=l.lineN):oe(t)}else{var a=tr(t,e,e,-1),s=tr(t,r,r+n,1);a&&s?(i.view=i.view.slice(0,a.index).concat(Zn(t,a.lineN,s.lineN)).concat(i.view.slice(s.index)),i.viewTo+=n):oe(t)}var u=i.externalMeasured;u&&(r<u.lineN?u.lineN+=n:e<u.lineN+u.size&&(i.externalMeasured=null))}function ie(t,e,r){t.curOp.viewChanged=!0;var n=t.display,i=t.display.externalMeasured;if(i&&e>=i.lineN&&e<i.lineN+i.size&&(n.externalMeasured=null),!(e<n.viewFrom||e>=n.viewTo)){var o=n.view[Se(t,e)];if(o.node!=null){var l=o.changes||(o.changes=[]);ct(l,r)==-1&&l.push(r)}}}function oe(t){t.display.viewFrom=t.display.viewTo=t.doc.first,t.display.view=[],t.display.viewOffset=0}function tr(t,e,r,n){var i=Se(t,e),o,l=t.display.view;if(!_t||r==t.doc.first+t.doc.size)return{index:i,lineN:r};for(var a=t.display.viewFrom,s=0;s<i;s++)a+=l[s].size;if(a!=e){if(n>0){if(i==l.length-1)return null;o=a+l[i].size-e,i++}else o=a-e;e+=o,r+=o}for(;jr(t.doc,r)!=r;){if(i==(n<0?0:l.length-1))return null;r+=n*l[i-(n<0?1:0)].size,i+=n}return{index:i,lineN:r}}function ts(t,e,r){var n=t.display,i=n.view;i.length==0||e>=n.viewTo||r<=n.viewFrom?(n.view=Zn(t,e,r),n.viewFrom=e):(n.viewFrom>e?n.view=Zn(t,e,n.viewFrom).concat(n.view):n.viewFrom<e&&(n.view=n.view.slice(Se(t,e))),n.viewFrom=e,n.viewTo<r?n.view=n.view.concat(Zn(t,n.viewTo,r)):n.viewTo>r&&(n.view=n.view.slice(0,Se(t,r)))),n.viewTo=r}function Po(t){for(var e=t.display.view,r=0,n=0;n<e.length;n++){var i=e[n];!i.hidden&&(!i.node||i.changes)&&++r}return r}function gn(t){t.display.input.showSelection(t.display.input.prepareSelection())}function Ho(t,e){e===void 0&&(e=!0);var r=t.doc,n={},i=n.cursors=document.createDocumentFragment(),o=n.selection=document.createDocumentFragment(),l=t.options.$customCursor;l&&(e=!0);for(var a=0;a<r.sel.ranges.length;a++)if(!(!e&&a==r.sel.primIndex)){var s=r.sel.ranges[a];if(!(s.from().line>=t.display.viewTo||s.to().line<t.display.viewFrom)){var u=s.empty();if(l){var c=l(t,s);c&&li(t,c,i)}else(u||t.options.showCursorWhenSelecting)&&li(t,s.head,i);u||es(t,s,o)}}return n}function li(t,e,r){var n=It(t,e,"div",null,null,!t.options.singleCursorHeightPerLine),i=r.appendChild(O("div","\xA0","CodeMirror-cursor"));if(i.style.left=n.left+"px",i.style.top=n.top+"px",i.style.height=Math.max(0,n.bottom-n.top)*t.options.cursorHeight+"px",/\bcm-fat-cursor\b/.test(t.getWrapperElement().className)){var o=Qn(t,e,"div",null,null),l=o.right-o.left;i.style.width=(l>0?l:t.defaultCharWidth())+"px"}if(n.other){var a=r.appendChild(O("div","\xA0","CodeMirror-cursor CodeMirror-secondarycursor"));a.style.display="",a.style.left=n.other.left+"px",a.style.top=n.other.top+"px",a.style.height=(n.other.bottom-n.other.top)*.85+"px"}}function er(t,e){return t.top-e.top||t.left-e.left}function es(t,e,r){var n=t.display,i=t.doc,o=document.createDocumentFragment(),l=xo(t.display),a=l.left,s=Math.max(n.sizerWidth,xe(t)-n.sizer.offsetLeft)-l.right,u=i.direction=="ltr";function c(b,C,N,T){C<0&&(C=0),C=Math.round(C),T=Math.round(T),o.appendChild(O("div",null,"CodeMirror-selected","position: absolute; left: "+b+`px;
                             top: `+C+"px; width: "+(N??s-b)+`px;
                             height: `+(T-C)+"px"))}function f(b,C,N){var T=L(i,b),z=T.text.length,$,at;function _(tt,bt){return Qn(t,v(b,tt),"div",T,bt)}function kt(tt,bt,ut){var nt=Do(t,T,null,tt),et=bt=="ltr"==(ut=="after")?"left":"right",X=ut=="after"?nt.begin:nt.end-(/\s/.test(T.text.charAt(nt.end-1))?2:1);return _(X,et)[et]}var yt=jt(T,i.direction);return ia(yt,C||0,N??z,function(tt,bt,ut,nt){var et=ut=="ltr",X=_(tt,et?"left":"right"),xt=_(bt-1,et?"right":"left"),Qe=C==null&&tt==0,fe=N==null&&bt==z,ht=nt==0,$t=!yt||nt==yt.length-1;if(xt.top-X.top<=3){var st=(u?Qe:fe)&&ht,Di=(u?fe:Qe)&&$t,Jt=st?a:(et?X:xt).left,Ne=Di?s:(et?xt:X).right;c(Jt,X.top,Ne-Jt,X.bottom)}else{var Oe,pt,tn,Ei;et?(Oe=u&&Qe&&ht?a:X.left,pt=u?s:kt(tt,ut,"before"),tn=u?a:kt(bt,ut,"after"),Ei=u&&fe&&$t?s:xt.right):(Oe=u?kt(tt,ut,"before"):a,pt=!u&&Qe&&ht?s:X.right,tn=!u&&fe&&$t?a:xt.left,Ei=u?kt(bt,ut,"after"):s),c(Oe,X.top,pt-Oe,X.bottom),X.bottom<xt.top&&c(a,X.bottom,null,xt.top),c(tn,xt.top,Ei-tn,xt.bottom)}(!$||er(X,$)<0)&&($=X),er(xt,$)<0&&($=xt),(!at||er(X,at)<0)&&(at=X),er(xt,at)<0&&(at=xt)}),{start:$,end:at}}var d=e.from(),h=e.to();if(d.line==h.line)f(d.line,d.ch,h.ch);else{var p=L(i,d.line),g=L(i,h.line),m=zt(p)==zt(g),y=f(d.line,d.ch,m?p.text.length+1:null).end,x=f(h.line,m?0:null,h.ch).start;m&&(y.top<x.top-2?(c(y.right,y.top,null,y.bottom),c(a,x.top,x.left,x.bottom)):c(y.right,y.top,x.left-y.right,y.bottom)),y.bottom<x.top&&c(a,y.bottom,null,x.top)}r.appendChild(o)}function ai(t){if(t.state.focused){var e=t.display;clearInterval(e.blinker);var r=!0;e.cursorDiv.style.visibility="",t.options.cursorBlinkRate>0?e.blinker=setInterval(function(){t.hasFocus()||Ge(t),e.cursorDiv.style.visibility=(r=!r)?"":"hidden"},t.options.cursorBlinkRate):t.options.cursorBlinkRate<0&&(e.cursorDiv.style.visibility="hidden")}}function zo(t){t.hasFocus()||(t.display.input.focus(),t.state.focused||ui(t))}function si(t){t.state.delayingBlurEvent=!0,setTimeout(function(){t.state.delayingBlurEvent&&(t.state.delayingBlurEvent=!1,t.state.focused&&Ge(t))},100)}function ui(t,e){t.state.delayingBlurEvent&&!t.state.draggingText&&(t.state.delayingBlurEvent=!1),t.options.readOnly!="nocursor"&&(t.state.focused||(J(t,"focus",t,e),t.state.focused=!0,ge(t.display.wrapper,"CodeMirror-focused"),!t.curOp&&t.display.selForContextMenu!=t.doc.sel&&(t.display.input.reset(),W&&setTimeout(function(){return t.display.input.reset(!0)},20)),t.display.input.receivedFocus()),ai(t))}function Ge(t,e){t.state.delayingBlurEvent||(t.state.focused&&(J(t,"blur",t,e),t.state.focused=!1,de(t.display.wrapper,"CodeMirror-focused")),clearInterval(t.display.blinker),setTimeout(function(){t.state.focused||(t.display.shift=!1)},150))}function nr(t){for(var e=t.display,r=e.lineDiv.offsetTop,n=Math.max(0,e.scroller.getBoundingClientRect().top),i=e.lineDiv.getBoundingClientRect().top,o=0,l=0;l<e.view.length;l++){var a=e.view[l],s=t.options.lineWrapping,u=void 0,c=0;if(!a.hidden){if(i+=a.line.height,D&&I<8){var f=a.node.offsetTop+a.node.offsetHeight;u=f-r,r=f}else{var d=a.node.getBoundingClientRect();u=d.bottom-d.top,!s&&a.text.firstChild&&(c=a.text.firstChild.getBoundingClientRect().right-d.left-1)}var h=a.line.height-u;if((h>.005||h<-.005)&&(i<n&&(o-=h),Gt(a.line,u),Io(a.line),a.rest))for(var p=0;p<a.rest.length;p++)Io(a.rest[p]);if(c>t.display.sizerWidth){var g=Math.ceil(c/Be(t.display));g>t.display.maxLineLength&&(t.display.maxLineLength=g,t.display.maxLine=a.line,t.display.maxLineChanged=!0)}}}Math.abs(o)>2&&(e.scroller.scrollTop+=o)}function Io(t){if(t.widgets)for(var e=0;e<t.widgets.length;++e){var r=t.widgets[e],n=r.node.parentNode;n&&(r.height=n.offsetHeight)}}function rr(t,e,r){var n=r&&r.top!=null?Math.max(0,r.top):t.scroller.scrollTop;n=Math.floor(n-qn(t));var i=r&&r.bottom!=null?r.bottom:n+t.wrapper.clientHeight,o=be(e,n),l=be(e,i);if(r&&r.ensure){var a=r.ensure.from.line,s=r.ensure.to.line;a<o?(o=a,l=be(e,Yt(L(e,a))+t.wrapper.clientHeight)):Math.min(s,e.lastLine())>=l&&(o=be(e,Yt(L(e,s))-t.wrapper.clientHeight),l=s)}return{from:o,to:Math.max(l,o+1)}}function ns(t,e){if(!rt(t,"scrollCursorIntoView")){var r=t.display,n=r.sizer.getBoundingClientRect(),i=null;if(e.top+n.top<0?i=!0:e.bottom+n.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1),i!=null&&!M){var o=O("div","\u200B",null,`position: absolute;
                         top: `+(e.top-r.viewOffset-qn(t.display))+`px;
                         height: `+(e.bottom-e.top+Ut(t)+r.barHeight)+`px;
                         left: `+e.left+"px; width: "+Math.max(2,e.right-e.left)+"px;");t.display.lineSpace.appendChild(o),o.scrollIntoView(i),t.display.lineSpace.removeChild(o)}}}function rs(t,e,r,n){n==null&&(n=0);var i;!t.options.lineWrapping&&e==r&&(r=e.sticky=="before"?v(e.line,e.ch+1,"before"):e,e=e.ch?v(e.line,e.sticky=="before"?e.ch-1:e.ch,"after"):e);for(var o=0;o<5;o++){var l=!1,a=It(t,e),s=!r||r==e?a:It(t,r);i={left:Math.min(a.left,s.left),top:Math.min(a.top,s.top)-n,right:Math.max(a.left,s.left),bottom:Math.max(a.bottom,s.bottom)+n};var u=ci(t,i),c=t.doc.scrollTop,f=t.doc.scrollLeft;if(u.scrollTop!=null&&(mn(t,u.scrollTop),Math.abs(t.doc.scrollTop-c)>1&&(l=!0)),u.scrollLeft!=null&&(ke(t,u.scrollLeft),Math.abs(t.doc.scrollLeft-f)>1&&(l=!0)),!l)break}return i}function is(t,e){var r=ci(t,e);r.scrollTop!=null&&mn(t,r.scrollTop),r.scrollLeft!=null&&ke(t,r.scrollLeft)}function ci(t,e){var r=t.display,n=Re(t.display);e.top<0&&(e.top=0);var i=t.curOp&&t.curOp.scrollTop!=null?t.curOp.scrollTop:r.scroller.scrollTop,o=qr(t),l={};e.bottom-e.top>o&&(e.bottom=e.top+o);var a=t.doc.height+Zr(r),s=e.top<n,u=e.bottom>a-n;if(e.top<i)l.scrollTop=s?0:e.top;else if(e.bottom>i+o){var c=Math.min(e.top,(u?a:e.bottom)-o);c!=i&&(l.scrollTop=c)}var f=t.options.fixedGutter?0:r.gutters.offsetWidth,d=t.curOp&&t.curOp.scrollLeft!=null?t.curOp.scrollLeft:r.scroller.scrollLeft-f,h=xe(t)-r.gutters.offsetWidth,p=e.right-e.left>h;return p&&(e.right=e.left+h),e.left<10?l.scrollLeft=0:e.left<d?l.scrollLeft=Math.max(0,e.left+f-(p?0:10)):e.right>h+d-3&&(l.scrollLeft=e.right+(p?0:10)-h),l}function fi(t,e){e!=null&&(ir(t),t.curOp.scrollTop=(t.curOp.scrollTop==null?t.doc.scrollTop:t.curOp.scrollTop)+e)}function Ve(t){ir(t);var e=t.getCursor();t.curOp.scrollToPos={from:e,to:e,margin:t.options.cursorScrollMargin}}function vn(t,e,r){(e!=null||r!=null)&&ir(t),e!=null&&(t.curOp.scrollLeft=e),r!=null&&(t.curOp.scrollTop=r)}function os(t,e){ir(t),t.curOp.scrollToPos=e}function ir(t){var e=t.curOp.scrollToPos;if(e){t.curOp.scrollToPos=null;var r=Wo(t,e.from),n=Wo(t,e.to);Fo(t,r,n,e.margin)}}function Fo(t,e,r,n){var i=ci(t,{left:Math.min(e.left,r.left),top:Math.min(e.top,r.top)-n,right:Math.max(e.right,r.right),bottom:Math.max(e.bottom,r.bottom)+n});vn(t,i.scrollLeft,i.scrollTop)}function mn(t,e){Math.abs(t.doc.scrollTop-e)<2||(q||di(t,{top:e}),Ro(t,e,!0),q&&di(t),xn(t,100))}function Ro(t,e,r){e=Math.max(0,Math.min(t.display.scroller.scrollHeight-t.display.scroller.clientHeight,e)),!(t.display.scroller.scrollTop==e&&!r)&&(t.doc.scrollTop=e,t.display.scrollbars.setScrollTop(e),t.display.scroller.scrollTop!=e&&(t.display.scroller.scrollTop=e))}function ke(t,e,r,n){e=Math.max(0,Math.min(e,t.display.scroller.scrollWidth-t.display.scroller.clientWidth)),!((r?e==t.doc.scrollLeft:Math.abs(t.doc.scrollLeft-e)<2)&&!n)&&(t.doc.scrollLeft=e,Ko(t),t.display.scroller.scrollLeft!=e&&(t.display.scroller.scrollLeft=e),t.display.scrollbars.setScrollLeft(e))}function yn(t){var e=t.display,r=e.gutters.offsetWidth,n=Math.round(t.doc.height+Zr(t.display));return{clientHeight:e.scroller.clientHeight,viewHeight:e.wrapper.clientHeight,scrollWidth:e.scroller.scrollWidth,clientWidth:e.scroller.clientWidth,viewWidth:e.wrapper.clientWidth,barLeft:t.options.fixedGutter?r:0,docHeight:n,scrollHeight:n+Ut(t)+e.barHeight,nativeBarWidth:e.nativeBarWidth,gutterWidth:r}}var Le=function(t,e,r){this.cm=r;var n=this.vert=O("div",[O("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),i=this.horiz=O("div",[O("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");n.tabIndex=i.tabIndex=-1,t(n),t(i),A(n,"scroll",function(){n.clientHeight&&e(n.scrollTop,"vertical")}),A(i,"scroll",function(){i.clientWidth&&e(i.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,D&&I<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Le.prototype.update=function(t){var e=t.scrollWidth>t.clientWidth+1,r=t.scrollHeight>t.clientHeight+1,n=t.nativeBarWidth;if(r){this.vert.style.display="block",this.vert.style.bottom=e?n+"px":"0";var i=t.viewHeight-(e?n:0);this.vert.firstChild.style.height=Math.max(0,t.scrollHeight-t.clientHeight+i)+"px"}else this.vert.scrollTop=0,this.vert.style.display="",this.vert.firstChild.style.height="0";if(e){this.horiz.style.display="block",this.horiz.style.right=r?n+"px":"0",this.horiz.style.left=t.barLeft+"px";var o=t.viewWidth-t.barLeft-(r?n:0);this.horiz.firstChild.style.width=Math.max(0,t.scrollWidth-t.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&t.clientHeight>0&&(n==0&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:r?n:0,bottom:e?n:0}},Le.prototype.setScrollLeft=function(t){this.horiz.scrollLeft!=t&&(this.horiz.scrollLeft=t),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Le.prototype.setScrollTop=function(t){this.vert.scrollTop!=t&&(this.vert.scrollTop=t),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Le.prototype.zeroWidthHack=function(){var t=Dt&&!S?"12px":"18px";this.horiz.style.height=this.vert.style.width=t,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new ne,this.disableVert=new ne},Le.prototype.enableZeroWidthBar=function(t,e,r){t.style.pointerEvents="auto";function n(){var i=t.getBoundingClientRect(),o=r=="vert"?document.elementFromPoint(i.right-1,(i.top+i.bottom)/2):document.elementFromPoint((i.right+i.left)/2,i.bottom-1);o!=t?t.style.pointerEvents="none":e.set(1e3,n)}e.set(1e3,n)},Le.prototype.clear=function(){var t=this.horiz.parentNode;t.removeChild(this.horiz),t.removeChild(this.vert)};var bn=function(){};bn.prototype.update=function(){return{bottom:0,right:0}},bn.prototype.setScrollLeft=function(){},bn.prototype.setScrollTop=function(){},bn.prototype.clear=function(){};function Ue(t,e){e||(e=yn(t));var r=t.display.barWidth,n=t.display.barHeight;Bo(t,e);for(var i=0;i<4&&r!=t.display.barWidth||n!=t.display.barHeight;i++)r!=t.display.barWidth&&t.options.lineWrapping&&nr(t),Bo(t,yn(t)),r=t.display.barWidth,n=t.display.barHeight}function Bo(t,e){var r=t.display,n=r.scrollbars.update(e);r.sizer.style.paddingRight=(r.barWidth=n.right)+"px",r.sizer.style.paddingBottom=(r.barHeight=n.bottom)+"px",r.heightForcer.style.borderBottom=n.bottom+"px solid transparent",n.right&&n.bottom?(r.scrollbarFiller.style.display="block",r.scrollbarFiller.style.height=n.bottom+"px",r.scrollbarFiller.style.width=n.right+"px"):r.scrollbarFiller.style.display="",n.bottom&&t.options.coverGutterNextToScrollbar&&t.options.fixedGutter?(r.gutterFiller.style.display="block",r.gutterFiller.style.height=n.bottom+"px",r.gutterFiller.style.width=e.gutterWidth+"px"):r.gutterFiller.style.display=""}var Go={native:Le,null:bn};function Vo(t){t.display.scrollbars&&(t.display.scrollbars.clear(),t.display.scrollbars.addClass&&de(t.display.wrapper,t.display.scrollbars.addClass)),t.display.scrollbars=new Go[t.options.scrollbarStyle](function(e){t.display.wrapper.insertBefore(e,t.display.scrollbarFiller),A(e,"mousedown",function(){t.state.focused&&setTimeout(function(){return t.display.input.focus()},0)}),e.setAttribute("cm-not-content","true")},function(e,r){r=="horizontal"?ke(t,e):mn(t,e)},t),t.display.scrollbars.addClass&&ge(t.display.wrapper,t.display.scrollbars.addClass)}var ls=0;function Te(t){t.curOp={cm:t,viewChanged:!1,startHeight:t.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ls,markArrays:null},Ia(t.curOp)}function Me(t){var e=t.curOp;e&&Ra(e,function(r){for(var n=0;n<r.ops.length;n++)r.ops[n].cm.curOp=null;as(r)})}function as(t){for(var e=t.ops,r=0;r<e.length;r++)ss(e[r]);for(var n=0;n<e.length;n++)us(e[n]);for(var i=0;i<e.length;i++)cs(e[i]);for(var o=0;o<e.length;o++)fs(e[o]);for(var l=0;l<e.length;l++)hs(e[l])}function ss(t){var e=t.cm,r=e.display;ps(e),t.updateMaxLine&&Yr(e),t.mustUpdate=t.viewChanged||t.forceUpdate||t.scrollTop!=null||t.scrollToPos&&(t.scrollToPos.from.line<r.viewFrom||t.scrollToPos.to.line>=r.viewTo)||r.maxLineChanged&&e.options.lineWrapping,t.update=t.mustUpdate&&new or(e,t.mustUpdate&&{top:t.scrollTop,ensure:t.scrollToPos},t.forceUpdate)}function us(t){t.updatedDisplay=t.mustUpdate&&hi(t.cm,t.update)}function cs(t){var e=t.cm,r=e.display;t.updatedDisplay&&nr(e),t.barMeasure=yn(e),r.maxLineChanged&&!e.options.lineWrapping&&(t.adjustWidthTo=Co(e,r.maxLine,r.maxLine.text.length).left+3,e.display.sizerWidth=t.adjustWidthTo,t.barMeasure.scrollWidth=Math.max(r.scroller.clientWidth,r.sizer.offsetLeft+t.adjustWidthTo+Ut(e)+e.display.barWidth),t.maxScrollLeft=Math.max(0,r.sizer.offsetLeft+t.adjustWidthTo-xe(e))),(t.updatedDisplay||t.selectionChanged)&&(t.preparedSelection=r.input.prepareSelection())}function fs(t){var e=t.cm;t.adjustWidthTo!=null&&(e.display.sizer.style.minWidth=t.adjustWidthTo+"px",t.maxScrollLeft<e.doc.scrollLeft&&ke(e,Math.min(e.display.scroller.scrollLeft,t.maxScrollLeft),!0),e.display.maxLineChanged=!1);var r=t.focus&&t.focus==Et();t.preparedSelection&&e.display.input.showSelection(t.preparedSelection,r),(t.updatedDisplay||t.startHeight!=e.doc.height)&&Ue(e,t.barMeasure),t.updatedDisplay&&gi(e,t.barMeasure),t.selectionChanged&&ai(e),e.state.focused&&t.updateInput&&e.display.input.reset(t.typing),r&&zo(t.cm)}function hs(t){var e=t.cm,r=e.display,n=e.doc;if(t.updatedDisplay&&Uo(e,t.update),r.wheelStartX!=null&&(t.scrollTop!=null||t.scrollLeft!=null||t.scrollToPos)&&(r.wheelStartX=r.wheelStartY=null),t.scrollTop!=null&&Ro(e,t.scrollTop,t.forceScroll),t.scrollLeft!=null&&ke(e,t.scrollLeft,!0,!0),t.scrollToPos){var i=rs(e,H(n,t.scrollToPos.from),H(n,t.scrollToPos.to),t.scrollToPos.margin);ns(e,i)}var o=t.maybeHiddenMarkers,l=t.maybeUnhiddenMarkers;if(o)for(var a=0;a<o.length;++a)o[a].lines.length||J(o[a],"hide");if(l)for(var s=0;s<l.length;++s)l[s].lines.length&&J(l[s],"unhide");r.wrapper.offsetHeight&&(n.scrollTop=e.display.scroller.scrollTop),t.changeObjs&&J(e,"changes",e,t.changeObjs),t.update&&t.update.finish()}function St(t,e){if(t.curOp)return e();Te(t);try{return e()}finally{Me(t)}}function ot(t,e){return function(){if(t.curOp)return e.apply(t,arguments);Te(t);try{return e.apply(t,arguments)}finally{Me(t)}}}function dt(t){return function(){if(this.curOp)return t.apply(this,arguments);Te(this);try{return t.apply(this,arguments)}finally{Me(this)}}}function lt(t){return function(){var e=this.cm;if(!e||e.curOp)return t.apply(this,arguments);Te(e);try{return t.apply(this,arguments)}finally{Me(e)}}}function xn(t,e){t.doc.highlightFrontier<t.display.viewTo&&t.state.highlight.set(e,Cr(ds,t))}function ds(t){var e=t.doc;if(!(e.highlightFrontier>=t.display.viewTo)){var r=+new Date+t.options.workTime,n=un(t,e.highlightFrontier),i=[];e.iter(n.line,Math.min(e.first+e.size,t.display.viewTo+500),function(o){if(n.line>=t.display.viewFrom){var l=o.styles,a=o.text.length>t.options.maxHighlightLength?me(e.mode,n.state):null,s=Xi(t,o,n,!0);a&&(n.state=a),o.styles=s.styles;var u=o.styleClasses,c=s.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var f=!l||l.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),d=0;!f&&d<l.length;++d)f=l[d]!=o.styles[d];f&&i.push(n.line),o.stateAfter=n.save(),n.nextLine()}else o.text.length<=t.options.maxHighlightLength&&Vr(t,o.text,n),o.stateAfter=n.line%5==0?n.save():null,n.nextLine();if(+new Date>r)return xn(t,t.options.workDelay),!0}),e.highlightFrontier=n.line,e.modeFrontier=Math.max(e.modeFrontier,n.line),i.length&&St(t,function(){for(var o=0;o<i.length;o++)ie(t,i[o],"text")})}}var or=function(t,e,r){var n=t.display;this.viewport=e,this.visible=rr(n,t.doc,e),this.editorIsHidden=!n.wrapper.offsetWidth,this.wrapperHeight=n.wrapper.clientHeight,this.wrapperWidth=n.wrapper.clientWidth,this.oldDisplayWidth=xe(t),this.force=r,this.dims=ri(t),this.events=[]};or.prototype.signal=function(t,e){Ht(t,e)&&this.events.push(arguments)},or.prototype.finish=function(){for(var t=0;t<this.events.length;t++)J.apply(null,this.events[t])};function ps(t){var e=t.display;!e.scrollbarsClipped&&e.scroller.offsetWidth&&(e.nativeBarWidth=e.scroller.offsetWidth-e.scroller.clientWidth,e.heightForcer.style.height=Ut(t)+"px",e.sizer.style.marginBottom=-e.nativeBarWidth+"px",e.sizer.style.borderRightWidth=Ut(t)+"px",e.scrollbarsClipped=!0)}function gs(t){if(t.hasFocus())return null;var e=Et();if(!e||!ee(t.display.lineDiv,e))return null;var r={activeElt:e};if(window.getSelection){var n=window.getSelection();n.anchorNode&&n.extend&&ee(t.display.lineDiv,n.anchorNode)&&(r.anchorNode=n.anchorNode,r.anchorOffset=n.anchorOffset,r.focusNode=n.focusNode,r.focusOffset=n.focusOffset)}return r}function vs(t){if(!(!t||!t.activeElt||t.activeElt==Et())&&(t.activeElt.focus(),!/^(INPUT|TEXTAREA)$/.test(t.activeElt.nodeName)&&t.anchorNode&&ee(document.body,t.anchorNode)&&ee(document.body,t.focusNode))){var e=window.getSelection(),r=document.createRange();r.setEnd(t.anchorNode,t.anchorOffset),r.collapse(!1),e.removeAllRanges(),e.addRange(r),e.extend(t.focusNode,t.focusOffset)}}function hi(t,e){var r=t.display,n=t.doc;if(e.editorIsHidden)return oe(t),!1;if(!e.force&&e.visible.from>=r.viewFrom&&e.visible.to<=r.viewTo&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&Po(t)==0)return!1;$o(t)&&(oe(t),e.dims=ri(t));var i=n.first+n.size,o=Math.max(e.visible.from-t.options.viewportMargin,n.first),l=Math.min(i,e.visible.to+t.options.viewportMargin);r.viewFrom<o&&o-r.viewFrom<20&&(o=Math.max(n.first,r.viewFrom)),r.viewTo>l&&r.viewTo-l<20&&(l=Math.min(i,r.viewTo)),_t&&(o=jr(t.doc,o),l=uo(t.doc,l));var a=o!=r.viewFrom||l!=r.viewTo||r.lastWrapHeight!=e.wrapperHeight||r.lastWrapWidth!=e.wrapperWidth;ts(t,o,l),r.viewOffset=Yt(L(t.doc,r.viewFrom)),t.display.mover.style.top=r.viewOffset+"px";var s=Po(t);if(!a&&s==0&&!e.force&&r.renderedView==r.view&&(r.updateLineNumbers==null||r.updateLineNumbers>=r.viewTo))return!1;var u=gs(t);return s>4&&(r.lineDiv.style.display="none"),ms(t,r.updateLineNumbers,e.dims),s>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,vs(u),te(r.cursorDiv),te(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,a&&(r.lastWrapHeight=e.wrapperHeight,r.lastWrapWidth=e.wrapperWidth,xn(t,400)),r.updateLineNumbers=null,!0}function Uo(t,e){for(var r=e.viewport,n=!0;;n=!1){if(!n||!t.options.lineWrapping||e.oldDisplayWidth==xe(t)){if(r&&r.top!=null&&(r={top:Math.min(t.doc.height+Zr(t.display)-qr(t),r.top)}),e.visible=rr(t.display,t.doc,r),e.visible.from>=t.display.viewFrom&&e.visible.to<=t.display.viewTo)break}else n&&(e.visible=rr(t.display,t.doc,r));if(!hi(t,e))break;nr(t);var i=yn(t);gn(t),Ue(t,i),gi(t,i),e.force=!1}e.signal(t,"update",t),(t.display.viewFrom!=t.display.reportedViewFrom||t.display.viewTo!=t.display.reportedViewTo)&&(e.signal(t,"viewportChange",t,t.display.viewFrom,t.display.viewTo),t.display.reportedViewFrom=t.display.viewFrom,t.display.reportedViewTo=t.display.viewTo)}function di(t,e){var r=new or(t,e);if(hi(t,r)){nr(t),Uo(t,r);var n=yn(t);gn(t),Ue(t,n),gi(t,n),r.finish()}}function ms(t,e,r){var n=t.display,i=t.options.lineNumbers,o=n.lineDiv,l=o.firstChild;function a(p){var g=p.nextSibling;return W&&Dt&&t.display.currentWheelTarget==p?p.style.display="none":p.parentNode.removeChild(p),g}for(var s=n.view,u=n.viewFrom,c=0;c<s.length;c++){var f=s[c];if(!f.hidden)if(!f.node||f.node.parentNode!=o){var d=Ka(t,f,u,r);o.insertBefore(d,l)}else{for(;l!=f.node;)l=a(l);var h=i&&e!=null&&e<=u&&f.lineNumber;f.changes&&(ct(f.changes,"gutter")>-1&&(h=!1),go(t,f,u,r)),h&&(te(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(Rr(t.options,u)))),l=f.node.nextSibling}u+=f.size}for(;l;)l=a(l)}function pi(t){var e=t.gutters.offsetWidth;t.sizer.style.marginLeft=e+"px",it(t,"gutterChanged",t)}function gi(t,e){t.display.sizer.style.minHeight=e.docHeight+"px",t.display.heightForcer.style.top=e.docHeight+"px",t.display.gutters.style.height=e.docHeight+t.display.barHeight+Ut(t)+"px"}function Ko(t){var e=t.display,r=e.view;if(!(!e.alignWidgets&&(!e.gutters.firstChild||!t.options.fixedGutter))){for(var n=ii(e)-e.scroller.scrollLeft+t.doc.scrollLeft,i=e.gutters.offsetWidth,o=n+"px",l=0;l<r.length;l++)if(!r[l].hidden){t.options.fixedGutter&&(r[l].gutter&&(r[l].gutter.style.left=o),r[l].gutterBackground&&(r[l].gutterBackground.style.left=o));var a=r[l].alignable;if(a)for(var s=0;s<a.length;s++)a[s].style.left=o}t.options.fixedGutter&&(e.gutters.style.left=n+i+"px")}}function $o(t){if(!t.options.lineNumbers)return!1;var e=t.doc,r=Rr(t.options,e.first+e.size-1),n=t.display;if(r.length!=n.lineNumChars){var i=n.measure.appendChild(O("div",[O("div",r)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=i.firstChild.offsetWidth,l=i.offsetWidth-o;return n.lineGutter.style.width="",n.lineNumInnerWidth=Math.max(o,n.lineGutter.offsetWidth-l)+1,n.lineNumWidth=n.lineNumInnerWidth+l,n.lineNumChars=n.lineNumInnerWidth?r.length:-1,n.lineGutter.style.width=n.lineNumWidth+"px",pi(t.display),!0}return!1}function vi(t,e){for(var r=[],n=!1,i=0;i<t.length;i++){var o=t[i],l=null;if(typeof o!="string"&&(l=o.style,o=o.className),o=="CodeMirror-linenumbers")if(e)n=!0;else continue;r.push({className:o,style:l})}return e&&!n&&r.push({className:"CodeMirror-linenumbers",style:null}),r}function jo(t){var e=t.gutters,r=t.gutterSpecs;te(e),t.lineGutter=null;for(var n=0;n<r.length;++n){var i=r[n],o=i.className,l=i.style,a=e.appendChild(O("div",null,"CodeMirror-gutter "+o));l&&(a.style.cssText=l),o=="CodeMirror-linenumbers"&&(t.lineGutter=a,a.style.width=(t.lineNumWidth||1)+"px")}e.style.display=r.length?"":"none",pi(t)}function wn(t){jo(t.display),vt(t),Ko(t)}function ys(t,e,r,n){var i=this;this.input=r,i.scrollbarFiller=O("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=O("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=De("div",null,"CodeMirror-code"),i.selectionDiv=O("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=O("div",null,"CodeMirror-cursors"),i.measure=O("div",null,"CodeMirror-measure"),i.lineMeasure=O("div",null,"CodeMirror-measure"),i.lineSpace=De("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none");var o=De("div",[i.lineSpace],"CodeMirror-lines");i.mover=O("div",[o],null,"position: relative"),i.sizer=O("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=O("div",null,null,"position: absolute; height: "+Ii+"px; width: 1px;"),i.gutters=O("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=O("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=O("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),i.wrapper.setAttribute("translate","no"),D&&I<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),!W&&!(q&&Qt)&&(i.scroller.draggable=!0),t&&(t.appendChild?t.appendChild(i.wrapper):t(i.wrapper)),i.viewFrom=i.viewTo=e.first,i.reportedViewFrom=i.reportedViewTo=e.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,i.gutterSpecs=vi(n.gutters,n.lineNumbers),jo(i),r.init(i)}var lr=0,Zt=null;D?Zt=-.53:q?Zt=15:G?Zt=-.7:w&&(Zt=-1/3);function _o(t){var e=t.wheelDeltaX,r=t.wheelDeltaY;return e==null&&t.detail&&t.axis==t.HORIZONTAL_AXIS&&(e=t.detail),r==null&&t.detail&&t.axis==t.VERTICAL_AXIS?r=t.detail:r==null&&(r=t.wheelDelta),{x:e,y:r}}function bs(t){var e=_o(t);return e.x*=Zt,e.y*=Zt,e}function Yo(t,e){G&&E>=102&&(t.display.chromeScrollHack==null?t.display.sizer.style.pointerEvents="none":clearTimeout(t.display.chromeScrollHack),t.display.chromeScrollHack=setTimeout(function(){t.display.chromeScrollHack=null,t.display.sizer.style.pointerEvents=""},100));var r=_o(e),n=r.x,i=r.y,o=Zt;e.deltaMode===0&&(n=e.deltaX,i=e.deltaY,o=1);var l=t.display,a=l.scroller,s=a.scrollWidth>a.clientWidth,u=a.scrollHeight>a.clientHeight;if(n&&s||i&&u){if(i&&Dt&&W){t:for(var c=e.target,f=l.view;c!=a;c=c.parentNode)for(var d=0;d<f.length;d++)if(f[d].node==c){t.display.currentWheelTarget=c;break t}}if(n&&!q&&!k&&o!=null){i&&u&&mn(t,Math.max(0,a.scrollTop+i*o)),ke(t,Math.max(0,a.scrollLeft+n*o)),(!i||i&&u)&&gt(e),l.wheelStartX=null;return}if(i&&o!=null){var h=i*o,p=t.doc.scrollTop,g=p+l.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):g=Math.min(t.doc.height,g+h+50),di(t,{top:p,bottom:g})}lr<20&&e.deltaMode!==0&&(l.wheelStartX==null?(l.wheelStartX=a.scrollLeft,l.wheelStartY=a.scrollTop,l.wheelDX=n,l.wheelDY=i,setTimeout(function(){if(l.wheelStartX!=null){var m=a.scrollLeft-l.wheelStartX,y=a.scrollTop-l.wheelStartY,x=y&&l.wheelDY&&y/l.wheelDY||m&&l.wheelDX&&m/l.wheelDX;l.wheelStartX=l.wheelStartY=null,x&&(Zt=(Zt*lr+x)/(lr+1),++lr)}},200)):(l.wheelDX+=n,l.wheelDY+=i))}}var Ot=function(t,e){this.ranges=t,this.primIndex=e};Ot.prototype.primary=function(){return this.ranges[this.primIndex]},Ot.prototype.equals=function(t){if(t==this)return!0;if(t.primIndex!=this.primIndex||t.ranges.length!=this.ranges.length)return!1;for(var e=0;e<this.ranges.length;e++){var r=this.ranges[e],n=t.ranges[e];if(!Br(r.anchor,n.anchor)||!Br(r.head,n.head))return!1}return!0},Ot.prototype.deepCopy=function(){for(var t=[],e=0;e<this.ranges.length;e++)t[e]=new R(Gr(this.ranges[e].anchor),Gr(this.ranges[e].head));return new Ot(t,this.primIndex)},Ot.prototype.somethingSelected=function(){for(var t=0;t<this.ranges.length;t++)if(!this.ranges[t].empty())return!0;return!1},Ot.prototype.contains=function(t,e){e||(e=t);for(var r=0;r<this.ranges.length;r++){var n=this.ranges[r];if(P(e,n.from())>=0&&P(t,n.to())<=0)return r}return-1};var R=function(t,e){this.anchor=t,this.head=e};R.prototype.from=function(){return Un(this.anchor,this.head)},R.prototype.to=function(){return Vn(this.anchor,this.head)},R.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function Ft(t,e,r){var n=t&&t.options.selectionsMayTouch,i=e[r];e.sort(function(d,h){return P(d.from(),h.from())}),r=ct(e,i);for(var o=1;o<e.length;o++){var l=e[o],a=e[o-1],s=P(a.to(),l.from());if(n&&!l.empty()?s>0:s>=0){var u=Un(a.from(),l.from()),c=Vn(a.to(),l.to()),f=a.empty()?l.from()==l.head:a.from()==a.head;o<=r&&--r,e.splice(--o,2,new R(f?c:u,f?u:c))}}return new Ot(e,r)}function le(t,e){return new Ot([new R(t,e||t)],0)}function ae(t){return t.text?v(t.from.line+t.text.length-1,B(t.text).length+(t.text.length==1?t.from.ch:0)):t.to}function Xo(t,e){if(P(t,e.from)<0)return t;if(P(t,e.to)<=0)return ae(e);var r=t.line+e.text.length-(e.to.line-e.from.line)-1,n=t.ch;return t.line==e.to.line&&(n+=ae(e).ch-e.to.ch),v(r,n)}function mi(t,e){for(var r=[],n=0;n<t.sel.ranges.length;n++){var i=t.sel.ranges[n];r.push(new R(Xo(i.anchor,e),Xo(i.head,e)))}return Ft(t.cm,r,t.sel.primIndex)}function Zo(t,e,r){return t.line==e.line?v(r.line,t.ch-e.ch+r.ch):v(r.line+(t.line-e.line),t.ch)}function xs(t,e,r){for(var n=[],i=v(t.first,0),o=i,l=0;l<e.length;l++){var a=e[l],s=Zo(a.from,i,o),u=Zo(ae(a),i,o);if(i=a.to,o=u,r=="around"){var c=t.sel.ranges[l],f=P(c.head,c.anchor)<0;n[l]=new R(f?u:s,f?s:u)}else n[l]=new R(s,s)}return new Ot(n,t.sel.primIndex)}function yi(t){t.doc.mode=zr(t.options,t.doc.modeOption),Cn(t)}function Cn(t){t.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),t.doc.modeFrontier=t.doc.highlightFrontier=t.doc.first,xn(t,100),t.state.modeGen++,t.curOp&&vt(t)}function qo(t,e){return e.from.ch==0&&e.to.ch==0&&B(e.text)==""&&(!t.cm||t.cm.options.wholeLineUpdateBefore)}function bi(t,e,r,n){function i(x){return r?r[x]:null}function o(x,b,C){Na(x,b,C,n),it(x,"change",x,e)}function l(x,b){for(var C=[],N=x;N<b;++N)C.push(new ze(u[N],i(N),n));return C}var a=e.from,s=e.to,u=e.text,c=L(t,a.line),f=L(t,s.line),d=B(u),h=i(u.length-1),p=s.line-a.line;if(e.full)t.insert(0,l(0,u.length)),t.remove(u.length,t.size-u.length);else if(qo(t,e)){var g=l(0,u.length-1);o(f,f.text,h),p&&t.remove(a.line,p),g.length&&t.insert(a.line,g)}else if(c==f)if(u.length==1)o(c,c.text.slice(0,a.ch)+d+c.text.slice(s.ch),h);else{var m=l(1,u.length-1);m.push(new ze(d+c.text.slice(s.ch),h,n)),o(c,c.text.slice(0,a.ch)+u[0],i(0)),t.insert(a.line+1,m)}else if(u.length==1)o(c,c.text.slice(0,a.ch)+u[0]+f.text.slice(s.ch),i(0)),t.remove(a.line+1,p);else{o(c,c.text.slice(0,a.ch)+u[0],i(0)),o(f,d+f.text.slice(s.ch),h);var y=l(1,u.length-1);p>1&&t.remove(a.line+1,p-1),t.insert(a.line+1,y)}it(t,"change",t,e)}function se(t,e,r){function n(i,o,l){if(i.linked)for(var a=0;a<i.linked.length;++a){var s=i.linked[a];if(s.doc!=o){var u=l&&s.sharedHist;r&&!u||(e(s.doc,u),n(s.doc,i,u))}}}n(t,null,!0)}function Jo(t,e){if(e.cm)throw new Error("This document is already in use.");t.doc=e,e.cm=t,oi(t),yi(t),Qo(t),t.options.direction=e.direction,t.options.lineWrapping||Yr(t),t.options.mode=e.modeOption,vt(t)}function Qo(t){(t.doc.direction=="rtl"?ge:de)(t.display.lineDiv,"CodeMirror-rtl")}function ws(t){St(t,function(){Qo(t),vt(t)})}function ar(t){this.done=[],this.undone=[],this.undoDepth=t?t.undoDepth:1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=t?t.maxGeneration:1}function xi(t,e){var r={from:Gr(e.from),to:ae(e),text:ye(t,e.from,e.to)};return nl(t,r,e.from.line,e.to.line+1),se(t,function(n){return nl(n,r,e.from.line,e.to.line+1)},!0),r}function tl(t){for(;t.length;){var e=B(t);if(e.ranges)t.pop();else break}}function Cs(t,e){if(e)return tl(t.done),B(t.done);if(t.done.length&&!B(t.done).ranges)return B(t.done);if(t.done.length>1&&!t.done[t.done.length-2].ranges)return t.done.pop(),B(t.done)}function el(t,e,r,n){var i=t.history;i.undone.length=0;var o=+new Date,l,a;if((i.lastOp==n||i.lastOrigin==e.origin&&e.origin&&(e.origin.charAt(0)=="+"&&i.lastModTime>o-(t.cm?t.cm.options.historyEventDelay:500)||e.origin.charAt(0)=="*"))&&(l=Cs(i,i.lastOp==n)))a=B(l.changes),P(e.from,e.to)==0&&P(e.from,a.to)==0?a.to=ae(e):l.changes.push(xi(t,e));else{var s=B(i.done);for((!s||!s.ranges)&&sr(t.sel,i.done),l={changes:[xi(t,e)],generation:i.generation},i.done.push(l);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(r),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=o,i.lastOp=i.lastSelOp=n,i.lastOrigin=i.lastSelOrigin=e.origin,a||J(t,"historyAdded")}function Ss(t,e,r,n){var i=e.charAt(0);return i=="*"||i=="+"&&r.ranges.length==n.ranges.length&&r.somethingSelected()==n.somethingSelected()&&new Date-t.history.lastSelTime<=(t.cm?t.cm.options.historyEventDelay:500)}function ks(t,e,r,n){var i=t.history,o=n&&n.origin;r==i.lastSelOp||o&&i.lastSelOrigin==o&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==o||Ss(t,o,B(i.done),e))?i.done[i.done.length-1]=e:sr(e,i.done),i.lastSelTime=+new Date,i.lastSelOrigin=o,i.lastSelOp=r,n&&n.clearRedo!==!1&&tl(i.undone)}function sr(t,e){var r=B(e);r&&r.ranges&&r.equals(t)||e.push(t)}function nl(t,e,r,n){var i=e["spans_"+t.id],o=0;t.iter(Math.max(t.first,r),Math.min(t.first+t.size,n),function(l){l.markedSpans&&((i||(i=e["spans_"+t.id]={}))[o]=l.markedSpans),++o})}function Ls(t){if(!t)return null;for(var e,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?e||(e=t.slice(0,r)):e&&e.push(t[r]);return e?e.length?e:null:t}function Ts(t,e){var r=e["spans_"+t.id];if(!r)return null;for(var n=[],i=0;i<e.text.length;++i)n.push(Ls(r[i]));return n}function rl(t,e){var r=Ts(t,e),n=Kr(t,e);if(!r)return n;if(!n)return r;for(var i=0;i<r.length;++i){var o=r[i],l=n[i];if(o&&l)t:for(var a=0;a<l.length;++a){for(var s=l[a],u=0;u<o.length;++u)if(o[u].marker==s.marker)continue t;o.push(s)}else l&&(r[i]=l)}return r}function Ke(t,e,r){for(var n=[],i=0;i<t.length;++i){var o=t[i];if(o.ranges){n.push(r?Ot.prototype.deepCopy.call(o):o);continue}var l=o.changes,a=[];n.push({changes:a});for(var s=0;s<l.length;++s){var u=l[s],c=void 0;if(a.push({from:u.from,to:u.to,text:u.text}),e)for(var f in u)(c=f.match(/^spans_(\d+)$/))&&ct(e,Number(c[1]))>-1&&(B(a)[f]=u[f],delete u[f])}}return n}function wi(t,e,r,n){if(n){var i=t.anchor;if(r){var o=P(e,i)<0;o!=P(r,i)<0?(i=e,e=r):o!=P(e,r)<0&&(e=r)}return new R(i,e)}else return new R(r||e,e)}function ur(t,e,r,n,i){i==null&&(i=t.cm&&(t.cm.display.shift||t.extend)),ft(t,new Ot([wi(t.sel.primary(),e,r,i)],0),n)}function il(t,e,r){for(var n=[],i=t.cm&&(t.cm.display.shift||t.extend),o=0;o<t.sel.ranges.length;o++)n[o]=wi(t.sel.ranges[o],e[o],null,i);var l=Ft(t.cm,n,t.sel.primIndex);ft(t,l,r)}function Ci(t,e,r,n){var i=t.sel.ranges.slice(0);i[e]=r,ft(t,Ft(t.cm,i,t.sel.primIndex),n)}function ol(t,e,r,n){ft(t,le(e,r),n)}function Ms(t,e,r){var n={ranges:e.ranges,update:function(i){this.ranges=[];for(var o=0;o<i.length;o++)this.ranges[o]=new R(H(t,i[o].anchor),H(t,i[o].head))},origin:r&&r.origin};return J(t,"beforeSelectionChange",t,n),t.cm&&J(t.cm,"beforeSelectionChange",t.cm,n),n.ranges!=e.ranges?Ft(t.cm,n.ranges,n.ranges.length-1):e}function ll(t,e,r){var n=t.history.done,i=B(n);i&&i.ranges?(n[n.length-1]=e,cr(t,e,r)):ft(t,e,r)}function ft(t,e,r){cr(t,e,r),ks(t,t.sel,t.cm?t.cm.curOp.id:NaN,r)}function cr(t,e,r){(Ht(t,"beforeSelectionChange")||t.cm&&Ht(t.cm,"beforeSelectionChange"))&&(e=Ms(t,e,r));var n=r&&r.bias||(P(e.primary().head,t.sel.primary().head)<0?-1:1);al(t,ul(t,e,n,!0)),!(r&&r.scroll===!1)&&t.cm&&t.cm.getOption("readOnly")!="nocursor"&&Ve(t.cm)}function al(t,e){e.equals(t.sel)||(t.sel=e,t.cm&&(t.cm.curOp.updateInput=1,t.cm.curOp.selectionChanged=!0,Ui(t.cm)),it(t,"cursorActivity",t))}function sl(t){al(t,ul(t,t.sel,null,!1))}function ul(t,e,r,n){for(var i,o=0;o<e.ranges.length;o++){var l=e.ranges[o],a=e.ranges.length==t.sel.ranges.length&&t.sel.ranges[o],s=fr(t,l.anchor,a&&a.anchor,r,n),u=fr(t,l.head,a&&a.head,r,n);(i||s!=l.anchor||u!=l.head)&&(i||(i=e.ranges.slice(0,o)),i[o]=new R(s,u))}return i?Ft(t.cm,i,e.primIndex):e}function $e(t,e,r,n,i){var o=L(t,e.line);if(o.markedSpans)for(var l=0;l<o.markedSpans.length;++l){var a=o.markedSpans[l],s=a.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,c="selectRight"in s?!s.selectRight:s.inclusiveRight;if((a.from==null||(u?a.from<=e.ch:a.from<e.ch))&&(a.to==null||(c?a.to>=e.ch:a.to>e.ch))){if(i&&(J(s,"beforeCursorEnter"),s.explicitlyCleared))if(o.markedSpans){--l;continue}else break;if(!s.atomic)continue;if(r){var f=s.find(n<0?1:-1),d=void 0;if((n<0?c:u)&&(f=cl(t,f,-n,f&&f.line==e.line?o:null)),f&&f.line==e.line&&(d=P(f,r))&&(n<0?d<0:d>0))return $e(t,f,e,n,i)}var h=s.find(n<0?-1:1);return(n<0?u:c)&&(h=cl(t,h,n,h.line==e.line?o:null)),h?$e(t,h,e,n,i):null}}return e}function fr(t,e,r,n,i){var o=n||1,l=$e(t,e,r,o,i)||!i&&$e(t,e,r,o,!0)||$e(t,e,r,-o,i)||!i&&$e(t,e,r,-o,!0);return l||(t.cantEdit=!0,v(t.first,0))}function cl(t,e,r,n){return r<0&&e.ch==0?e.line>t.first?H(t,v(e.line-1)):null:r>0&&e.ch==(n||L(t,e.line)).text.length?e.line<t.first+t.size-1?v(e.line+1,0):null:new v(e.line,e.ch+r)}function fl(t){t.setSelection(v(t.firstLine(),0),v(t.lastLine()),Bt)}function hl(t,e,r){var n={canceled:!1,from:e.from,to:e.to,text:e.text,origin:e.origin,cancel:function(){return n.canceled=!0}};return r&&(n.update=function(i,o,l,a){i&&(n.from=H(t,i)),o&&(n.to=H(t,o)),l&&(n.text=l),a!==void 0&&(n.origin=a)}),J(t,"beforeChange",t,n),t.cm&&J(t.cm,"beforeChange",t.cm,n),n.canceled?(t.cm&&(t.cm.curOp.updateInput=2),null):{from:n.from,to:n.to,text:n.text,origin:n.origin}}function je(t,e,r){if(t.cm){if(!t.cm.curOp)return ot(t.cm,je)(t,e,r);if(t.cm.state.suppressEdits)return}if(!((Ht(t,"beforeChange")||t.cm&&Ht(t.cm,"beforeChange"))&&(e=hl(t,e,!0),!e))){var n=no&&!r&&ka(t,e.from,e.to);if(n)for(var i=n.length-1;i>=0;--i)dl(t,{from:n[i].from,to:n[i].to,text:i?[""]:e.text,origin:e.origin});else dl(t,e)}}function dl(t,e){if(!(e.text.length==1&&e.text[0]==""&&P(e.from,e.to)==0)){var r=mi(t,e);el(t,e,r,t.cm?t.cm.curOp.id:NaN),Sn(t,e,r,Kr(t,e));var n=[];se(t,function(i,o){!o&&ct(n,i.history)==-1&&(ml(i.history,e),n.push(i.history)),Sn(i,e,null,Kr(i,e))})}}function hr(t,e,r){var n=t.cm&&t.cm.state.suppressEdits;if(!(n&&!r)){for(var i=t.history,o,l=t.sel,a=e=="undo"?i.done:i.undone,s=e=="undo"?i.undone:i.done,u=0;u<a.length&&(o=a[u],!(r?o.ranges&&!o.equals(t.sel):!o.ranges));u++);if(u!=a.length){for(i.lastOrigin=i.lastSelOrigin=null;;)if(o=a.pop(),o.ranges){if(sr(o,s),r&&!o.equals(t.sel)){ft(t,o,{clearRedo:!1});return}l=o}else if(n){a.push(o);return}else break;var c=[];sr(l,s),s.push({changes:c,generation:i.generation}),i.generation=o.generation||++i.maxGeneration;for(var f=Ht(t,"beforeChange")||t.cm&&Ht(t.cm,"beforeChange"),d=function(g){var m=o.changes[g];if(m.origin=e,f&&!hl(t,m,!1))return a.length=0,{};c.push(xi(t,m));var y=g?mi(t,m):B(a);Sn(t,m,y,rl(t,m)),!g&&t.cm&&t.cm.scrollIntoView({from:m.from,to:ae(m)});var x=[];se(t,function(b,C){!C&&ct(x,b.history)==-1&&(ml(b.history,m),x.push(b.history)),Sn(b,m,null,rl(b,m))})},h=o.changes.length-1;h>=0;--h){var p=d(h);if(p)return p.v}}}}function pl(t,e){if(e!=0&&(t.first+=e,t.sel=new Ot(Rn(t.sel.ranges,function(i){return new R(v(i.anchor.line+e,i.anchor.ch),v(i.head.line+e,i.head.ch))}),t.sel.primIndex),t.cm)){vt(t.cm,t.first,t.first-e,e);for(var r=t.cm.display,n=r.viewFrom;n<r.viewTo;n++)ie(t.cm,n,"gutter")}}function Sn(t,e,r,n){if(t.cm&&!t.cm.curOp)return ot(t.cm,Sn)(t,e,r,n);if(e.to.line<t.first){pl(t,e.text.length-1-(e.to.line-e.from.line));return}if(!(e.from.line>t.lastLine())){if(e.from.line<t.first){var i=e.text.length-1-(t.first-e.from.line);pl(t,i),e={from:v(t.first,0),to:v(e.to.line+i,e.to.ch),text:[B(e.text)],origin:e.origin}}var o=t.lastLine();e.to.line>o&&(e={from:e.from,to:v(o,L(t,o).text.length),text:[e.text[0]],origin:e.origin}),e.removed=ye(t,e.from,e.to),r||(r=mi(t,e)),t.cm?Ns(t.cm,e,n):bi(t,e,n),cr(t,r,Bt),t.cantEdit&&fr(t,v(t.firstLine(),0))&&(t.cantEdit=!1)}}function Ns(t,e,r){var n=t.doc,i=t.display,o=e.from,l=e.to,a=!1,s=o.line;t.options.lineWrapping||(s=U(zt(L(n,o.line))),n.iter(s,l.line+1,function(h){if(h==i.maxLine)return a=!0,!0})),n.sel.contains(e.from,e.to)>-1&&Ui(t),bi(n,e,r,Eo(t)),t.options.lineWrapping||(n.iter(s,o.line+e.text.length,function(h){var p=Xn(h);p>i.maxLineLength&&(i.maxLine=h,i.maxLineLength=p,i.maxLineChanged=!0,a=!1)}),a&&(t.curOp.updateMaxLine=!0)),ma(n,o.line),xn(t,400);var u=e.text.length-(l.line-o.line)-1;e.full?vt(t):o.line==l.line&&e.text.length==1&&!qo(t.doc,e)?ie(t,o.line,"text"):vt(t,o.line,l.line+1,u);var c=Ht(t,"changes"),f=Ht(t,"change");if(f||c){var d={from:o,to:l,text:e.text,removed:e.removed,origin:e.origin};f&&it(t,"change",t,d),c&&(t.curOp.changeObjs||(t.curOp.changeObjs=[])).push(d)}t.display.selForContextMenu=null}function _e(t,e,r,n,i){var o;n||(n=r),P(n,r)<0&&(o=[n,r],r=o[0],n=o[1]),typeof e=="string"&&(e=t.splitLines(e)),je(t,{from:r,to:n,text:e,origin:i})}function gl(t,e,r,n){r<t.line?t.line+=n:e<t.line&&(t.line=e,t.ch=0)}function vl(t,e,r,n){for(var i=0;i<t.length;++i){var o=t[i],l=!0;if(o.ranges){o.copied||(o=t[i]=o.deepCopy(),o.copied=!0);for(var a=0;a<o.ranges.length;a++)gl(o.ranges[a].anchor,e,r,n),gl(o.ranges[a].head,e,r,n);continue}for(var s=0;s<o.changes.length;++s){var u=o.changes[s];if(r<u.from.line)u.from=v(u.from.line+n,u.from.ch),u.to=v(u.to.line+n,u.to.ch);else if(e<=u.to.line){l=!1;break}}l||(t.splice(0,i+1),i=0)}}function ml(t,e){var r=e.from.line,n=e.to.line,i=e.text.length-(n-r)-1;vl(t.done,r,n,i),vl(t.undone,r,n,i)}function kn(t,e,r,n){var i=e,o=e;return typeof e=="number"?o=L(t,_i(t,e)):i=U(e),i==null?null:(n(o,i)&&t.cm&&ie(t.cm,i,r),o)}function Ln(t){this.lines=t,this.parent=null;for(var e=0,r=0;r<t.length;++r)t[r].parent=this,e+=t[r].height;this.height=e}Ln.prototype={chunkSize:function(){return this.lines.length},removeInner:function(t,e){for(var r=t,n=t+e;r<n;++r){var i=this.lines[r];this.height-=i.height,Oa(i),it(i,"delete")}this.lines.splice(t,e)},collapse:function(t){t.push.apply(t,this.lines)},insertInner:function(t,e,r){this.height+=r,this.lines=this.lines.slice(0,t).concat(e).concat(this.lines.slice(t));for(var n=0;n<e.length;++n)e[n].parent=this},iterN:function(t,e,r){for(var n=t+e;t<n;++t)if(r(this.lines[t]))return!0}};function Tn(t){this.children=t;for(var e=0,r=0,n=0;n<t.length;++n){var i=t[n];e+=i.chunkSize(),r+=i.height,i.parent=this}this.size=e,this.height=r,this.parent=null}Tn.prototype={chunkSize:function(){return this.size},removeInner:function(t,e){this.size-=e;for(var r=0;r<this.children.length;++r){var n=this.children[r],i=n.chunkSize();if(t<i){var o=Math.min(e,i-t),l=n.height;if(n.removeInner(t,o),this.height-=l-n.height,i==o&&(this.children.splice(r--,1),n.parent=null),(e-=o)==0)break;t=0}else t-=i}if(this.size-e<25&&(this.children.length>1||!(this.children[0]instanceof Ln))){var a=[];this.collapse(a),this.children=[new Ln(a)],this.children[0].parent=this}},collapse:function(t){for(var e=0;e<this.children.length;++e)this.children[e].collapse(t)},insertInner:function(t,e,r){this.size+=e.length,this.height+=r;for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(t<=o){if(i.insertInner(t,e,r),i.lines&&i.lines.length>50){for(var l=i.lines.length%25+25,a=l;a<i.lines.length;){var s=new Ln(i.lines.slice(a,a+=25));i.height-=s.height,this.children.splice(++n,0,s),s.parent=this}i.lines=i.lines.slice(0,l),this.maybeSpill()}break}t-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var t=this;do{var e=t.children.splice(t.children.length-5,5),r=new Tn(e);if(t.parent){t.size-=r.size,t.height-=r.height;var n=ct(t.parent.children,t);t.parent.children.splice(n+1,0,r)}else{var i=new Tn(t.children);i.parent=t,t.children=[i,r],t=i}r.parent=t.parent}while(t.children.length>10);t.parent.maybeSpill()}},iterN:function(t,e,r){for(var n=0;n<this.children.length;++n){var i=this.children[n],o=i.chunkSize();if(t<o){var l=Math.min(e,o-t);if(i.iterN(t,l,r))return!0;if((e-=l)==0)break;t=0}else t-=o}}};var Mn=function(t,e,r){if(r)for(var n in r)r.hasOwnProperty(n)&&(this[n]=r[n]);this.doc=t,this.node=e};Mn.prototype.clear=function(){var t=this.doc.cm,e=this.line.widgets,r=this.line,n=U(r);if(!(n==null||!e)){for(var i=0;i<e.length;++i)e[i]==this&&e.splice(i--,1);e.length||(r.widgets=null);var o=dn(this);Gt(r,Math.max(0,r.height-o)),t&&(St(t,function(){yl(t,r,-o),ie(t,n,"widget")}),it(t,"lineWidgetCleared",t,this,n))}},Mn.prototype.changed=function(){var t=this,e=this.height,r=this.doc.cm,n=this.line;this.height=null;var i=dn(this)-e;i&&(re(this.doc,n)||Gt(n,n.height+i),r&&St(r,function(){r.curOp.forceUpdate=!0,yl(r,n,i),it(r,"lineWidgetChanged",r,t,U(n))}))},Ee(Mn);function yl(t,e,r){Yt(e)<(t.curOp&&t.curOp.scrollTop||t.doc.scrollTop)&&fi(t,r)}function Os(t,e,r,n){var i=new Mn(t,r,n),o=t.cm;return o&&i.noHScroll&&(o.display.alignWidgets=!0),kn(t,e,"widget",function(l){var a=l.widgets||(l.widgets=[]);if(i.insertAt==null?a.push(i):a.splice(Math.min(a.length,Math.max(0,i.insertAt)),0,i),i.line=l,o&&!re(t,l)){var s=Yt(l)<t.scrollTop;Gt(l,l.height+dn(i)),s&&fi(o,i.height),o.curOp.forceUpdate=!0}return!0}),o&&it(o,"lineWidgetAdded",o,i,typeof e=="number"?e:U(e)),i}var bl=0,ue=function(t,e){this.lines=[],this.type=e,this.doc=t,this.id=++bl};ue.prototype.clear=function(){if(!this.explicitlyCleared){var t=this.doc.cm,e=t&&!t.curOp;if(e&&Te(t),Ht(this,"clear")){var r=this.find();r&&it(this,"clear",r.from,r.to)}for(var n=null,i=null,o=0;o<this.lines.length;++o){var l=this.lines[o],a=cn(l.markedSpans,this);t&&!this.collapsed?ie(t,U(l),"text"):t&&(a.to!=null&&(i=U(l)),a.from!=null&&(n=U(l))),l.markedSpans=xa(l.markedSpans,a),a.from==null&&this.collapsed&&!re(this.doc,l)&&t&&Gt(l,Re(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=zt(this.lines[s]),c=Xn(u);c>t.display.maxLineLength&&(t.display.maxLine=u,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}n!=null&&t&&this.collapsed&&vt(t,n,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&sl(t.doc)),t&&it(t,"markerCleared",t,this,n,i),e&&Me(t),this.parent&&this.parent.clear()}},ue.prototype.find=function(t,e){t==null&&this.type=="bookmark"&&(t=1);for(var r,n,i=0;i<this.lines.length;++i){var o=this.lines[i],l=cn(o.markedSpans,this);if(l.from!=null&&(r=v(e?o:U(o),l.from),t==-1))return r;if(l.to!=null&&(n=v(e?o:U(o),l.to),t==1))return n}return r&&{from:r,to:n}},ue.prototype.changed=function(){var t=this,e=this.find(-1,!0),r=this,n=this.doc.cm;!e||!n||St(n,function(){var i=e.line,o=U(e.line),l=Jr(n,o);if(l&&(Lo(l),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!re(r.doc,i)&&r.height!=null){var a=r.height;r.height=null;var s=dn(r)-a;s&&Gt(i,i.height+s)}it(n,"markerChanged",n,t)})},ue.prototype.attachLine=function(t){if(!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(!e.maybeHiddenMarkers||ct(e.maybeHiddenMarkers,this)==-1)&&(e.maybeUnhiddenMarkers||(e.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(t)},ue.prototype.detachLine=function(t){if(this.lines.splice(ct(this.lines,t),1),!this.lines.length&&this.doc.cm){var e=this.doc.cm.curOp;(e.maybeHiddenMarkers||(e.maybeHiddenMarkers=[])).push(this)}},Ee(ue);function Ye(t,e,r,n,i){if(n&&n.shared)return Ws(t,e,r,n,i);if(t.cm&&!t.cm.curOp)return ot(t.cm,Ye)(t,e,r,n,i);var o=new ue(t,i),l=P(e,r);if(n&&ve(n,o,!1),l>0||l==0&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=De("span",[o.replacedWith],"CodeMirror-widget"),n.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),n.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(so(t,e.line,e,r,o)||e.line!=r.line&&so(t,r.line,e,r,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");ba()}o.addToHistory&&el(t,{from:e,to:r,origin:"markText"},t.sel,NaN);var a=e.line,s=t.cm,u;if(t.iter(a,r.line+1,function(f){s&&o.collapsed&&!s.options.lineWrapping&&zt(f)==s.display.maxLine&&(u=!0),o.collapsed&&a!=e.line&&Gt(f,0),wa(f,new $n(o,a==e.line?e.ch:null,a==r.line?r.ch:null),t.cm&&t.cm.curOp),++a}),o.collapsed&&t.iter(e.line,r.line+1,function(f){re(t,f)&&Gt(f,0)}),o.clearOnEnter&&A(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(ya(),(t.history.done.length||t.history.undone.length)&&t.clearHistory()),o.collapsed&&(o.id=++bl,o.atomic=!0),s){if(u&&(s.curOp.updateMaxLine=!0),o.collapsed)vt(s,e.line,r.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=e.line;c<=r.line;c++)ie(s,c,"text");o.atomic&&sl(s.doc),it(s,"markerAdded",s,o)}return o}var Nn=function(t,e){this.markers=t,this.primary=e;for(var r=0;r<t.length;++r)t[r].parent=this};Nn.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)this.markers[t].clear();it(this,"clear")}},Nn.prototype.find=function(t,e){return this.primary.find(t,e)},Ee(Nn);function Ws(t,e,r,n,i){n=ve(n),n.shared=!1;var o=[Ye(t,e,r,n,i)],l=o[0],a=n.widgetNode;return se(t,function(s){a&&(n.widgetNode=a.cloneNode(!0)),o.push(Ye(s,H(s,e),H(s,r),n,i));for(var u=0;u<s.linked.length;++u)if(s.linked[u].isParent)return;l=B(o)}),new Nn(o,l)}function xl(t){return t.findMarks(v(t.first,0),t.clipPos(v(t.lastLine())),function(e){return e.parent})}function As(t,e){for(var r=0;r<e.length;r++){var n=e[r],i=n.find(),o=t.clipPos(i.from),l=t.clipPos(i.to);if(P(o,l)){var a=Ye(t,o,l,n.primary,n.primary.type);n.markers.push(a),a.parent=n}}}function Ds(t){for(var e=function(n){var i=t[n],o=[i.primary.doc];se(i.primary.doc,function(s){return o.push(s)});for(var l=0;l<i.markers.length;l++){var a=i.markers[l];ct(o,a.doc)==-1&&(a.parent=null,i.markers.splice(l--,1))}},r=0;r<t.length;r++)e(r)}var Es=0,mt=function(t,e,r,n,i){if(!(this instanceof mt))return new mt(t,e,r,n,i);r==null&&(r=0),Tn.call(this,[new Ln([new ze("",null)])]),this.first=r,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=r;var o=v(r,0);this.sel=le(o),this.history=new ar(null),this.id=++Es,this.modeOption=e,this.lineSep=n,this.direction=i=="rtl"?"rtl":"ltr",this.extend=!1,typeof t=="string"&&(t=this.splitLines(t)),bi(this,{from:o,to:o,text:t}),ft(this,le(o),Bt)};mt.prototype=Ri(Tn.prototype,{constructor:mt,iter:function(t,e,r){r?this.iterN(t-this.first,e-t,r):this.iterN(this.first,this.first+this.size,t)},insert:function(t,e){for(var r=0,n=0;n<e.length;++n)r+=e[n].height;this.insertInner(t-this.first,e,r)},remove:function(t,e){this.removeInner(t-this.first,e)},getValue:function(t){var e=Fr(this,this.first,this.first+this.size);return t===!1?e:e.join(t||this.lineSeparator())},setValue:lt(function(t){var e=v(this.first,0),r=this.first+this.size-1;je(this,{from:e,to:v(r,L(this,r).text.length),text:this.splitLines(t),origin:"setValue",full:!0},!0),this.cm&&vn(this.cm,0,0),ft(this,le(e),Bt)}),replaceRange:function(t,e,r,n){e=H(this,e),r=r?H(this,r):e,_e(this,t,e,r,n)},getRange:function(t,e,r){var n=ye(this,H(this,t),H(this,e));return r===!1?n:r===""?n.join(""):n.join(r||this.lineSeparator())},getLine:function(t){var e=this.getLineHandle(t);return e&&e.text},getLineHandle:function(t){if(sn(this,t))return L(this,t)},getLineNumber:function(t){return U(t)},getLineHandleVisualStart:function(t){return typeof t=="number"&&(t=L(this,t)),zt(t)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(t){return H(this,t)},getCursor:function(t){var e=this.sel.primary(),r;return t==null||t=="head"?r=e.head:t=="anchor"?r=e.anchor:t=="end"||t=="to"||t===!1?r=e.to():r=e.from(),r},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:lt(function(t,e,r){ol(this,H(this,typeof t=="number"?v(t,e||0):t),null,r)}),setSelection:lt(function(t,e,r){ol(this,H(this,t),H(this,e||t),r)}),extendSelection:lt(function(t,e,r){ur(this,H(this,t),e&&H(this,e),r)}),extendSelections:lt(function(t,e){il(this,Yi(this,t),e)}),extendSelectionsBy:lt(function(t,e){var r=Rn(this.sel.ranges,t);il(this,Yi(this,r),e)}),setSelections:lt(function(t,e,r){if(t.length){for(var n=[],i=0;i<t.length;i++)n[i]=new R(H(this,t[i].anchor),H(this,t[i].head||t[i].anchor));e==null&&(e=Math.min(t.length-1,this.sel.primIndex)),ft(this,Ft(this.cm,n,e),r)}}),addSelection:lt(function(t,e,r){var n=this.sel.ranges.slice(0);n.push(new R(H(this,t),H(this,e||t))),ft(this,Ft(this.cm,n,n.length-1),r)}),getSelection:function(t){for(var e=this.sel.ranges,r,n=0;n<e.length;n++){var i=ye(this,e[n].from(),e[n].to());r=r?r.concat(i):i}return t===!1?r:r.join(t||this.lineSeparator())},getSelections:function(t){for(var e=[],r=this.sel.ranges,n=0;n<r.length;n++){var i=ye(this,r[n].from(),r[n].to());t!==!1&&(i=i.join(t||this.lineSeparator())),e[n]=i}return e},replaceSelection:function(t,e,r){for(var n=[],i=0;i<this.sel.ranges.length;i++)n[i]=t;this.replaceSelections(n,e,r||"+input")},replaceSelections:lt(function(t,e,r){for(var n=[],i=this.sel,o=0;o<i.ranges.length;o++){var l=i.ranges[o];n[o]={from:l.from(),to:l.to(),text:this.splitLines(t[o]),origin:r}}for(var a=e&&e!="end"&&xs(this,n,e),s=n.length-1;s>=0;s--)je(this,n[s]);a?ll(this,a):this.cm&&Ve(this.cm)}),undo:lt(function(){hr(this,"undo")}),redo:lt(function(){hr(this,"redo")}),undoSelection:lt(function(){hr(this,"undo",!0)}),redoSelection:lt(function(){hr(this,"redo",!0)}),setExtending:function(t){this.extend=t},getExtending:function(){return this.extend},historySize:function(){for(var t=this.history,e=0,r=0,n=0;n<t.done.length;n++)t.done[n].ranges||++e;for(var i=0;i<t.undone.length;i++)t.undone[i].ranges||++r;return{undo:e,redo:r}},clearHistory:function(){var t=this;this.history=new ar(this.history),se(this,function(e){return e.history=t.history},!0)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(t){return t&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(t){return this.history.generation==(t||this.cleanGeneration)},getHistory:function(){return{done:Ke(this.history.done),undone:Ke(this.history.undone)}},setHistory:function(t){var e=this.history=new ar(this.history);e.done=Ke(t.done.slice(0),null,!0),e.undone=Ke(t.undone.slice(0),null,!0)},setGutterMarker:lt(function(t,e,r){return kn(this,t,"gutter",function(n){var i=n.gutterMarkers||(n.gutterMarkers={});return i[e]=r,!r&&Bi(i)&&(n.gutterMarkers=null),!0})}),clearGutter:lt(function(t){var e=this;this.iter(function(r){r.gutterMarkers&&r.gutterMarkers[t]&&kn(e,r,"gutter",function(){return r.gutterMarkers[t]=null,Bi(r.gutterMarkers)&&(r.gutterMarkers=null),!0})})}),lineInfo:function(t){var e;if(typeof t=="number"){if(!sn(this,t)||(e=t,t=L(this,t),!t))return null}else if(e=U(t),e==null)return null;return{line:e,handle:t,text:t.text,gutterMarkers:t.gutterMarkers,textClass:t.textClass,bgClass:t.bgClass,wrapClass:t.wrapClass,widgets:t.widgets}},addLineClass:lt(function(t,e,r){return kn(this,t,e=="gutter"?"gutter":"class",function(n){var i=e=="text"?"textClass":e=="background"?"bgClass":e=="gutter"?"gutterClass":"wrapClass";if(!n[i])n[i]=r;else{if(Ae(r).test(n[i]))return!1;n[i]+=" "+r}return!0})}),removeLineClass:lt(function(t,e,r){return kn(this,t,e=="gutter"?"gutter":"class",function(n){var i=e=="text"?"textClass":e=="background"?"bgClass":e=="gutter"?"gutterClass":"wrapClass",o=n[i];if(o)if(r==null)n[i]=null;else{var l=o.match(Ae(r));if(!l)return!1;var a=l.index+l[0].length;n[i]=o.slice(0,l.index)+(!l.index||a==o.length?"":" ")+o.slice(a)||null}else return!1;return!0})}),addLineWidget:lt(function(t,e,r){return Os(this,t,e,r)}),removeLineWidget:function(t){t.clear()},markText:function(t,e,r){return Ye(this,H(this,t),H(this,e),r,r&&r.type||"range")},setBookmark:function(t,e){var r={replacedWith:e&&(e.nodeType==null?e.widget:e),insertLeft:e&&e.insertLeft,clearWhenEmpty:!1,shared:e&&e.shared,handleMouseEvents:e&&e.handleMouseEvents};return t=H(this,t),Ye(this,t,t,r,"bookmark")},findMarksAt:function(t){t=H(this,t);var e=[],r=L(this,t.line).markedSpans;if(r)for(var n=0;n<r.length;++n){var i=r[n];(i.from==null||i.from<=t.ch)&&(i.to==null||i.to>=t.ch)&&e.push(i.marker.parent||i.marker)}return e},findMarks:function(t,e,r){t=H(this,t),e=H(this,e);var n=[],i=t.line;return this.iter(t.line,e.line+1,function(o){var l=o.markedSpans;if(l)for(var a=0;a<l.length;a++){var s=l[a];!(s.to!=null&&i==t.line&&t.ch>=s.to||s.from==null&&i!=t.line||s.from!=null&&i==e.line&&s.from>=e.ch)&&(!r||r(s.marker))&&n.push(s.marker.parent||s.marker)}++i}),n},getAllMarks:function(){var t=[];return this.iter(function(e){var r=e.markedSpans;if(r)for(var n=0;n<r.length;++n)r[n].from!=null&&t.push(r[n].marker)}),t},posFromIndex:function(t){var e,r=this.first,n=this.lineSeparator().length;return this.iter(function(i){var o=i.text.length+n;if(o>t)return e=t,!0;t-=o,++r}),H(this,v(r,e))},indexFromPos:function(t){t=H(this,t);var e=t.ch;if(t.line<this.first||t.ch<0)return 0;var r=this.lineSeparator().length;return this.iter(this.first,t.line,function(n){e+=n.text.length+r}),e},copy:function(t){var e=new mt(Fr(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return e.scrollTop=this.scrollTop,e.scrollLeft=this.scrollLeft,e.sel=this.sel,e.extend=!1,t&&(e.history.undoDepth=this.history.undoDepth,e.setHistory(this.getHistory())),e},linkedDoc:function(t){t||(t={});var e=this.first,r=this.first+this.size;t.from!=null&&t.from>e&&(e=t.from),t.to!=null&&t.to<r&&(r=t.to);var n=new mt(Fr(this,e,r),t.mode||this.modeOption,e,this.lineSep,this.direction);return t.sharedHist&&(n.history=this.history),(this.linked||(this.linked=[])).push({doc:n,sharedHist:t.sharedHist}),n.linked=[{doc:this,isParent:!0,sharedHist:t.sharedHist}],As(n,xl(this)),n},unlinkDoc:function(t){if(t instanceof j&&(t=t.doc),this.linked)for(var e=0;e<this.linked.length;++e){var r=this.linked[e];if(r.doc==t){this.linked.splice(e,1),t.unlinkDoc(this),Ds(xl(this));break}}if(t.history==this.history){var n=[t.id];se(t,function(i){return n.push(i.id)},!0),t.history=new ar(null),t.history.done=Ke(this.history.done,n),t.history.undone=Ke(this.history.undone,n)}},iterLinkedDocs:function(t){se(this,t)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(t){return this.lineSep?t.split(this.lineSep):Er(t)},lineSeparator:function(){return this.lineSep||`
`},setDirection:lt(function(t){t!="rtl"&&(t="ltr"),t!=this.direction&&(this.direction=t,this.iter(function(e){return e.order=null}),this.cm&&ws(this.cm))})}),mt.prototype.eachLine=mt.prototype.iter;var wl=0;function Ps(t){var e=this;if(Cl(e),!(rt(e,t)||Xt(e.display,t))){gt(t),D&&(wl=+new Date);var r=Ce(e,t,!0),n=t.dataTransfer.files;if(!(!r||e.isReadOnly()))if(n&&n.length&&window.FileReader&&window.File)for(var i=n.length,o=Array(i),l=0,a=function(){++l==i&&ot(e,function(){r=H(e.doc,r);var h={from:r,to:r,text:e.doc.splitLines(o.filter(function(p){return p!=null}).join(e.doc.lineSeparator())),origin:"paste"};je(e.doc,h),ll(e.doc,le(H(e.doc,r),H(e.doc,ae(h))))})()},s=function(h,p){if(e.options.allowDropFileTypes&&ct(e.options.allowDropFileTypes,h.type)==-1){a();return}var g=new FileReader;g.onerror=function(){return a()},g.onload=function(){var m=g.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(m)){a();return}o[p]=m,a()},g.readAsText(h)},u=0;u<n.length;u++)s(n[u],u);else{if(e.state.draggingText&&e.doc.sel.contains(r)>-1){e.state.draggingText(t),setTimeout(function(){return e.display.input.focus()},20);return}try{var c=t.dataTransfer.getData("Text");if(c){var f;if(e.state.draggingText&&!e.state.draggingText.copy&&(f=e.listSelections()),cr(e.doc,le(r,r)),f)for(var d=0;d<f.length;++d)_e(e.doc,"",f[d].anchor,f[d].head,"drag");e.replaceSelection(c,"around","paste"),e.display.input.focus()}}catch{}}}}function Hs(t,e){if(D&&(!t.state.draggingText||+new Date-wl<100)){an(e);return}if(!(rt(t,e)||Xt(t.display,e))&&(e.dataTransfer.setData("Text",t.getSelection()),e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setDragImage&&!w)){var r=O("img",null,null,"position: fixed; left: 0; top: 0;");r.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",k&&(r.width=r.height=1,t.display.wrapper.appendChild(r),r._top=r.offsetTop),e.dataTransfer.setDragImage(r,0,0),k&&r.parentNode.removeChild(r)}}function zs(t,e){var r=Ce(t,e);if(r){var n=document.createDocumentFragment();li(t,r,n),t.display.dragCursor||(t.display.dragCursor=O("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),t.display.lineSpace.insertBefore(t.display.dragCursor,t.display.cursorDiv)),Mt(t.display.dragCursor,n)}}function Cl(t){t.display.dragCursor&&(t.display.lineSpace.removeChild(t.display.dragCursor),t.display.dragCursor=null)}function Sl(t){if(document.getElementsByClassName){for(var e=document.getElementsByClassName("CodeMirror"),r=[],n=0;n<e.length;n++){var i=e[n].CodeMirror;i&&r.push(i)}r.length&&r[0].operation(function(){for(var o=0;o<r.length;o++)t(r[o])})}}var kl=!1;function Is(){kl||(Fs(),kl=!0)}function Fs(){var t;A(window,"resize",function(){t==null&&(t=setTimeout(function(){t=null,Sl(Rs)},100))}),A(window,"blur",function(){return Sl(Ge)})}function Rs(t){var e=t.display;e.cachedCharWidth=e.cachedTextHeight=e.cachedPaddingH=null,e.scrollbarsClipped=!1,t.setSize()}for(var ce={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",224:"Mod",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},On=0;On<10;On++)ce[On+48]=ce[On+96]=String(On);for(var dr=65;dr<=90;dr++)ce[dr]=String.fromCharCode(dr);for(var Wn=1;Wn<=12;Wn++)ce[Wn+111]=ce[Wn+63235]="F"+Wn;var qt={};qt.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},qt.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},qt.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},qt.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},qt.default=Dt?qt.macDefault:qt.pcDefault;function Bs(t){var e=t.split(/-(?!$)/);t=e[e.length-1];for(var r,n,i,o,l=0;l<e.length-1;l++){var a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(t="Alt-"+t),n&&(t="Ctrl-"+t),o&&(t="Cmd-"+t),i&&(t="Shift-"+t),t}function Gs(t){var e={};for(var r in t)if(t.hasOwnProperty(r)){var n=t[r];if(/^(name|fallthrough|(de|at)tach)$/.test(r))continue;if(n=="..."){delete t[r];continue}for(var i=Rn(r.split(" "),Bs),o=0;o<i.length;o++){var l=void 0,a=void 0;o==i.length-1?(a=i.join(" "),l=n):(a=i.slice(0,o+1).join(" "),l="...");var s=e[a];if(!s)e[a]=l;else if(s!=l)throw new Error("Inconsistent bindings for "+a)}delete t[r]}for(var u in e)t[u]=e[u];return t}function Xe(t,e,r,n){e=pr(e);var i=e.call?e.call(t,n):e[t];if(i===!1)return"nothing";if(i==="...")return"multi";if(i!=null&&r(i))return"handled";if(e.fallthrough){if(Object.prototype.toString.call(e.fallthrough)!="[object Array]")return Xe(t,e.fallthrough,r,n);for(var o=0;o<e.fallthrough.length;o++){var l=Xe(t,e.fallthrough[o],r,n);if(l)return l}}}function Ll(t){var e=typeof t=="string"?t:ce[t.keyCode];return e=="Ctrl"||e=="Alt"||e=="Shift"||e=="Mod"}function Tl(t,e,r){var n=t;return e.altKey&&n!="Alt"&&(t="Alt-"+t),(zi?e.metaKey:e.ctrlKey)&&n!="Ctrl"&&(t="Ctrl-"+t),(zi?e.ctrlKey:e.metaKey)&&n!="Mod"&&(t="Cmd-"+t),!r&&e.shiftKey&&n!="Shift"&&(t="Shift-"+t),t}function Ml(t,e){if(k&&t.keyCode==34&&t.char)return!1;var r=ce[t.keyCode];return r==null||t.altGraphKey?!1:(t.keyCode==3&&t.code&&(r=t.code),Tl(r,t,e))}function pr(t){return typeof t=="string"?qt[t]:t}function Ze(t,e){for(var r=t.doc.sel.ranges,n=[],i=0;i<r.length;i++){for(var o=e(r[i]);n.length&&P(o.from,B(n).to)<=0;){var l=n.pop();if(P(l.from,o.from)<0){o.from=l.from;break}}n.push(o)}St(t,function(){for(var a=n.length-1;a>=0;a--)_e(t.doc,"",n[a].from,n[a].to,"+delete");Ve(t)})}function Si(t,e,r){var n=Gi(t.text,e+r,r);return n<0||n>t.text.length?null:n}function ki(t,e,r){var n=Si(t,e.ch,r);return n==null?null:new v(e.line,n,r<0?"after":"before")}function Li(t,e,r,n,i){if(t){e.doc.direction=="rtl"&&(i=-i);var o=jt(r,e.doc.direction);if(o){var l=i<0?B(o):o[0],a=i<0==(l.level==1),s=a?"after":"before",u;if(l.level>0||e.doc.direction=="rtl"){var c=Fe(e,r);u=i<0?r.text.length-1:0;var f=Kt(e,c,u).top;u=rn(function(d){return Kt(e,c,d).top==f},i<0==(l.level==1)?l.from:l.to-1,u),s=="before"&&(u=Si(r,u,1))}else u=i<0?l.to:l.from;return new v(n,u,s)}}return new v(n,i<0?r.text.length:0,i<0?"before":"after")}function Vs(t,e,r,n){var i=jt(e,t.doc.direction);if(!i)return ki(e,r,n);r.ch>=e.text.length?(r.ch=e.text.length,r.sticky="before"):r.ch<=0&&(r.ch=0,r.sticky="after");var o=ln(i,r.ch,r.sticky),l=i[o];if(t.doc.direction=="ltr"&&l.level%2==0&&(n>0?l.to>r.ch:l.from<r.ch))return ki(e,r,n);var a=function(y,x){return Si(e,y instanceof v?y.ch:y,x)},s,u=function(y){return t.options.lineWrapping?(s=s||Fe(t,e),Do(t,e,s,y)):{begin:0,end:e.text.length}},c=u(r.sticky=="before"?a(r,-1):r.ch);if(t.doc.direction=="rtl"||l.level==1){var f=l.level==1==n<0,d=a(r,f?1:-1);if(d!=null&&(f?d<=l.to&&d<=c.end:d>=l.from&&d>=c.begin)){var h=f?"before":"after";return new v(r.line,d,h)}}var p=function(y,x,b){for(var C=function($,at){return at?new v(r.line,a($,1),"before"):new v(r.line,$,"after")};y>=0&&y<i.length;y+=x){var N=i[y],T=x>0==(N.level!=1),z=T?b.begin:a(b.end,-1);if(N.from<=z&&z<N.to||(z=T?N.from:a(N.to,-1),b.begin<=z&&z<b.end))return C(z,T)}},g=p(o+n,n,c);if(g)return g;var m=n>0?c.end:a(c.begin,-1);return m!=null&&!(n>0&&m==e.text.length)&&(g=p(n>0?0:i.length-1,n,u(m)),g)?g:null}var An={selectAll:fl,singleSelection:function(t){return t.setSelection(t.getCursor("anchor"),t.getCursor("head"),Bt)},killLine:function(t){return Ze(t,function(e){if(e.empty()){var r=L(t.doc,e.head.line).text.length;return e.head.ch==r&&e.head.line<t.lastLine()?{from:e.head,to:v(e.head.line+1,0)}:{from:e.head,to:v(e.head.line,r)}}else return{from:e.from(),to:e.to()}})},deleteLine:function(t){return Ze(t,function(e){return{from:v(e.from().line,0),to:H(t.doc,v(e.to().line+1,0))}})},delLineLeft:function(t){return Ze(t,function(e){return{from:v(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(t){return Ze(t,function(e){var r=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:r},"div");return{from:n,to:e.from()}})},delWrappedLineRight:function(t){return Ze(t,function(e){var r=t.charCoords(e.head,"div").top+5,n=t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:r},"div");return{from:e.from(),to:n}})},undo:function(t){return t.undo()},redo:function(t){return t.redo()},undoSelection:function(t){return t.undoSelection()},redoSelection:function(t){return t.redoSelection()},goDocStart:function(t){return t.extendSelection(v(t.firstLine(),0))},goDocEnd:function(t){return t.extendSelection(v(t.lastLine()))},goLineStart:function(t){return t.extendSelectionsBy(function(e){return Nl(t,e.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(t){return t.extendSelectionsBy(function(e){return Ol(t,e.head)},{origin:"+move",bias:1})},goLineEnd:function(t){return t.extendSelectionsBy(function(e){return Us(t,e.head.line)},{origin:"+move",bias:-1})},goLineRight:function(t){return t.extendSelectionsBy(function(e){var r=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:t.display.lineDiv.offsetWidth+100,top:r},"div")},nn)},goLineLeft:function(t){return t.extendSelectionsBy(function(e){var r=t.cursorCoords(e.head,"div").top+5;return t.coordsChar({left:0,top:r},"div")},nn)},goLineLeftSmart:function(t){return t.extendSelectionsBy(function(e){var r=t.cursorCoords(e.head,"div").top+5,n=t.coordsChar({left:0,top:r},"div");return n.ch<t.getLine(n.line).search(/\S/)?Ol(t,e.head):n},nn)},goLineUp:function(t){return t.moveV(-1,"line")},goLineDown:function(t){return t.moveV(1,"line")},goPageUp:function(t){return t.moveV(-1,"page")},goPageDown:function(t){return t.moveV(1,"page")},goCharLeft:function(t){return t.moveH(-1,"char")},goCharRight:function(t){return t.moveH(1,"char")},goColumnLeft:function(t){return t.moveH(-1,"column")},goColumnRight:function(t){return t.moveH(1,"column")},goWordLeft:function(t){return t.moveH(-1,"word")},goGroupRight:function(t){return t.moveH(1,"group")},goGroupLeft:function(t){return t.moveH(-1,"group")},goWordRight:function(t){return t.moveH(1,"word")},delCharBefore:function(t){return t.deleteH(-1,"codepoint")},delCharAfter:function(t){return t.deleteH(1,"char")},delWordBefore:function(t){return t.deleteH(-1,"word")},delWordAfter:function(t){return t.deleteH(1,"word")},delGroupBefore:function(t){return t.deleteH(-1,"group")},delGroupAfter:function(t){return t.deleteH(1,"group")},indentAuto:function(t){return t.indentSelection("smart")},indentMore:function(t){return t.indentSelection("add")},indentLess:function(t){return t.indentSelection("subtract")},insertTab:function(t){return t.replaceSelection("	")},insertSoftTab:function(t){for(var e=[],r=t.listSelections(),n=t.options.tabSize,i=0;i<r.length;i++){var o=r[i].from(),l=Pt(t.getLine(o.line),o.ch,n);e.push(Lr(n-l%n))}t.replaceSelections(e)},defaultTab:function(t){t.somethingSelected()?t.indentSelection("add"):t.execCommand("insertTab")},transposeChars:function(t){return St(t,function(){for(var e=t.listSelections(),r=[],n=0;n<e.length;n++)if(e[n].empty()){var i=e[n].head,o=L(t.doc,i.line).text;if(o){if(i.ch==o.length&&(i=new v(i.line,i.ch-1)),i.ch>0)i=new v(i.line,i.ch+1),t.replaceRange(o.charAt(i.ch-1)+o.charAt(i.ch-2),v(i.line,i.ch-2),i,"+transpose");else if(i.line>t.doc.first){var l=L(t.doc,i.line-1).text;l&&(i=new v(i.line,1),t.replaceRange(o.charAt(0)+t.doc.lineSeparator()+l.charAt(l.length-1),v(i.line-1,l.length-1),i,"+transpose"))}}r.push(new R(i,i))}t.setSelections(r)})},newlineAndIndent:function(t){return St(t,function(){for(var e=t.listSelections(),r=e.length-1;r>=0;r--)t.replaceRange(t.doc.lineSeparator(),e[r].anchor,e[r].head,"+input");e=t.listSelections();for(var n=0;n<e.length;n++)t.indentLine(e[n].from().line,null,!0);Ve(t)})},openLine:function(t){return t.replaceSelection(`
`,"start")},toggleOverwrite:function(t){return t.toggleOverwrite()}};function Nl(t,e){var r=L(t.doc,e),n=zt(r);return n!=r&&(e=U(n)),Li(!0,t,n,e,1)}function Us(t,e){var r=L(t.doc,e),n=Ta(r);return n!=r&&(e=U(n)),Li(!0,t,r,e,-1)}function Ol(t,e){var r=Nl(t,e.line),n=L(t.doc,r.line),i=jt(n,t.doc.direction);if(!i||i[0].level==0){var o=Math.max(r.ch,n.text.search(/\S/)),l=e.line==r.line&&e.ch<=o&&e.ch;return v(r.line,l?0:o,r.sticky)}return r}function gr(t,e,r){if(typeof e=="string"&&(e=An[e],!e))return!1;t.display.input.ensurePolled();var n=t.display.shift,i=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),r&&(t.display.shift=!1),i=e(t)!=In}finally{t.display.shift=n,t.state.suppressEdits=!1}return i}function Ks(t,e,r){for(var n=0;n<t.state.keyMaps.length;n++){var i=Xe(e,t.state.keyMaps[n],r,t);if(i)return i}return t.options.extraKeys&&Xe(e,t.options.extraKeys,r,t)||Xe(e,t.options.keyMap,r,t)}var $s=new ne;function Dn(t,e,r,n){var i=t.state.keySeq;if(i){if(Ll(e))return"handled";if(/\'$/.test(e)?t.state.keySeq=null:$s.set(50,function(){t.state.keySeq==i&&(t.state.keySeq=null,t.display.input.reset())}),Wl(t,i+" "+e,r,n))return!0}return Wl(t,e,r,n)}function Wl(t,e,r,n){var i=Ks(t,e,n);return i=="multi"&&(t.state.keySeq=e),i=="handled"&&it(t,"keyHandled",t,e,r),(i=="handled"||i=="multi")&&(gt(r),ai(t)),!!i}function Al(t,e){var r=Ml(e,!0);return r?e.shiftKey&&!t.state.keySeq?Dn(t,"Shift-"+r,e,function(n){return gr(t,n,!0)})||Dn(t,r,e,function(n){if(typeof n=="string"?/^go[A-Z]/.test(n):n.motion)return gr(t,n)}):Dn(t,r,e,function(n){return gr(t,n)}):!1}function js(t,e,r){return Dn(t,"'"+r+"'",e,function(n){return gr(t,n,!0)})}var Ti=null;function Dl(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField())&&(e.curOp.focus=Et(),!rt(e,t))){D&&I<11&&t.keyCode==27&&(t.returnValue=!1);var r=t.keyCode;e.display.shift=r==16||t.shiftKey;var n=Al(e,t);k&&(Ti=n?r:null,!n&&r==88&&!ca&&(Dt?t.metaKey:t.ctrlKey)&&e.replaceSelection("",null,"cut")),q&&!Dt&&!n&&r==46&&t.shiftKey&&!t.ctrlKey&&document.execCommand&&document.execCommand("cut"),r==18&&!/\bCodeMirror-crosshair\b/.test(e.display.lineDiv.className)&&_s(e)}}function _s(t){var e=t.display.lineDiv;ge(e,"CodeMirror-crosshair");function r(n){(n.keyCode==18||!n.altKey)&&(de(e,"CodeMirror-crosshair"),Nt(document,"keyup",r),Nt(document,"mouseover",r))}A(document,"keyup",r),A(document,"mouseover",r)}function El(t){t.keyCode==16&&(this.doc.sel.shift=!1),rt(this,t)}function Pl(t){var e=this;if(!(t.target&&t.target!=e.display.input.getField())&&!(Xt(e.display,t)||rt(e,t)||t.ctrlKey&&!t.altKey||Dt&&t.metaKey)){var r=t.keyCode,n=t.charCode;if(k&&r==Ti){Ti=null,gt(t);return}if(!(k&&(!t.which||t.which<10)&&Al(e,t))){var i=String.fromCharCode(n??r);i!="\b"&&(js(e,t,i)||e.display.input.onKeyPress(t))}}}var Ys=400,Mi=function(t,e,r){this.time=t,this.pos=e,this.button=r};Mi.prototype.compare=function(t,e,r){return this.time+Ys>t&&P(e,this.pos)==0&&r==this.button};var En,Pn;function Xs(t,e){var r=+new Date;return Pn&&Pn.compare(r,t,e)?(En=Pn=null,"triple"):En&&En.compare(r,t,e)?(Pn=new Mi(r,t,e),En=null,"double"):(En=new Mi(r,t,e),Pn=null,"single")}function Hl(t){var e=this,r=e.display;if(!(rt(e,t)||r.activeTouch&&r.input.supportsTouch())){if(r.input.ensurePolled(),r.shift=t.shiftKey,Xt(r,t)){W||(r.scroller.draggable=!1,setTimeout(function(){return r.scroller.draggable=!0},100));return}if(!Ni(e,t)){var n=Ce(e,t),i=$i(t),o=n?Xs(n,i):"single";window.focus(),i==1&&e.state.selectingText&&e.state.selectingText(t),!(n&&Zs(e,i,n,o,t))&&(i==1?n?Js(e,n,o,t):Wr(t)==r.scroller&&gt(t):i==2?(n&&ur(e.doc,n),setTimeout(function(){return r.input.focus()},20)):i==3&&(xr?e.display.input.onContextMenu(t):si(e)))}}}function Zs(t,e,r,n,i){var o="Click";return n=="double"?o="Double"+o:n=="triple"&&(o="Triple"+o),o=(e==1?"Left":e==2?"Middle":"Right")+o,Dn(t,Tl(o,i),i,function(l){if(typeof l=="string"&&(l=An[l]),!l)return!1;var a=!1;try{t.isReadOnly()&&(t.state.suppressEdits=!0),a=l(t,r)!=In}finally{t.state.suppressEdits=!1}return a})}function qs(t,e,r){var n=t.getOption("configureMouse"),i=n?n(t,e,r):{};if(i.unit==null){var o=Ql?r.shiftKey&&r.metaKey:r.altKey;i.unit=o?"rectangle":e=="single"?"char":e=="double"?"word":"line"}return(i.extend==null||t.doc.extend)&&(i.extend=t.doc.extend||r.shiftKey),i.addNew==null&&(i.addNew=Dt?r.metaKey:r.ctrlKey),i.moveOnDrag==null&&(i.moveOnDrag=!(Dt?r.altKey:r.ctrlKey)),i}function Js(t,e,r,n){D?setTimeout(Cr(zo,t),0):t.curOp.focus=Et();var i=qs(t,r,n),o=t.doc.sel,l;t.options.dragDrop&&la&&!t.isReadOnly()&&r=="single"&&(l=o.contains(e))>-1&&(P((l=o.ranges[l]).from(),e)<0||e.xRel>0)&&(P(l.to(),e)>0||e.xRel<0)?Qs(t,n,e,i):tu(t,n,e,i)}function Qs(t,e,r,n){var i=t.display,o=!1,l=ot(t,function(u){W&&(i.scroller.draggable=!1),t.state.draggingText=!1,t.state.delayingBlurEvent&&(t.hasFocus()?t.state.delayingBlurEvent=!1:si(t)),Nt(i.wrapper.ownerDocument,"mouseup",l),Nt(i.wrapper.ownerDocument,"mousemove",a),Nt(i.scroller,"dragstart",s),Nt(i.scroller,"drop",l),o||(gt(u),n.addNew||ur(t.doc,r,null,null,n.extend),W&&!w||D&&I==9?setTimeout(function(){i.wrapper.ownerDocument.body.focus({preventScroll:!0}),i.input.focus()},20):i.input.focus())}),a=function(u){o=o||Math.abs(e.clientX-u.clientX)+Math.abs(e.clientY-u.clientY)>=10},s=function(){return o=!0};W&&(i.scroller.draggable=!0),t.state.draggingText=l,l.copy=!n.moveOnDrag,A(i.wrapper.ownerDocument,"mouseup",l),A(i.wrapper.ownerDocument,"mousemove",a),A(i.scroller,"dragstart",s),A(i.scroller,"drop",l),t.state.delayingBlurEvent=!0,setTimeout(function(){return i.input.focus()},20),i.scroller.dragDrop&&i.scroller.dragDrop()}function zl(t,e,r){if(r=="char")return new R(e,e);if(r=="word")return t.findWordAt(e);if(r=="line")return new R(v(e.line,0),H(t.doc,v(e.line+1,0)));var n=r(t,e);return new R(n.from,n.to)}function tu(t,e,r,n){D&&si(t);var i=t.display,o=t.doc;gt(e);var l,a,s=o.sel,u=s.ranges;if(n.addNew&&!n.extend?(a=o.sel.contains(r),a>-1?l=u[a]:l=new R(r,r)):(l=o.sel.primary(),a=o.sel.primIndex),n.unit=="rectangle")n.addNew||(l=new R(r,r)),r=Ce(t,e,!0,!0),a=-1;else{var c=zl(t,r,n.unit);n.extend?l=wi(l,c.anchor,c.head,n.extend):l=c}n.addNew?a==-1?(a=u.length,ft(o,Ft(t,u.concat([l]),a),{scroll:!1,origin:"*mouse"})):u.length>1&&u[a].empty()&&n.unit=="char"&&!n.extend?(ft(o,Ft(t,u.slice(0,a).concat(u.slice(a+1)),0),{scroll:!1,origin:"*mouse"}),s=o.sel):Ci(o,a,l,Sr):(a=0,ft(o,new Ot([l],0),Sr),s=o.sel);var f=r;function d(b){if(P(f,b)!=0)if(f=b,n.unit=="rectangle"){for(var C=[],N=t.options.tabSize,T=Pt(L(o,r.line).text,r.ch,N),z=Pt(L(o,b.line).text,b.ch,N),$=Math.min(T,z),at=Math.max(T,z),_=Math.min(r.line,b.line),kt=Math.min(t.lastLine(),Math.max(r.line,b.line));_<=kt;_++){var yt=L(o,_).text,tt=kr(yt,$,N);$==at?C.push(new R(v(_,tt),v(_,tt))):yt.length>tt&&C.push(new R(v(_,tt),v(_,kr(yt,at,N))))}C.length||C.push(new R(r,r)),ft(o,Ft(t,s.ranges.slice(0,a).concat(C),a),{origin:"*mouse",scroll:!1}),t.scrollIntoView(b)}else{var bt=l,ut=zl(t,b,n.unit),nt=bt.anchor,et;P(ut.anchor,nt)>0?(et=ut.head,nt=Un(bt.from(),ut.anchor)):(et=ut.anchor,nt=Vn(bt.to(),ut.head));var X=s.ranges.slice(0);X[a]=eu(t,new R(H(o,nt),et)),ft(o,Ft(t,X,a),Sr)}}var h=i.wrapper.getBoundingClientRect(),p=0;function g(b){var C=++p,N=Ce(t,b,!0,n.unit=="rectangle");if(N)if(P(N,f)!=0){t.curOp.focus=Et(),d(N);var T=rr(i,o);(N.line>=T.to||N.line<T.from)&&setTimeout(ot(t,function(){p==C&&g(b)}),150)}else{var z=b.clientY<h.top?-20:b.clientY>h.bottom?20:0;z&&setTimeout(ot(t,function(){p==C&&(i.scroller.scrollTop+=z,g(b))}),50)}}function m(b){t.state.selectingText=!1,p=1/0,b&&(gt(b),i.input.focus()),Nt(i.wrapper.ownerDocument,"mousemove",y),Nt(i.wrapper.ownerDocument,"mouseup",x),o.history.lastSelOrigin=null}var y=ot(t,function(b){b.buttons===0||!$i(b)?m(b):g(b)}),x=ot(t,m);t.state.selectingText=x,A(i.wrapper.ownerDocument,"mousemove",y),A(i.wrapper.ownerDocument,"mouseup",x)}function eu(t,e){var r=e.anchor,n=e.head,i=L(t.doc,r.line);if(P(r,n)==0&&r.sticky==n.sticky)return e;var o=jt(i);if(!o)return e;var l=ln(o,r.ch,r.sticky),a=o[l];if(a.from!=r.ch&&a.to!=r.ch)return e;var s=l+(a.from==r.ch==(a.level!=1)?0:1);if(s==0||s==o.length)return e;var u;if(n.line!=r.line)u=(n.line-r.line)*(t.doc.direction=="ltr"?1:-1)>0;else{var c=ln(o,n.ch,n.sticky),f=c-l||(n.ch-r.ch)*(a.level==1?-1:1);c==s-1||c==s?u=f<0:u=f>0}var d=o[s+(u?-1:0)],h=u==(d.level==1),p=h?d.from:d.to,g=h?"after":"before";return r.ch==p&&r.sticky==g?e:new R(new v(r.line,p,g),n)}function Il(t,e,r,n){var i,o;if(e.touches)i=e.touches[0].clientX,o=e.touches[0].clientY;else try{i=e.clientX,o=e.clientY}catch{return!1}if(i>=Math.floor(t.display.gutters.getBoundingClientRect().right))return!1;n&&gt(e);var l=t.display,a=l.lineDiv.getBoundingClientRect();if(o>a.bottom||!Ht(t,r))return Or(e);o-=a.top-l.viewOffset;for(var s=0;s<t.display.gutterSpecs.length;++s){var u=l.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=i){var c=be(t.doc,o),f=t.display.gutterSpecs[s];return J(t,r,t,c,f.className,e),Or(e)}}}function Ni(t,e){return Il(t,e,"gutterClick",!0)}function Fl(t,e){Xt(t.display,e)||nu(t,e)||rt(t,e,"contextmenu")||xr||t.display.input.onContextMenu(e)}function nu(t,e){return Ht(t,"gutterContextMenu")?Il(t,e,"gutterContextMenu",!1):!1}function Rl(t){t.display.wrapper.className=t.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+t.options.theme.replace(/(^|\s)\s*/g," cm-s-"),pn(t)}var qe={toString:function(){return"CodeMirror.Init"}},Bl={},vr={};function ru(t){var e=t.optionHandlers;function r(n,i,o,l){t.defaults[n]=i,o&&(e[n]=l?function(a,s,u){u!=qe&&o(a,s,u)}:o)}t.defineOption=r,t.Init=qe,r("value","",function(n,i){return n.setValue(i)},!0),r("mode",null,function(n,i){n.doc.modeOption=i,yi(n)},!0),r("indentUnit",2,yi,!0),r("indentWithTabs",!1),r("smartIndent",!0),r("tabSize",4,function(n){Cn(n),pn(n),vt(n)},!0),r("lineSeparator",null,function(n,i){if(n.doc.lineSep=i,!!i){var o=[],l=n.doc.first;n.doc.iter(function(s){for(var u=0;;){var c=s.text.indexOf(i,u);if(c==-1)break;u=c+i.length,o.push(v(l,c))}l++});for(var a=o.length-1;a>=0;a--)_e(n.doc,i,o[a],v(o[a].line,o[a].ch+i.length))}}),r("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(n,i,o){n.state.specialChars=new RegExp(i.source+(i.test("	")?"":"|	"),"g"),o!=qe&&n.refresh()}),r("specialCharPlaceholder",Da,function(n){return n.refresh()},!0),r("electricChars",!0),r("inputStyle",Qt?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),r("spellcheck",!1,function(n,i){return n.getInputField().spellcheck=i},!0),r("autocorrect",!1,function(n,i){return n.getInputField().autocorrect=i},!0),r("autocapitalize",!1,function(n,i){return n.getInputField().autocapitalize=i},!0),r("rtlMoveVisually",!ta),r("wholeLineUpdateBefore",!0),r("theme","default",function(n){Rl(n),wn(n)},!0),r("keyMap","default",function(n,i,o){var l=pr(i),a=o!=qe&&pr(o);a&&a.detach&&a.detach(n,l),l.attach&&l.attach(n,a||null)}),r("extraKeys",null),r("configureMouse",null),r("lineWrapping",!1,ou,!0),r("gutters",[],function(n,i){n.display.gutterSpecs=vi(i,n.options.lineNumbers),wn(n)},!0),r("fixedGutter",!0,function(n,i){n.display.gutters.style.left=i?ii(n.display)+"px":"0",n.refresh()},!0),r("coverGutterNextToScrollbar",!1,function(n){return Ue(n)},!0),r("scrollbarStyle","native",function(n){Vo(n),Ue(n),n.display.scrollbars.setScrollTop(n.doc.scrollTop),n.display.scrollbars.setScrollLeft(n.doc.scrollLeft)},!0),r("lineNumbers",!1,function(n,i){n.display.gutterSpecs=vi(n.options.gutters,i),wn(n)},!0),r("firstLineNumber",1,wn,!0),r("lineNumberFormatter",function(n){return n},wn,!0),r("showCursorWhenSelecting",!1,gn,!0),r("resetSelectionOnContextMenu",!0),r("lineWiseCopyCut",!0),r("pasteLinesPerSelection",!0),r("selectionsMayTouch",!1),r("readOnly",!1,function(n,i){i=="nocursor"&&(Ge(n),n.display.input.blur()),n.display.input.readOnlyChanged(i)}),r("screenReaderLabel",null,function(n,i){i=i===""?null:i,n.display.input.screenReaderLabelChanged(i)}),r("disableInput",!1,function(n,i){i||n.display.input.reset()},!0),r("dragDrop",!0,iu),r("allowDropFileTypes",null),r("cursorBlinkRate",530),r("cursorScrollMargin",0),r("cursorHeight",1,gn,!0),r("singleCursorHeightPerLine",!0,gn,!0),r("workTime",100),r("workDelay",100),r("flattenSpans",!0,Cn,!0),r("addModeClass",!1,Cn,!0),r("pollInterval",100),r("undoDepth",200,function(n,i){return n.doc.history.undoDepth=i}),r("historyEventDelay",1250),r("viewportMargin",10,function(n){return n.refresh()},!0),r("maxHighlightLength",1e4,Cn,!0),r("moveInputWithCursor",!0,function(n,i){i||n.display.input.resetPosition()}),r("tabindex",null,function(n,i){return n.display.input.getField().tabIndex=i||""}),r("autofocus",null),r("direction","ltr",function(n,i){return n.doc.setDirection(i)},!0),r("phrases",null)}function iu(t,e,r){var n=r&&r!=qe;if(!e!=!n){var i=t.display.dragFunctions,o=e?A:Nt;o(t.display.scroller,"dragstart",i.start),o(t.display.scroller,"dragenter",i.enter),o(t.display.scroller,"dragover",i.over),o(t.display.scroller,"dragleave",i.leave),o(t.display.scroller,"drop",i.drop)}}function ou(t){t.options.lineWrapping?(ge(t.display.wrapper,"CodeMirror-wrap"),t.display.sizer.style.minWidth="",t.display.sizerWidth=null):(de(t.display.wrapper,"CodeMirror-wrap"),Yr(t)),oi(t),vt(t),pn(t),setTimeout(function(){return Ue(t)},100)}function j(t,e){var r=this;if(!(this instanceof j))return new j(t,e);this.options=e=e?ve(e):{},ve(Bl,e,!1);var n=e.value;typeof n=="string"?n=new mt(n,e.mode,null,e.lineSeparator,e.direction):e.mode&&(n.modeOption=e.mode),this.doc=n;var i=new j.inputStyles[e.inputStyle](this),o=this.display=new ys(t,n,i,e);o.wrapper.CodeMirror=this,Rl(this),e.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),Vo(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new ne,keySeq:null,specialChars:null},e.autofocus&&!Qt&&o.input.focus(),D&&I<11&&setTimeout(function(){return r.display.input.reset(!0)},20),lu(this),Is(),Te(this),this.curOp.forceUpdate=!0,Jo(this,n),e.autofocus&&!Qt||this.hasFocus()?setTimeout(function(){r.hasFocus()&&!r.state.focused&&ui(r)},20):Ge(this);for(var l in vr)vr.hasOwnProperty(l)&&vr[l](this,e[l],qe);$o(this),e.finishInit&&e.finishInit(this);for(var a=0;a<Oi.length;++a)Oi[a](this);Me(this),W&&e.lineWrapping&&getComputedStyle(o.lineDiv).textRendering=="optimizelegibility"&&(o.lineDiv.style.textRendering="auto")}j.defaults=Bl,j.optionHandlers=vr;function lu(t){var e=t.display;A(e.scroller,"mousedown",ot(t,Hl)),D&&I<11?A(e.scroller,"dblclick",ot(t,function(s){if(!rt(t,s)){var u=Ce(t,s);if(!(!u||Ni(t,s)||Xt(t.display,s))){gt(s);var c=t.findWordAt(u);ur(t.doc,c.anchor,c.head)}}})):A(e.scroller,"dblclick",function(s){return rt(t,s)||gt(s)}),A(e.scroller,"contextmenu",function(s){return Fl(t,s)}),A(e.input.getField(),"contextmenu",function(s){e.scroller.contains(s.target)||Fl(t,s)});var r,n={end:0};function i(){e.activeTouch&&(r=setTimeout(function(){return e.activeTouch=null},1e3),n=e.activeTouch,n.end=+new Date)}function o(s){if(s.touches.length!=1)return!1;var u=s.touches[0];return u.radiusX<=1&&u.radiusY<=1}function l(s,u){if(u.left==null)return!0;var c=u.left-s.left,f=u.top-s.top;return c*c+f*f>20*20}A(e.scroller,"touchstart",function(s){if(!rt(t,s)&&!o(s)&&!Ni(t,s)){e.input.ensurePolled(),clearTimeout(r);var u=+new Date;e.activeTouch={start:u,moved:!1,prev:u-n.end<=300?n:null},s.touches.length==1&&(e.activeTouch.left=s.touches[0].pageX,e.activeTouch.top=s.touches[0].pageY)}}),A(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),A(e.scroller,"touchend",function(s){var u=e.activeTouch;if(u&&!Xt(e,s)&&u.left!=null&&!u.moved&&new Date-u.start<300){var c=t.coordsChar(e.activeTouch,"page"),f;!u.prev||l(u,u.prev)?f=new R(c,c):!u.prev.prev||l(u,u.prev.prev)?f=t.findWordAt(c):f=new R(v(c.line,0),H(t.doc,v(c.line+1,0))),t.setSelection(f.anchor,f.head),t.focus(),gt(s)}i()}),A(e.scroller,"touchcancel",i),A(e.scroller,"scroll",function(){e.scroller.clientHeight&&(mn(t,e.scroller.scrollTop),ke(t,e.scroller.scrollLeft,!0),J(t,"scroll",t))}),A(e.scroller,"mousewheel",function(s){return Yo(t,s)}),A(e.scroller,"DOMMouseScroll",function(s){return Yo(t,s)}),A(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(s){rt(t,s)||an(s)},over:function(s){rt(t,s)||(zs(t,s),an(s))},start:function(s){return Hs(t,s)},drop:ot(t,Ps),leave:function(s){rt(t,s)||Cl(t)}};var a=e.input.getField();A(a,"keyup",function(s){return El.call(t,s)}),A(a,"keydown",ot(t,Dl)),A(a,"keypress",ot(t,Pl)),A(a,"focus",function(s){return ui(t,s)}),A(a,"blur",function(s){return Ge(t,s)})}var Oi=[];j.defineInitHook=function(t){return Oi.push(t)};function Hn(t,e,r,n){var i=t.doc,o;r==null&&(r="add"),r=="smart"&&(i.mode.indent?o=un(t,e).state:r="prev");var l=t.options.tabSize,a=L(i,e),s=Pt(a.text,null,l);a.stateAfter&&(a.stateAfter=null);var u=a.text.match(/^\s*/)[0],c;if(!n&&!/\S/.test(a.text))c=0,r="not";else if(r=="smart"&&(c=i.mode.indent(o,a.text.slice(u.length),a.text),c==In||c>150)){if(!n)return;r="prev"}r=="prev"?e>i.first?c=Pt(L(i,e-1).text,null,l):c=0:r=="add"?c=s+t.options.indentUnit:r=="subtract"?c=s-t.options.indentUnit:typeof r=="number"&&(c=s+r),c=Math.max(0,c);var f="",d=0;if(t.options.indentWithTabs)for(var h=Math.floor(c/l);h;--h)d+=l,f+="	";if(d<c&&(f+=Lr(c-d)),f!=u)return _e(i,f,v(e,0),v(e,u.length),"+input"),a.stateAfter=null,!0;for(var p=0;p<i.sel.ranges.length;p++){var g=i.sel.ranges[p];if(g.head.line==e&&g.head.ch<u.length){var m=v(e,u.length);Ci(i,p,new R(m,m));break}}}var Rt=null;function mr(t){Rt=t}function Wi(t,e,r,n,i){var o=t.doc;t.display.shift=!1,n||(n=o.sel);var l=+new Date-200,a=i=="paste"||t.state.pasteIncoming>l,s=Er(e),u=null;if(a&&n.ranges.length>1)if(Rt&&Rt.text.join(`
`)==e){if(n.ranges.length%Rt.text.length==0){u=[];for(var c=0;c<Rt.text.length;c++)u.push(o.splitLines(Rt.text[c]))}}else s.length==n.ranges.length&&t.options.pasteLinesPerSelection&&(u=Rn(s,function(y){return[y]}));for(var f=t.curOp.updateInput,d=n.ranges.length-1;d>=0;d--){var h=n.ranges[d],p=h.from(),g=h.to();h.empty()&&(r&&r>0?p=v(p.line,p.ch-r):t.state.overwrite&&!a?g=v(g.line,Math.min(L(o,g.line).text.length,g.ch+B(s).length)):a&&Rt&&Rt.lineWise&&Rt.text.join(`
`)==s.join(`
`)&&(p=g=v(p.line,0)));var m={from:p,to:g,text:u?u[d%u.length]:s,origin:i||(a?"paste":t.state.cutIncoming>l?"cut":"+input")};je(t.doc,m),it(t,"inputRead",t,m)}e&&!a&&Vl(t,e),Ve(t),t.curOp.updateInput<2&&(t.curOp.updateInput=f),t.curOp.typing=!0,t.state.pasteIncoming=t.state.cutIncoming=-1}function Gl(t,e){var r=t.clipboardData&&t.clipboardData.getData("Text");if(r)return t.preventDefault(),!e.isReadOnly()&&!e.options.disableInput&&e.hasFocus()&&St(e,function(){return Wi(e,r,0,null,"paste")}),!0}function Vl(t,e){if(!(!t.options.electricChars||!t.options.smartIndent))for(var r=t.doc.sel,n=r.ranges.length-1;n>=0;n--){var i=r.ranges[n];if(!(i.head.ch>100||n&&r.ranges[n-1].head.line==i.head.line)){var o=t.getModeAt(i.head),l=!1;if(o.electricChars){for(var a=0;a<o.electricChars.length;a++)if(e.indexOf(o.electricChars.charAt(a))>-1){l=Hn(t,i.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(L(t.doc,i.head.line).text.slice(0,i.head.ch))&&(l=Hn(t,i.head.line,"smart"));l&&it(t,"electricInput",t,i.head.line)}}}function Ul(t){for(var e=[],r=[],n=0;n<t.doc.sel.ranges.length;n++){var i=t.doc.sel.ranges[n].head.line,o={anchor:v(i,0),head:v(i+1,0)};r.push(o),e.push(t.getRange(o.anchor,o.head))}return{text:e,ranges:r}}function Kl(t,e,r,n){t.setAttribute("autocorrect",r?"":"off"),t.setAttribute("autocapitalize",n?"":"off"),t.setAttribute("spellcheck",!!e)}function $l(){var t=O("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; min-height: 1em; outline: none"),e=O("div",[t],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return W?t.style.width="1000px":t.setAttribute("wrap","off"),V&&(t.style.border="1px solid black"),Kl(t),e}function au(t){var e=t.optionHandlers,r=t.helpers={};t.prototype={constructor:t,focus:function(){window.focus(),this.display.input.focus()},setOption:function(n,i){var o=this.options,l=o[n];o[n]==i&&n!="mode"||(o[n]=i,e.hasOwnProperty(n)&&ot(this,e[n])(this,i,l),J(this,"optionChange",this,n))},getOption:function(n){return this.options[n]},getDoc:function(){return this.doc},addKeyMap:function(n,i){this.state.keyMaps[i?"push":"unshift"](pr(n))},removeKeyMap:function(n){for(var i=this.state.keyMaps,o=0;o<i.length;++o)if(i[o]==n||i[o].name==n)return i.splice(o,1),!0},addOverlay:dt(function(n,i){var o=n.token?n:t.getMode(this.options,n);if(o.startState)throw new Error("Overlays may not be stateful.");ea(this.state.overlays,{mode:o,modeSpec:n,opaque:i&&i.opaque,priority:i&&i.priority||0},function(l){return l.priority}),this.state.modeGen++,vt(this)}),removeOverlay:dt(function(n){for(var i=this.state.overlays,o=0;o<i.length;++o){var l=i[o].modeSpec;if(l==n||typeof n=="string"&&l.name==n){i.splice(o,1),this.state.modeGen++,vt(this);return}}}),indentLine:dt(function(n,i,o){typeof i!="string"&&typeof i!="number"&&(i==null?i=this.options.smartIndent?"smart":"prev":i=i?"add":"subtract"),sn(this.doc,n)&&Hn(this,n,i,o)}),indentSelection:dt(function(n){for(var i=this.doc.sel.ranges,o=-1,l=0;l<i.length;l++){var a=i[l];if(a.empty())a.head.line>o&&(Hn(this,a.head.line,n,!0),o=a.head.line,l==this.doc.sel.primIndex&&Ve(this));else{var s=a.from(),u=a.to(),c=Math.max(o,s.line);o=Math.min(this.lastLine(),u.line-(u.ch?0:1))+1;for(var f=c;f<o;++f)Hn(this,f,n);var d=this.doc.sel.ranges;s.ch==0&&i.length==d.length&&d[l].from().ch>0&&Ci(this.doc,l,new R(s,d[l].to()),Bt)}}}),getTokenAt:function(n,i){return Qi(this,n,i)},getLineTokens:function(n,i){return Qi(this,v(n),i,!0)},getTokenTypeAt:function(n){n=H(this.doc,n);var i=Zi(this,L(this.doc,n.line)),o=0,l=(i.length-1)/2,a=n.ch,s;if(a==0)s=i[2];else for(;;){var u=o+l>>1;if((u?i[u*2-1]:0)>=a)l=u;else if(i[u*2+1]<a)o=u+1;else{s=i[u*2+2];break}}var c=s?s.indexOf("overlay "):-1;return c<0?s:c==0?null:s.slice(0,c-1)},getModeAt:function(n){var i=this.doc.mode;return i.innerMode?t.innerMode(i,this.getTokenAt(n).state).mode:i},getHelper:function(n,i){return this.getHelpers(n,i)[0]},getHelpers:function(n,i){var o=[];if(!r.hasOwnProperty(i))return o;var l=r[i],a=this.getModeAt(n);if(typeof a[i]=="string")l[a[i]]&&o.push(l[a[i]]);else if(a[i])for(var s=0;s<a[i].length;s++){var u=l[a[i][s]];u&&o.push(u)}else a.helperType&&l[a.helperType]?o.push(l[a.helperType]):l[a.name]&&o.push(l[a.name]);for(var c=0;c<l._global.length;c++){var f=l._global[c];f.pred(a,this)&&ct(o,f.val)==-1&&o.push(f.val)}return o},getStateAfter:function(n,i){var o=this.doc;return n=_i(o,n??o.first+o.size-1),un(this,n+1,i).state},cursorCoords:function(n,i){var o,l=this.doc.sel.primary();return n==null?o=l.head:typeof n=="object"?o=H(this.doc,n):o=n?l.from():l.to(),It(this,o,i||"page")},charCoords:function(n,i){return Qn(this,H(this.doc,n),i||"page")},coordsChar:function(n,i){return n=Oo(this,n,i||"page"),ei(this,n.left,n.top)},lineAtHeight:function(n,i){return n=Oo(this,{top:n,left:0},i||"page").top,be(this.doc,n+this.display.viewOffset)},heightAtLine:function(n,i,o){var l=!1,a;if(typeof n=="number"){var s=this.doc.first+this.doc.size-1;n<this.doc.first?n=this.doc.first:n>s&&(n=s,l=!0),a=L(this.doc,n)}else a=n;return Jn(this,a,{top:0,left:0},i||"page",o||l).top+(l?this.doc.height-Yt(a):0)},defaultTextHeight:function(){return Re(this.display)},defaultCharWidth:function(){return Be(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(n,i,o,l,a){var s=this.display;n=It(this,H(this.doc,n));var u=n.bottom,c=n.left;if(i.style.position="absolute",i.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(i),s.sizer.appendChild(i),l=="over")u=n.top;else if(l=="above"||l=="near"){var f=Math.max(s.wrapper.clientHeight,this.doc.height),d=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(l=="above"||n.bottom+i.offsetHeight>f)&&n.top>i.offsetHeight?u=n.top-i.offsetHeight:n.bottom+i.offsetHeight<=f&&(u=n.bottom),c+i.offsetWidth>d&&(c=d-i.offsetWidth)}i.style.top=u+"px",i.style.left=i.style.right="",a=="right"?(c=s.sizer.clientWidth-i.offsetWidth,i.style.right="0px"):(a=="left"?c=0:a=="middle"&&(c=(s.sizer.clientWidth-i.offsetWidth)/2),i.style.left=c+"px"),o&&is(this,{left:c,top:u,right:c+i.offsetWidth,bottom:u+i.offsetHeight})},triggerOnKeyDown:dt(Dl),triggerOnKeyPress:dt(Pl),triggerOnKeyUp:El,triggerOnMouseDown:dt(Hl),execCommand:function(n){if(An.hasOwnProperty(n))return An[n].call(null,this)},triggerElectric:dt(function(n){Vl(this,n)}),findPosH:function(n,i,o,l){var a=1;i<0&&(a=-1,i=-i);for(var s=H(this.doc,n),u=0;u<i&&(s=Ai(this.doc,s,a,o,l),!s.hitSide);++u);return s},moveH:dt(function(n,i){var o=this;this.extendSelectionsBy(function(l){return o.display.shift||o.doc.extend||l.empty()?Ai(o.doc,l.head,n,i,o.options.rtlMoveVisually):n<0?l.from():l.to()},nn)}),deleteH:dt(function(n,i){var o=this.doc.sel,l=this.doc;o.somethingSelected()?l.replaceSelection("",null,"+delete"):Ze(this,function(a){var s=Ai(l,a.head,n,i,!1);return n<0?{from:s,to:a.head}:{from:a.head,to:s}})}),findPosV:function(n,i,o,l){var a=1,s=l;i<0&&(a=-1,i=-i);for(var u=H(this.doc,n),c=0;c<i;++c){var f=It(this,u,"div");if(s==null?s=f.left:f.left=s,u=jl(this,f,a,o),u.hitSide)break}return u},moveV:dt(function(n,i){var o=this,l=this.doc,a=[],s=!this.display.shift&&!l.extend&&l.sel.somethingSelected();if(l.extendSelectionsBy(function(c){if(s)return n<0?c.from():c.to();var f=It(o,c.head,"div");c.goalColumn!=null&&(f.left=c.goalColumn),a.push(f.left);var d=jl(o,f,n,i);return i=="page"&&c==l.sel.primary()&&fi(o,Qn(o,d,"div").top-f.top),d},nn),a.length)for(var u=0;u<l.sel.ranges.length;u++)l.sel.ranges[u].goalColumn=a[u]}),findWordAt:function(n){var i=this.doc,o=L(i,n.line).text,l=n.ch,a=n.ch;if(o){var s=this.getHelper(n,"wordChars");(n.sticky=="before"||a==o.length)&&l?--l:++a;for(var u=o.charAt(l),c=Bn(u,s)?function(f){return Bn(f,s)}:/\s/.test(u)?function(f){return/\s/.test(f)}:function(f){return!/\s/.test(f)&&!Bn(f)};l>0&&c(o.charAt(l-1));)--l;for(;a<o.length&&c(o.charAt(a));)++a}return new R(v(n.line,l),v(n.line,a))},toggleOverwrite:function(n){n!=null&&n==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?ge(this.display.cursorDiv,"CodeMirror-overwrite"):de(this.display.cursorDiv,"CodeMirror-overwrite"),J(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==Et()},isReadOnly:function(){return!!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dt(function(n,i){vn(this,n,i)}),getScrollInfo:function(){var n=this.display.scroller;return{left:n.scrollLeft,top:n.scrollTop,height:n.scrollHeight-Ut(this)-this.display.barHeight,width:n.scrollWidth-Ut(this)-this.display.barWidth,clientHeight:qr(this),clientWidth:xe(this)}},scrollIntoView:dt(function(n,i){n==null?(n={from:this.doc.sel.primary().head,to:null},i==null&&(i=this.options.cursorScrollMargin)):typeof n=="number"?n={from:v(n,0),to:null}:n.from==null&&(n={from:n,to:null}),n.to||(n.to=n.from),n.margin=i||0,n.from.line!=null?os(this,n):Fo(this,n.from,n.to,n.margin)}),setSize:dt(function(n,i){var o=this,l=function(s){return typeof s=="number"||/^\d+$/.test(String(s))?s+"px":s};n!=null&&(this.display.wrapper.style.width=l(n)),i!=null&&(this.display.wrapper.style.height=l(i)),this.options.lineWrapping&&To(this);var a=this.display.viewFrom;this.doc.iter(a,this.display.viewTo,function(s){if(s.widgets){for(var u=0;u<s.widgets.length;u++)if(s.widgets[u].noHScroll){ie(o,a,"widget");break}}++a}),this.curOp.forceUpdate=!0,J(this,"refresh",this)}),operation:function(n){return St(this,n)},startOperation:function(){return Te(this)},endOperation:function(){return Me(this)},refresh:dt(function(){var n=this.display.cachedTextHeight;vt(this),this.curOp.forceUpdate=!0,pn(this),vn(this,this.doc.scrollLeft,this.doc.scrollTop),pi(this.display),(n==null||Math.abs(n-Re(this.display))>.5||this.options.lineWrapping)&&oi(this),J(this,"refresh",this)}),swapDoc:dt(function(n){var i=this.doc;return i.cm=null,this.state.selectingText&&this.state.selectingText(),Jo(this,n),pn(this),this.display.input.reset(),vn(this,n.scrollLeft,n.scrollTop),this.curOp.forceScroll=!0,it(this,"swapDoc",this,i),i}),phrase:function(n){var i=this.options.phrases;return i&&Object.prototype.hasOwnProperty.call(i,n)?i[n]:n},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ee(t),t.registerHelper=function(n,i,o){r.hasOwnProperty(n)||(r[n]=t[n]={_global:[]}),r[n][i]=o},t.registerGlobalHelper=function(n,i,o,l){t.registerHelper(n,i,l),r[n]._global.push({pred:o,val:l})}}function Ai(t,e,r,n,i){var o=e,l=r,a=L(t,e.line),s=i&&t.direction=="rtl"?-r:r;function u(){var x=e.line+s;return x<t.first||x>=t.first+t.size?!1:(e=new v(x,e.ch,e.sticky),a=L(t,x))}function c(x){var b;if(n=="codepoint"){var C=a.text.charCodeAt(e.ch+(r>0?0:-1));if(isNaN(C))b=null;else{var N=r>0?C>=55296&&C<56320:C>=56320&&C<57343;b=new v(e.line,Math.max(0,Math.min(a.text.length,e.ch+r*(N?2:1))),-r)}}else i?b=Vs(t.cm,a,e,r):b=ki(a,e,r);if(b==null)if(!x&&u())e=Li(i,t.cm,a,e.line,s);else return!1;else e=b;return!0}if(n=="char"||n=="codepoint")c();else if(n=="column")c(!0);else if(n=="word"||n=="group")for(var f=null,d=n=="group",h=t.cm&&t.cm.getHelper(e,"wordChars"),p=!0;!(r<0&&!c(!p));p=!1){var g=a.text.charAt(e.ch)||`
`,m=Bn(g,h)?"w":d&&g==`
`?"n":!d||/\s/.test(g)?null:"p";if(d&&!p&&!m&&(m="s"),f&&f!=m){r<0&&(r=1,c(),e.sticky="after");break}if(m&&(f=m),r>0&&!c(!p))break}var y=fr(t,e,o,l,!0);return Br(o,y)&&(y.hitSide=!0),y}function jl(t,e,r,n){var i=t.doc,o=e.left,l;if(n=="page"){var a=Math.min(t.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),s=Math.max(a-.5*Re(t.display),3);l=(r>0?e.bottom:e.top)+r*s}else n=="line"&&(l=r>0?e.bottom+3:e.top-3);for(var u;u=ei(t,o,l),!!u.outside;){if(r<0?l<=0:l>=i.height){u.hitSide=!0;break}l+=r*5}return u}var K=function(t){this.cm=t,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new ne,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};K.prototype.init=function(t){var e=this,r=this,n=r.cm,i=r.div=t.lineDiv;i.contentEditable=!0,Kl(i,n.options.spellcheck,n.options.autocorrect,n.options.autocapitalize);function o(a){for(var s=a.target;s;s=s.parentNode){if(s==i)return!0;if(/\bCodeMirror-(?:line)?widget\b/.test(s.className))break}return!1}A(i,"paste",function(a){!o(a)||rt(n,a)||Gl(a,n)||I<=11&&setTimeout(ot(n,function(){return e.updateFromDOM()}),20)}),A(i,"compositionstart",function(a){e.composing={data:a.data,done:!1}}),A(i,"compositionupdate",function(a){e.composing||(e.composing={data:a.data,done:!1})}),A(i,"compositionend",function(a){e.composing&&(a.data!=e.composing.data&&e.readFromDOMSoon(),e.composing.done=!0)}),A(i,"touchstart",function(){return r.forceCompositionEnd()}),A(i,"input",function(){e.composing||e.readFromDOMSoon()});function l(a){if(!(!o(a)||rt(n,a))){if(n.somethingSelected())mr({lineWise:!1,text:n.getSelections()}),a.type=="cut"&&n.replaceSelection("",null,"cut");else if(n.options.lineWiseCopyCut){var s=Ul(n);mr({lineWise:!0,text:s.text}),a.type=="cut"&&n.operation(function(){n.setSelections(s.ranges,0,Bt),n.replaceSelection("",null,"cut")})}else return;if(a.clipboardData){a.clipboardData.clearData();var u=Rt.text.join(`
`);if(a.clipboardData.setData("Text",u),a.clipboardData.getData("Text")==u){a.preventDefault();return}}var c=$l(),f=c.firstChild;n.display.lineSpace.insertBefore(c,n.display.lineSpace.firstChild),f.value=Rt.text.join(`
`);var d=Et();en(f),setTimeout(function(){n.display.lineSpace.removeChild(c),d.focus(),d==i&&r.showPrimarySelection()},50)}}A(i,"copy",l),A(i,"cut",l)},K.prototype.screenReaderLabelChanged=function(t){t?this.div.setAttribute("aria-label",t):this.div.removeAttribute("aria-label")},K.prototype.prepareSelection=function(){var t=Ho(this.cm,!1);return t.focus=Et()==this.div,t},K.prototype.showSelection=function(t,e){!t||!this.cm.display.view.length||((t.focus||e)&&this.showPrimarySelection(),this.showMultipleSelections(t))},K.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},K.prototype.showPrimarySelection=function(){var t=this.getSelection(),e=this.cm,r=e.doc.sel.primary(),n=r.from(),i=r.to();if(e.display.viewTo==e.display.viewFrom||n.line>=e.display.viewTo||i.line<e.display.viewFrom){t.removeAllRanges();return}var o=yr(e,t.anchorNode,t.anchorOffset),l=yr(e,t.focusNode,t.focusOffset);if(!(o&&!o.bad&&l&&!l.bad&&P(Un(o,l),n)==0&&P(Vn(o,l),i)==0)){var a=e.display.view,s=n.line>=e.display.viewFrom&&_l(e,n)||{node:a[0].measure.map[2],offset:0},u=i.line<e.display.viewTo&&_l(e,i);if(!u){var c=a[a.length-1].measure,f=c.maps?c.maps[c.maps.length-1]:c.map;u={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(!s||!u){t.removeAllRanges();return}var d=t.rangeCount&&t.getRangeAt(0),h;try{h=pe(s.node,s.offset,u.offset,u.node)}catch{}h&&(!q&&e.state.focused?(t.collapse(s.node,s.offset),h.collapsed||(t.removeAllRanges(),t.addRange(h))):(t.removeAllRanges(),t.addRange(h)),d&&t.anchorNode==null?t.addRange(d):q&&this.startGracePeriod()),this.rememberSelection()}},K.prototype.startGracePeriod=function(){var t=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){t.gracePeriod=!1,t.selectionChanged()&&t.cm.operation(function(){return t.cm.curOp.selectionChanged=!0})},20)},K.prototype.showMultipleSelections=function(t){Mt(this.cm.display.cursorDiv,t.cursors),Mt(this.cm.display.selectionDiv,t.selection)},K.prototype.rememberSelection=function(){var t=this.getSelection();this.lastAnchorNode=t.anchorNode,this.lastAnchorOffset=t.anchorOffset,this.lastFocusNode=t.focusNode,this.lastFocusOffset=t.focusOffset},K.prototype.selectionInEditor=function(){var t=this.getSelection();if(!t.rangeCount)return!1;var e=t.getRangeAt(0).commonAncestorContainer;return ee(this.div,e)},K.prototype.focus=function(){this.cm.options.readOnly!="nocursor"&&((!this.selectionInEditor()||Et()!=this.div)&&this.showSelection(this.prepareSelection(),!0),this.div.focus())},K.prototype.blur=function(){this.div.blur()},K.prototype.getField=function(){return this.div},K.prototype.supportsTouch=function(){return!0},K.prototype.receivedFocus=function(){var t=this,e=this;this.selectionInEditor()?setTimeout(function(){return t.pollSelection()},20):St(this.cm,function(){return e.cm.curOp.selectionChanged=!0});function r(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,r))}this.polling.set(this.cm.options.pollInterval,r)},K.prototype.selectionChanged=function(){var t=this.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastFocusNode||t.focusOffset!=this.lastFocusOffset},K.prototype.pollSelection=function(){if(!(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged())){var t=this.getSelection(),e=this.cm;if(Tt&&G&&this.cm.display.gutterSpecs.length&&su(t.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),this.focus();return}if(!this.composing){this.rememberSelection();var r=yr(e,t.anchorNode,t.anchorOffset),n=yr(e,t.focusNode,t.focusOffset);r&&n&&St(e,function(){ft(e.doc,le(r,n),Bt),(r.bad||n.bad)&&(e.curOp.selectionChanged=!0)})}}},K.prototype.pollContent=function(){this.readDOMTimeout!=null&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var t=this.cm,e=t.display,r=t.doc.sel.primary(),n=r.from(),i=r.to();if(n.ch==0&&n.line>t.firstLine()&&(n=v(n.line-1,L(t.doc,n.line-1).length)),i.ch==L(t.doc,i.line).text.length&&i.line<t.lastLine()&&(i=v(i.line+1,0)),n.line<e.viewFrom||i.line>e.viewTo-1)return!1;var o,l,a;n.line==e.viewFrom||(o=Se(t,n.line))==0?(l=U(e.view[0].line),a=e.view[0].node):(l=U(e.view[o].line),a=e.view[o-1].node.nextSibling);var s=Se(t,i.line),u,c;if(s==e.view.length-1?(u=e.viewTo-1,c=e.lineDiv.lastChild):(u=U(e.view[s+1].line)-1,c=e.view[s+1].node.previousSibling),!a)return!1;for(var f=t.doc.splitLines(uu(t,a,c,l,u)),d=ye(t.doc,v(l,0),v(u,L(t.doc,u).text.length));f.length>1&&d.length>1;)if(B(f)==B(d))f.pop(),d.pop(),u--;else if(f[0]==d[0])f.shift(),d.shift(),l++;else break;for(var h=0,p=0,g=f[0],m=d[0],y=Math.min(g.length,m.length);h<y&&g.charCodeAt(h)==m.charCodeAt(h);)++h;for(var x=B(f),b=B(d),C=Math.min(x.length-(f.length==1?h:0),b.length-(d.length==1?h:0));p<C&&x.charCodeAt(x.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(f.length==1&&d.length==1&&l==n.line)for(;h&&h>n.ch&&x.charCodeAt(x.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;f[f.length-1]=x.slice(0,x.length-p).replace(/^\u200b+/,""),f[0]=f[0].slice(h).replace(/\u200b+$/,"");var N=v(l,h),T=v(u,d.length?B(d).length-p:0);if(f.length>1||f[0]||P(N,T))return _e(t.doc,f,N,T,"+input"),!0},K.prototype.ensurePolled=function(){this.forceCompositionEnd()},K.prototype.reset=function(){this.forceCompositionEnd()},K.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},K.prototype.readFromDOMSoon=function(){var t=this;this.readDOMTimeout==null&&(this.readDOMTimeout=setTimeout(function(){if(t.readDOMTimeout=null,t.composing)if(t.composing.done)t.composing=null;else return;t.updateFromDOM()},80))},K.prototype.updateFromDOM=function(){var t=this;(this.cm.isReadOnly()||!this.pollContent())&&St(this.cm,function(){return vt(t.cm)})},K.prototype.setUneditable=function(t){t.contentEditable="false"},K.prototype.onKeyPress=function(t){t.charCode==0||this.composing||(t.preventDefault(),this.cm.isReadOnly()||ot(this.cm,Wi)(this.cm,String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),0))},K.prototype.readOnlyChanged=function(t){this.div.contentEditable=String(t!="nocursor")},K.prototype.onContextMenu=function(){},K.prototype.resetPosition=function(){},K.prototype.needsContentAttribute=!0;function _l(t,e){var r=Jr(t,e.line);if(!r||r.hidden)return null;var n=L(t.doc,e.line),i=wo(r,n,e.line),o=jt(n,t.doc.direction),l="left";if(o){var a=ln(o,e.ch);l=a%2?"right":"left"}var s=ko(i.map,e.ch,l);return s.offset=s.collapse=="right"?s.end:s.start,s}function su(t){for(var e=t;e;e=e.parentNode)if(/CodeMirror-gutter-wrapper/.test(e.className))return!0;return!1}function Je(t,e){return e&&(t.bad=!0),t}function uu(t,e,r,n,i){var o="",l=!1,a=t.doc.lineSeparator(),s=!1;function u(h){return function(p){return p.id==h}}function c(){l&&(o+=a,s&&(o+=a),l=s=!1)}function f(h){h&&(c(),o+=h)}function d(h){if(h.nodeType==1){var p=h.getAttribute("cm-text");if(p){f(p);return}var g=h.getAttribute("cm-marker"),m;if(g){var y=t.findMarks(v(n,0),v(i+1,0),u(+g));y.length&&(m=y[0].find(0))&&f(ye(t.doc,m.from,m.to).join(a));return}if(h.getAttribute("contenteditable")=="false")return;var x=/^(pre|div|p|li|table|br)$/i.test(h.nodeName);if(!/^br$/i.test(h.nodeName)&&h.textContent.length==0)return;x&&c();for(var b=0;b<h.childNodes.length;b++)d(h.childNodes[b]);/^(pre|p)$/i.test(h.nodeName)&&(s=!0),x&&(l=!0)}else h.nodeType==3&&f(h.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "))}for(;d(e),e!=r;)e=e.nextSibling,s=!1;return o}function yr(t,e,r){var n;if(e==t.display.lineDiv){if(n=t.display.lineDiv.childNodes[r],!n)return Je(t.clipPos(v(t.display.viewTo-1)),!0);e=null,r=0}else for(n=e;;n=n.parentNode){if(!n||n==t.display.lineDiv)return null;if(n.parentNode&&n.parentNode==t.display.lineDiv)break}for(var i=0;i<t.display.view.length;i++){var o=t.display.view[i];if(o.node==n)return cu(o,e,r)}}function cu(t,e,r){var n=t.text.firstChild,i=!1;if(!e||!ee(n,e))return Je(v(U(t.line),0),!0);if(e==n&&(i=!0,e=n.childNodes[r],r=0,!e)){var o=t.rest?B(t.rest):t.line;return Je(v(U(o),o.text.length),i)}var l=e.nodeType==3?e:null,a=e;for(!l&&e.childNodes.length==1&&e.firstChild.nodeType==3&&(l=e.firstChild,r&&(r=l.nodeValue.length));a.parentNode!=n;)a=a.parentNode;var s=t.measure,u=s.maps;function c(m,y,x){for(var b=-1;b<(u?u.length:0);b++)for(var C=b<0?s.map:u[b],N=0;N<C.length;N+=3){var T=C[N+2];if(T==m||T==y){var z=U(b<0?t.line:t.rest[b]),$=C[N]+x;return(x<0||T!=m)&&($=C[N+(x?1:0)]),v(z,$)}}}var f=c(l,a,r);if(f)return Je(f,i);for(var d=a.nextSibling,h=l?l.nodeValue.length-r:0;d;d=d.nextSibling){if(f=c(d,d.firstChild,0),f)return Je(v(f.line,f.ch-h),i);h+=d.textContent.length}for(var p=a.previousSibling,g=r;p;p=p.previousSibling){if(f=c(p,p.firstChild,-1),f)return Je(v(f.line,f.ch+g),i);g+=p.textContent.length}}var Z=function(t){this.cm=t,this.prevInput="",this.pollingFast=!1,this.polling=new ne,this.hasSelection=!1,this.composing=null};Z.prototype.init=function(t){var e=this,r=this,n=this.cm;this.createField(t);var i=this.textarea;t.wrapper.insertBefore(this.wrapper,t.wrapper.firstChild),V&&(i.style.width="0px"),A(i,"input",function(){D&&I>=9&&e.hasSelection&&(e.hasSelection=null),r.poll()}),A(i,"paste",function(l){rt(n,l)||Gl(l,n)||(n.state.pasteIncoming=+new Date,r.fastPoll())});function o(l){if(!rt(n,l)){if(n.somethingSelected())mr({lineWise:!1,text:n.getSelections()});else if(n.options.lineWiseCopyCut){var a=Ul(n);mr({lineWise:!0,text:a.text}),l.type=="cut"?n.setSelections(a.ranges,null,Bt):(r.prevInput="",i.value=a.text.join(`
`),en(i))}else return;l.type=="cut"&&(n.state.cutIncoming=+new Date)}}A(i,"cut",o),A(i,"copy",o),A(t.scroller,"paste",function(l){if(!(Xt(t,l)||rt(n,l))){if(!i.dispatchEvent){n.state.pasteIncoming=+new Date,r.focus();return}var a=new Event("paste");a.clipboardData=l.clipboardData,i.dispatchEvent(a)}}),A(t.lineSpace,"selectstart",function(l){Xt(t,l)||gt(l)}),A(i,"compositionstart",function(){var l=n.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:l,range:n.markText(l,n.getCursor("to"),{className:"CodeMirror-composing"})}}),A(i,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},Z.prototype.createField=function(t){this.wrapper=$l(),this.textarea=this.wrapper.firstChild},Z.prototype.screenReaderLabelChanged=function(t){t?this.textarea.setAttribute("aria-label",t):this.textarea.removeAttribute("aria-label")},Z.prototype.prepareSelection=function(){var t=this.cm,e=t.display,r=t.doc,n=Ho(t);if(t.options.moveInputWithCursor){var i=It(t,r.sel.primary().head,"div"),o=e.wrapper.getBoundingClientRect(),l=e.lineDiv.getBoundingClientRect();n.teTop=Math.max(0,Math.min(e.wrapper.clientHeight-10,i.top+l.top-o.top)),n.teLeft=Math.max(0,Math.min(e.wrapper.clientWidth-10,i.left+l.left-o.left))}return n},Z.prototype.showSelection=function(t){var e=this.cm,r=e.display;Mt(r.cursorDiv,t.cursors),Mt(r.selectionDiv,t.selection),t.teTop!=null&&(this.wrapper.style.top=t.teTop+"px",this.wrapper.style.left=t.teLeft+"px")},Z.prototype.reset=function(t){if(!(this.contextMenuPending||this.composing)){var e=this.cm;if(e.somethingSelected()){this.prevInput="";var r=e.getSelection();this.textarea.value=r,e.state.focused&&en(this.textarea),D&&I>=9&&(this.hasSelection=r)}else t||(this.prevInput=this.textarea.value="",D&&I>=9&&(this.hasSelection=null))}},Z.prototype.getField=function(){return this.textarea},Z.prototype.supportsTouch=function(){return!1},Z.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!Qt||Et()!=this.textarea))try{this.textarea.focus()}catch{}},Z.prototype.blur=function(){this.textarea.blur()},Z.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},Z.prototype.receivedFocus=function(){this.slowPoll()},Z.prototype.slowPoll=function(){var t=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){t.poll(),t.cm.state.focused&&t.slowPoll()})},Z.prototype.fastPoll=function(){var t=!1,e=this;e.pollingFast=!0;function r(){var n=e.poll();!n&&!t?(t=!0,e.polling.set(60,r)):(e.pollingFast=!1,e.slowPoll())}e.polling.set(20,r)},Z.prototype.poll=function(){var t=this,e=this.cm,r=this.textarea,n=this.prevInput;if(this.contextMenuPending||!e.state.focused||ua(r)&&!n&&!this.composing||e.isReadOnly()||e.options.disableInput||e.state.keySeq)return!1;var i=r.value;if(i==n&&!e.somethingSelected())return!1;if(D&&I>=9&&this.hasSelection===i||Dt&&/[\uf700-\uf7ff]/.test(i))return e.display.input.reset(),!1;if(e.doc.sel==e.display.selForContextMenu){var o=i.charCodeAt(0);if(o==8203&&!n&&(n="\u200B"),o==8666)return this.reset(),this.cm.execCommand("undo")}for(var l=0,a=Math.min(n.length,i.length);l<a&&n.charCodeAt(l)==i.charCodeAt(l);)++l;return St(e,function(){Wi(e,i.slice(l),n.length-l,null,t.composing?"*compose":null),i.length>1e3||i.indexOf(`
`)>-1?r.value=t.prevInput="":t.prevInput=i,t.composing&&(t.composing.range.clear(),t.composing.range=e.markText(t.composing.start,e.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},Z.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},Z.prototype.onKeyPress=function(){D&&I>=9&&(this.hasSelection=null),this.fastPoll()},Z.prototype.onContextMenu=function(t){var e=this,r=e.cm,n=r.display,i=e.textarea;e.contextMenuPending&&e.contextMenuPending();var o=Ce(r,t),l=n.scroller.scrollTop;if(!o||k)return;var a=r.options.resetSelectionOnContextMenu;a&&r.doc.sel.contains(o)==-1&&ot(r,ft)(r.doc,le(o),Bt);var s=i.style.cssText,u=e.wrapper.style.cssText,c=e.wrapper.offsetParent.getBoundingClientRect();e.wrapper.style.cssText="position: static",i.style.cssText=`position: absolute; width: 30px; height: 30px;
      top: `+(t.clientY-c.top-5)+"px; left: "+(t.clientX-c.left-5)+`px;
      z-index: 1000; background: `+(D?"rgba(255, 255, 255, .05)":"transparent")+`;
      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);`;var f;W&&(f=window.scrollY),n.input.focus(),W&&window.scrollTo(null,f),n.input.reset(),r.somethingSelected()||(i.value=e.prevInput=" "),e.contextMenuPending=h,n.selForContextMenu=r.doc.sel,clearTimeout(n.detectingSelectAll);function d(){if(i.selectionStart!=null){var g=r.somethingSelected(),m="\u200B"+(g?i.value:"");i.value="\u21DA",i.value=m,e.prevInput=g?"":"\u200B",i.selectionStart=1,i.selectionEnd=m.length,n.selForContextMenu=r.doc.sel}}function h(){if(e.contextMenuPending==h&&(e.contextMenuPending=!1,e.wrapper.style.cssText=u,i.style.cssText=s,D&&I<9&&n.scrollbars.setScrollTop(n.scroller.scrollTop=l),i.selectionStart!=null)){(!D||D&&I<9)&&d();var g=0,m=function(){n.selForContextMenu==r.doc.sel&&i.selectionStart==0&&i.selectionEnd>0&&e.prevInput=="\u200B"?ot(r,fl)(r):g++<10?n.detectingSelectAll=setTimeout(m,500):(n.selForContextMenu=null,n.input.reset())};n.detectingSelectAll=setTimeout(m,200)}}if(D&&I>=9&&d(),xr){an(t);var p=function(){Nt(window,"mouseup",p),setTimeout(h,20)};A(window,"mouseup",p)}else setTimeout(h,50)},Z.prototype.readOnlyChanged=function(t){t||this.reset(),this.textarea.disabled=t=="nocursor",this.textarea.readOnly=!!t},Z.prototype.setUneditable=function(){},Z.prototype.needsContentAttribute=!1;function fu(t,e){if(e=e?ve(e):{},e.value=t.value,!e.tabindex&&t.tabIndex&&(e.tabindex=t.tabIndex),!e.placeholder&&t.placeholder&&(e.placeholder=t.placeholder),e.autofocus==null){var r=Et();e.autofocus=r==t||t.getAttribute("autofocus")!=null&&r==document.body}function n(){t.value=a.getValue()}var i;if(t.form&&(A(t.form,"submit",n),!e.leaveSubmitMethodAlone)){var o=t.form;i=o.submit;try{var l=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=l}}catch{}}e.finishInit=function(s){s.save=n,s.getTextArea=function(){return t},s.toTextArea=function(){s.toTextArea=isNaN,n(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(Nt(t.form,"submit",n),!e.leaveSubmitMethodAlone&&typeof t.form.submit=="function"&&(t.form.submit=i))}},t.style.display="none";var a=j(function(s){return t.parentNode.insertBefore(s,t.nextSibling)},e);return a}function hu(t){t.off=Nt,t.on=A,t.wheelEventPixels=bs,t.Doc=mt,t.splitLines=Er,t.countColumn=Pt,t.findColumn=kr,t.isWordChar=Tr,t.Pass=In,t.signal=J,t.Line=ze,t.changeEnd=ae,t.scrollbarModel=Go,t.Pos=v,t.cmpPos=P,t.modes=Hr,t.mimeModes=Pe,t.resolveMode=Gn,t.getMode=zr,t.modeExtensions=He,t.extendMode=pa,t.copyState=me,t.startState=ji,t.innerMode=Ir,t.commands=An,t.keyMap=qt,t.keyName=Ml,t.isModifierKey=Ll,t.lookupKey=Xe,t.normalizeKeyMap=Gs,t.StringStream=Q,t.SharedTextMarker=Nn,t.TextMarker=ue,t.LineWidget=Mn,t.e_preventDefault=gt,t.e_stopPropagation=Ki,t.e_stop=an,t.addClass=ge,t.contains=ee,t.rmClass=de,t.keyNames=ce}ru(j),au(j);var du="iter insert remove copy getEditor constructor".split(" ");for(var br in mt.prototype)mt.prototype.hasOwnProperty(br)&&ct(du,br)<0&&(j.prototype[br]=function(t){return function(){return t.apply(this.doc,arguments)}}(mt.prototype[br]));return Ee(mt),j.inputStyles={textarea:Z,contenteditable:K},j.defineMode=function(t){!j.defaults.mode&&t!="null"&&(j.defaults.mode=t),ha.apply(this,arguments)},j.defineMIME=da,j.defineMode("null",function(){return{token:function(t){return t.skipToEnd()}}}),j.defineMIME("text/plain","null"),j.defineExtension=function(t,e){j.prototype[t]=e},j.defineDocExtension=function(t,e){mt.prototype[t]=e},j.fromTextArea=fu,hu(j),j.version="5.65.5",j})}(Pi)),Pi.exports}var Xl=zn();const Zl=Cu(Xl);(function(Lt,We){(function(F){F(zn())})(function(F){var wt="CodeMirror-activeline",q="CodeMirror-activeline-background",Ct="CodeMirror-activeline-gutter";F.defineOption("styleActiveLine",!1,function(W,Y,G){var E=G==F.Init?!1:G;Y!=E&&(E&&(W.off("beforeSelectionChange",I),Wt(W),delete W.state.activeLines),Y&&(W.state.activeLines=[],D(W,W.listSelections()),W.on("beforeSelectionChange",I)))});function Wt(W){for(var Y=0;Y<W.state.activeLines.length;Y++)W.removeLineClass(W.state.activeLines[Y],"wrap",wt),W.removeLineClass(W.state.activeLines[Y],"background",q),W.removeLineClass(W.state.activeLines[Y],"gutter",Ct)}function At(W,Y){if(W.length!=Y.length)return!1;for(var G=0;G<W.length;G++)if(W[G]!=Y[G])return!1;return!0}function D(W,Y){for(var G=[],E=0;E<Y.length;E++){var k=Y[E],w=W.getOption("styleActiveLine");if(!(typeof w=="object"&&w.nonEmpty?k.anchor.line!=k.head.line:!k.empty())){var S=W.getLineHandleVisualStart(k.head.line);G[G.length-1]!=S&&G.push(S)}}At(W.state.activeLines,G)||W.operation(function(){Wt(W);for(var M=0;M<G.length;M++)W.addLineClass(G[M],"wrap",wt),W.addLineClass(G[M],"background",q),W.addLineClass(G[M],"gutter",Ct);W.state.activeLines=G})}function I(W,Y){D(W,Y.ranges)}})})(),function(Lt,We){(function(F){F(zn())})(function(F){F.defineMode("velocity",function(){function wt(E){for(var k={},w=E.split(" "),S=0;S<w.length;++S)k[w[S]]=!0;return k}var q=wt("#end #else #break #stop #[[ #]] #{end} #{else} #{break} #{stop}"),Ct=wt("#if #elseif #foreach #set #include #parse #macro #define #evaluate #{if} #{elseif} #{foreach} #{set} #{include} #{parse} #{macro} #{define} #{evaluate}"),Wt=wt("$foreach.count $foreach.hasNext $foreach.first $foreach.last $foreach.topmost $foreach.parent.count $foreach.parent.hasNext $foreach.parent.first $foreach.parent.last $foreach.parent $velocityCount $!bodyContent $bodyContent"),At=/[+\-*&%=<>!?:\/|]/;function D(E,k,w){return k.tokenize=w,w(E,k)}function I(E,k){var w=k.beforeParams;k.beforeParams=!1;var S=E.next();if(S=="'"&&!k.inString&&k.inParams)return k.lastTokenWasBuiltin=!1,D(E,k,W(S));if(S=='"'){if(k.lastTokenWasBuiltin=!1,k.inString)return k.inString=!1,"string";if(k.inParams)return D(E,k,W(S))}else{if(/[\[\]{}\(\),;\.]/.test(S))return S=="("&&w?k.inParams=!0:S==")"&&(k.inParams=!1,k.lastTokenWasBuiltin=!0),null;if(/\d/.test(S))return k.lastTokenWasBuiltin=!1,E.eatWhile(/[\w\.]/),"number";if(S=="#"&&E.eat("*"))return k.lastTokenWasBuiltin=!1,D(E,k,Y);if(S=="#"&&E.match(/ *\[ *\[/))return k.lastTokenWasBuiltin=!1,D(E,k,G);if(S=="#"&&E.eat("#"))return k.lastTokenWasBuiltin=!1,E.skipToEnd(),"comment";if(S=="$")return E.eat("!"),E.eatWhile(/[\w\d\$_\.{}-]/),Wt&&Wt.propertyIsEnumerable(E.current())?"keyword":(k.lastTokenWasBuiltin=!0,k.beforeParams=!0,"builtin");if(At.test(S))return k.lastTokenWasBuiltin=!1,E.eatWhile(At),"operator";E.eatWhile(/[\w\$_{}@]/);var M=E.current();return q&&q.propertyIsEnumerable(M)?"keyword":Ct&&Ct.propertyIsEnumerable(M)||E.current().match(/^#@?[a-z0-9_]+ *$/i)&&E.peek()=="("&&!(Ct&&Ct.propertyIsEnumerable(M.toLowerCase()))?(k.beforeParams=!0,k.lastTokenWasBuiltin=!1,"keyword"):k.inString?(k.lastTokenWasBuiltin=!1,"string"):E.pos>M.length&&E.string.charAt(E.pos-M.length-1)=="."&&k.lastTokenWasBuiltin?"builtin":(k.lastTokenWasBuiltin=!1,null)}}function W(E){return function(k,w){for(var S=!1,M,V=!1;(M=k.next())!=null;){if(M==E&&!S){V=!0;break}if(E=='"'&&k.peek()=="$"&&!S){w.inString=!0,V=!0;break}S=!S&&M=="\\"}return V&&(w.tokenize=I),"string"}}function Y(E,k){for(var w=!1,S;S=E.next();){if(S=="#"&&w){k.tokenize=I;break}w=S=="*"}return"comment"}function G(E,k){for(var w=0,S;S=E.next();){if(S=="#"&&w==2){k.tokenize=I;break}S=="]"?w++:S!=" "&&(w=0)}return"meta"}return{startState:function(){return{tokenize:I,beforeParams:!1,inParams:!1,inString:!1,lastTokenWasBuiltin:!1}},token:function(E,k){return E.eatSpace()?null:k.tokenize(E,k)},blockCommentStart:"#*",blockCommentEnd:"*#",lineComment:"##",fold:"velocity"}}),F.defineMIME("text/velocity","velocity")})}(),function(Lt,We){(function(F){F(zn())})(function(F){F.defineMode("go",function(wt){var q=wt.indentUnit,Ct={break:!0,case:!0,chan:!0,const:!0,continue:!0,default:!0,defer:!0,else:!0,fallthrough:!0,for:!0,func:!0,go:!0,goto:!0,if:!0,import:!0,interface:!0,map:!0,package:!0,range:!0,return:!0,select:!0,struct:!0,switch:!0,type:!0,var:!0,bool:!0,byte:!0,complex64:!0,complex128:!0,float32:!0,float64:!0,int8:!0,int16:!0,int32:!0,int64:!0,string:!0,uint8:!0,uint16:!0,uint32:!0,uint64:!0,int:!0,uint:!0,uintptr:!0,error:!0,rune:!0},Wt={true:!0,false:!0,iota:!0,nil:!0,append:!0,cap:!0,close:!0,complex:!0,copy:!0,delete:!0,imag:!0,len:!0,make:!0,new:!0,panic:!0,print:!0,println:!0,real:!0,recover:!0},At=/[+\-*&^%:=<>!|\/]/,D;function I(w,S){var M=w.next();if(M=='"'||M=="'"||M=="`")return S.tokenize=W(M),S.tokenize(w,S);if(/[\d\.]/.test(M))return M=="."?w.match(/^[0-9]+([eE][\-+]?[0-9]+)?/):M=="0"?w.match(/^[xX][0-9a-fA-F]+/)||w.match(/^0[0-7]+/):w.match(/^[0-9]*\.?[0-9]*([eE][\-+]?[0-9]+)?/),"number";if(/[\[\]{}\(\),;\:\.]/.test(M))return D=M,null;if(M=="/"){if(w.eat("*"))return S.tokenize=Y,Y(w,S);if(w.eat("/"))return w.skipToEnd(),"comment"}if(At.test(M))return w.eatWhile(At),"operator";w.eatWhile(/[\w\$_\xa1-\uffff]/);var V=w.current();return Ct.propertyIsEnumerable(V)?((V=="case"||V=="default")&&(D="case"),"keyword"):Wt.propertyIsEnumerable(V)?"atom":"variable"}function W(w){return function(S,M){for(var V=!1,Tt,Qt=!1;(Tt=S.next())!=null;){if(Tt==w&&!V){Qt=!0;break}V=!V&&w!="`"&&Tt=="\\"}return(Qt||!(V||w=="`"))&&(M.tokenize=I),"string"}}function Y(w,S){for(var M=!1,V;V=w.next();){if(V=="/"&&M){S.tokenize=I;break}M=V=="*"}return"comment"}function G(w,S,M,V,Tt){this.indented=w,this.column=S,this.type=M,this.align=V,this.prev=Tt}function E(w,S,M){return w.context=new G(w.indented,S,M,null,w.context)}function k(w){if(w.context.prev){var S=w.context.type;return(S==")"||S=="]"||S=="}")&&(w.indented=w.context.indented),w.context=w.context.prev}}return{startState:function(w){return{tokenize:null,context:new G((w||0)-q,0,"top",!1),indented:0,startOfLine:!0}},token:function(w,S){var M=S.context;if(w.sol()&&(M.align==null&&(M.align=!1),S.indented=w.indentation(),S.startOfLine=!0,M.type=="case"&&(M.type="}")),w.eatSpace())return null;D=null;var V=(S.tokenize||I)(w,S);return V=="comment"||(M.align==null&&(M.align=!0),D=="{"?E(S,w.column(),"}"):D=="["?E(S,w.column(),"]"):D=="("?E(S,w.column(),")"):D=="case"?M.type="case":(D=="}"&&M.type=="}"||D==M.type)&&k(S),S.startOfLine=!1),V},indent:function(w,S){if(w.tokenize!=I&&w.tokenize!=null)return F.Pass;var M=w.context,V=S&&S.charAt(0);if(M.type=="case"&&/^(?:case|default)\b/.test(S))return w.context.type="}",M.indented;var Tt=V==M.type;return M.align?M.column+(Tt?0:1):M.indented+(Tt?0:q)},electricChars:"{}):",closeBrackets:"()[]{}''\"\"``",fold:"brace",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//"}}),F.defineMIME("text/x-go","go")})}();const ql={props:{modelValue:{type:String,default:""},mode:{type:String,default:"go"},height:{type:[String,Number],default:300},options:{type:Object,default:()=>{}},theme:{type:String,default:"idea"},readOnly:{type:Boolean,default:!1}},data(){return{contentValue:this.modelValue,coder:null,opt:{theme:this.theme,styleActiveLine:!0,lineNumbers:!0,lineWrapping:!1,tabSize:4,indentUnit:4,indentWithTabs:!0,mode:this.mode,readOnly:this.readOnly,...this.options}}},computed:{_height(){return Number(this.height)?Number(this.height)+"px":this.height}},watch:{modelValue(Lt){this.contentValue=Lt,Lt!==this.coder.getValue()&&this.coder.setValue(Lt)}},mounted(){this.init()},methods:{init(){this.coder=pu(Zl.fromTextArea(this.$refs.textarea,this.opt)),this.coder.on("change",Lt=>{this.contentValue=Lt.getValue(),this.$emit("update:modelValue",this.contentValue)})},formatStrInJson(Lt){return JSON.stringify(JSON.parse(Lt),null,4)}}};function Jl(Lt,We,F,wt,q,Ct){return gu(),vu("div",{class:"code-editor",style:xu({height:Ct._height})},[mu(bu("textarea",{ref:"textarea","onUpdate:modelValue":We[0]||(We[0]=Wt=>q.contentValue=Wt)},null,512),[[yu,q.contentValue]])],4)}Yl=Su(ql,[["render",Jl],["__scopeId","data-v-f8ca17f2"]])});export{Lu as __tla,Yl as default};
