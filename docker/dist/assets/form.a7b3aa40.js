import{b as G,m as K,p as L,n as M,q as X,g as v,d as Y,__tla as z}from"./index.dc33c00f.js";import{K as k,h as V,a1 as I,ak as s,au as H,o as p,R as i,S as o,b as J,Y as u,W as n,X as U,u as r,T as Q,V as c,G as Z,aC as ee,n as le}from"./vue.445bf94b.js";let x,re=Promise.all([(()=>{try{return z}catch{}})()]).then(async()=>{let g,T;g={class:"dialog-footer"},T=k({name:"systemMenuDialog"}),x=k({...T,emits:["refresh"],setup(ae,{expose:q,emit:D}){const{t:O}=G(),w=ee(()=>Y(()=>import("./index.ff063913.js").then(async a=>(await a.__tla,a)),["assets/index.ff063913.js","assets/index.dc33c00f.js","assets/vue.445bf94b.js","assets/index.57bc2f6e.css","assets/index.47b5c078.css"])),b=V(!1),f=V(!1),h=V(),e=I({ruleForm:{menuId:"",name:"",enName:"",permission:"",parentId:"",icon:"",path:"",sortOrder:0,menuType:"1",keepAlive:"0",visible:"1",embedded:"0"},parentData:[]}),N=I({menType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u4E0A\u7EA7\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],path:[{required:!0,message:"\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],icon:[{required:!0,message:"\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],permission:[{required:!0,message:"\u6743\u9650\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),A=(a,l)=>{e.ruleForm.menuId="",b.value=!0,le(()=>{var m;(m=h.value)==null||m.resetFields(),e.ruleForm.parentId=(l==null?void 0:l.id)||"-1"}),l!=null&&l.id&&a==="edit"&&(e.ruleForm.menuId=l.id,P(l.id)),B()},P=a=>{K(a).then(l=>{Object.assign(e.ruleForm,l.data)})},B=()=>{e.parentData=[],L({type:"0"}).then(a=>{let l={id:"-1",name:"\u6839\u83DC\u5355",children:[]};l.children=a.data,e.parentData.push(l)})},C=async()=>{if(!await h.value.validate().catch(()=>{}))return!1;try{f.value=!0,e.ruleForm.menuId?await M(e.ruleForm):await X(e.ruleForm),v().success(O(e.ruleForm.menuId?"common.editSuccessText":"common.addSuccessText")),b.value=!1,D("refresh")}catch(a){v().error(a.msg)}finally{f.value=!1}};return q({openDialog:A}),(a,l)=>{const m=s("el-radio"),F=s("el-radio-group"),d=s("el-form-item"),E=s("el-tree-select"),_=s("el-input"),R=s("el-input-number"),S=s("el-form"),$=s("el-button"),W=s("el-dialog"),j=H("loading");return p(),i(W,{title:r(e).ruleForm.menuId?a.$t("common.editBtn"):a.$t("common.addBtn"),width:"600",modelValue:r(b),"onUpdate:modelValue":l[12]||(l[12]=y=>Z(b)?b.value=y:null),"close-on-click-modal":!1,"destroy-on-close":!0,draggable:""},{footer:o(()=>[J("span",g,[u($,{onClick:l[11]||(l[11]=y=>b.value=!1)},{default:o(()=>[n(U(a.$t("common.cancelButtonText")),1)]),_:1}),u($,{type:"primary",onClick:C,disabled:r(f)},{default:o(()=>[n(U(a.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:o(()=>[Q((p(),i(S,{ref_key:"menuDialogFormRef",ref:h,model:r(e).ruleForm,rules:r(N),"label-width":"90px"},{default:o(()=>{var y;return[u(d,{label:a.$t("sysmenu.menuType"),prop:"menuType"},{default:o(()=>[u(F,{modelValue:r(e).ruleForm.menuType,"onUpdate:modelValue":l[0]||(l[0]=t=>r(e).ruleForm.menuType=t)},{default:o(()=>[u(m,{border:"",label:"0"},{default:o(()=>[n("\u83DC\u5355")]),_:1}),u(m,{border:"",label:"1"},{default:o(()=>[n("\u6309\u94AE")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),u(d,{label:a.$t("sysmenu.parentId"),prop:"parentId"},{default:o(()=>[u(E,{modelValue:r(e).ruleForm.parentId,"onUpdate:modelValue":l[1]||(l[1]=t=>r(e).ruleForm.parentId=t),data:r(e).parentData,"render-after-expand":!1,props:{value:"id",label:"name",children:"children"},class:"w100",clearable:"","check-strictly":"",placeholder:a.$t("sysmenu.inputParentIdTip")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),u(d,{label:a.$t("sysmenu.name"),prop:"name"},{default:o(()=>[u(_,{modelValue:r(e).ruleForm.name,"onUpdate:modelValue":l[2]||(l[2]=t=>r(e).ruleForm.name=t),clearable:"",placeholder:a.$t("sysmenu.inputNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(d,{label:a.$t("sysmenu.enName"),prop:"enName"},{default:o(()=>[u(_,{modelValue:r(e).ruleForm.enName,"onUpdate:modelValue":l[3]||(l[3]=t=>r(e).ruleForm.enName=t),clearable:"",placeholder:a.$t("sysmenu.inputEnNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(e).ruleForm.menuType==="0"?(p(),i(d,{key:0,label:a.$t("sysmenu.path"),prop:"path"},{default:o(()=>[u(_,{modelValue:r(e).ruleForm.path,"onUpdate:modelValue":l[4]||(l[4]=t=>r(e).ruleForm.path=t),placeholder:a.$t("sysmenu.inputPathTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):c("",!0),r(e).ruleForm.menuType==="1"?(p(),i(d,{key:1,label:a.$t("sysmenu.permission"),prop:"permission"},{default:o(()=>[u(_,{modelValue:r(e).ruleForm.permission,"onUpdate:modelValue":l[5]||(l[5]=t=>r(e).ruleForm.permission=t),maxlength:"50",placeholder:a.$t("sysmenu.inputPermissionTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):c("",!0),u(d,{label:a.$t("sysmenu.sortOrder"),prop:"sortOrder"},{default:o(()=>[u(R,{modelValue:r(e).ruleForm.sortOrder,"onUpdate:modelValue":l[6]||(l[6]=t=>r(e).ruleForm.sortOrder=t),min:0,"controls-position":"right"},null,8,["modelValue"])]),_:1},8,["label"]),r(e).ruleForm.menuType==="0"?(p(),i(d,{key:2,label:a.$t("sysmenu.icon"),prop:"icon"},{default:o(()=>[u(r(w),{placeholder:a.$t("sysmenu.inputIconTip"),modelValue:r(e).ruleForm.icon,"onUpdate:modelValue":l[7]||(l[7]=t=>r(e).ruleForm.icon=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])):c("",!0),r(e).ruleForm.menuType==="0"&&((y=r(e).ruleForm.path)!=null&&y.startsWith("http"))?(p(),i(d,{key:3,label:a.$t("sysmenu.embedded"),prop:"embedded"},{default:o(()=>[u(F,{modelValue:r(e).ruleForm.embedded,"onUpdate:modelValue":l[8]||(l[8]=t=>r(e).ruleForm.embedded=t)},{default:o(()=>[u(m,{border:"",label:"0"},{default:o(()=>[n("\u5426")]),_:1}),u(m,{border:"",label:"1"},{default:o(()=>[n("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):c("",!0),r(e).ruleForm.menuType==="0"?(p(),i(d,{key:4,label:a.$t("sysmenu.keepAlive"),prop:"keepAlive"},{default:o(()=>[u(F,{modelValue:r(e).ruleForm.keepAlive,"onUpdate:modelValue":l[9]||(l[9]=t=>r(e).ruleForm.keepAlive=t)},{default:o(()=>[u(m,{border:"",label:"0"},{default:o(()=>[n("\u5426")]),_:1}),u(m,{border:"",label:"1"},{default:o(()=>[n("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):c("",!0),r(e).ruleForm.menuType==="0"?(p(),i(d,{key:5,label:a.$t("sysmenu.visible"),prop:"visible"},{default:o(()=>[u(F,{modelValue:r(e).ruleForm.visible,"onUpdate:modelValue":l[10]||(l[10]=t=>r(e).ruleForm.visible=t)},{default:o(()=>[u(m,{border:"",label:"0"},{default:o(()=>[n("\u5426")]),_:1}),u(m,{border:"",label:"1"},{default:o(()=>[n("\u662F")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])):c("",!0)]}),_:1},8,["model","rules"])),[[j,r(f)]])]),_:1},8,["title","modelValue"])}}})});export{re as __tla,x as default};
