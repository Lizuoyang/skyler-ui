import{f as H,e as M,__tla as N}from"./role.a493d518.js";import{b as U,p as W,o as X,g as Y,__tla as B}from"./index.dc33c00f.js";import{K as D,h as n,a1 as G,ak as i,au as L,o as R,a as $,Y as o,S as r,b as u,X as b,u as l,W as x,T as q}from"./vue.445bf94b.js";let w,z=Promise.all([(()=>{try{return N}catch{}})(),(()=>{try{return B}catch{}})()]).then(async()=>{let f,m,p,y,k;f={class:"system-role-dialog-container"},m={class:"flex items-center justify-between"},p={class:"flex mr-16"},y={class:"dialog-footer"},k=D({name:"role-permession"}),w=D({...k,setup(F,{expose:K}){const{t:C}=U(),d=n(),S=n(!0),c=n(!1),e=G({checkedKeys:[],treeData:[],defaultProps:{label:"name",value:"id"},roleId:"",dialog:{isShowDialog:!1,title:"\u5206\u914D\u6743\u9650",submitTxt:"\u66F4\u65B0"}}),h=n([]),I=t=>{e.checkedKeys=[],e.treeData=[],h.value=[],e.roleId=t.roleId,c.value=!0,H(t.roleId).then(a=>(h.value=a.data,W())).then(a=>{e.treeData=a.data,e.checkedKeys=X.resolveAllEunuchNodeId(e.treeData,h.value,[])}).finally(()=>{c.value=!1}),e.dialog.isShowDialog=!0},T=t=>{const a=e.treeData;for(let s=0;s<a.length;s++)d.value.store.nodesMap[a[s].id].expanded=t},j=t=>{var a,s;t?(a=d.value)==null||a.setCheckedKeys(e.treeData.map(g=>g.id)):(s=d.value)==null||s.setCheckedKeys([])},P=()=>{const t=d.value.getCheckedKeys().join(",").concat(",").concat(d.value.getHalfCheckedKeys().join(","));c.value=!0,M(e.roleId,t).then(()=>{e.dialog.isShowDialog=!1,Y().success(C("common.editSuccessText"))}).finally(()=>{c.value=!1})};return K({openDialog:I}),(t,a)=>{const s=i("el-checkbox"),g=i("el-tree"),V=i("el-scrollbar"),v=i("el-button"),A=i("el-dialog"),E=L("loading");return R(),$("div",f,[o(A,{width:"30%",modelValue:l(e).dialog.isShowDialog,"onUpdate:modelValue":a[1]||(a[1]=_=>l(e).dialog.isShowDialog=_),"close-on-click-modal":!1,draggable:""},{header:r(()=>[u("div",m,[u("div",null,b(l(e).dialog.title),1),u("div",p,[o(s,{label:"\u5C55\u5F00/\u6298\u53E0",onChange:T}),o(s,{label:"\u5168\u9009/\u4E0D\u5168\u9009",onChange:j})])])]),footer:r(()=>[u("span",y,[o(v,{onClick:a[0]||(a[0]=_=>l(e).dialog.isShowDialog=!1)},{default:r(()=>[x("\u53D6 \u6D88")]),_:1}),o(v,{type:"primary",onClick:P},{default:r(()=>[x(b(l(e).dialog.submitTxt),1)]),_:1})])]),default:r(()=>[o(V,{class:"h-[400px] sm:h-[600px]"},{default:r(()=>[q(o(g,{ref_key:"menuTree",ref:d,data:l(e).treeData,"default-checked-keys":l(e).checkedKeys,"check-strictly":!l(S),props:l(e).defaultProps,class:"filter-tree","node-key":"id","highlight-current":"","show-checkbox":""},null,8,["data","default-checked-keys","check-strictly","props"]),[[E,l(c)]])]),_:1})]),_:1},8,["modelValue"])])}}})});export{z as __tla,w as default};
