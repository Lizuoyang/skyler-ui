import{b as j,g as f,__tla as G}from"./index.dc33c00f.js";import{g as K,p as W,a as X,d as Y,__tla as z}from"./dept.f4183dbc.js";import{K as v,h as p,a1 as A,ak as n,au as E,o as I,a as H,Y as r,S as o,b as J,W as V,X as $,u as l,T as M,R as N,G as P,n as Z}from"./vue.445bf94b.js";let x,L=Promise.all([(()=>{try{return G}catch{}})(),(()=>{try{return z}catch{}})()]).then(async()=>{let b,g,_;b={class:"system-dept-dialog-container"},g={class:"dialog-footer"},_=v({name:"systemDeptDialog"}),x=v({..._,emits:["refresh"],setup(Q,{expose:O,emit:T}){const{t:w}=j(),i=p(),t=A({parentId:"",deptId:"",name:"",sortOrder:9999}),c=p([]),u=p(!1),m=p(!1),k=p({parentId:[{required:!0,message:"\u4E0A\u7EA7\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{required:!0,message:"\u90E8\u95E8\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),B=(e,a)=>{u.value=!0,t.deptId="",Z(()=>{var d;(d=i.value)==null||d.resetFields(),t.parentId=a}),e==="edit"&&K(a).then(d=>{Object.assign(t,d.data)}).catch(d=>{f().error(d.msg)}),U()},D=async()=>{if(!await i.value.validate().catch(()=>{}))return!1;try{m.value=!0,t.deptId?await W(t):await X(t),f().success(w(t.deptId?"common.editSuccessText":"common.addSuccessText")),u.value=!1,T("refresh")}catch(e){f().error(e.msg)}finally{m.value=!1}},U=async()=>{Y().then(e=>{c.value=[];const a={id:"0",name:"\u6839\u90E8\u95E8",children:[]};a.children=e.data,c.value.push(a)})};return O({openDialog:B}),(e,a)=>{const d=n("el-tree-select"),h=n("el-form-item"),q=n("el-input"),S=n("el-input-number"),C=n("el-form"),y=n("el-button"),F=n("el-dialog"),R=E("loading");return I(),H("div",b,[r(F,{title:l(t).deptId?e.$t("common.editBtn"):e.$t("common.addBtn"),modelValue:l(u),"onUpdate:modelValue":a[4]||(a[4]=s=>P(u)?u.value=s:null),width:"600"},{footer:o(()=>[J("span",g,[r(y,{onClick:a[3]||(a[3]=s=>u.value=!1)},{default:o(()=>[V($(e.$t("common.cancelButtonText")),1)]),_:1}),r(y,{type:"primary",onClick:D,disabled:l(m)},{default:o(()=>[V($(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:o(()=>[M((I(),N(C,{ref_key:"deptDialogFormRef",ref:i,model:l(t),"label-width":"90px",rules:l(k)},{default:o(()=>[r(h,{label:e.$t("sysdept.parentId"),prop:"parentId"},{default:o(()=>[r(d,{modelValue:l(t).parentId,"onUpdate:modelValue":a[0]||(a[0]=s=>l(t).parentId=s),data:l(c),props:{value:"id",label:"name",children:"children"},class:"w100",clearable:"","check-strictly":"","render-after-expand":!1,placeholder:e.$t("sysdept.inputparentIdTip")},null,8,["modelValue","data","placeholder"])]),_:1},8,["label"]),r(h,{label:e.$t("sysdept.name"),prop:"name"},{default:o(()=>[r(q,{modelValue:l(t).name,"onUpdate:modelValue":a[1]||(a[1]=s=>l(t).name=s),placeholder:e.$t("sysdept.inputnameTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(h,{label:e.$t("sysdept.sortOrder"),prop:"sortOrder"},{default:o(()=>[r(S,{modelValue:l(t).sortOrder,"onUpdate:modelValue":a[2]||(a[2]=s=>l(t).sortOrder=s),placeholder:e.$t("sysdept.inputsortOrderTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[R,l(m)]])]),_:1},8,["title","modelValue"])])}}})});export{L as __tla,x as default};
